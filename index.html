<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>File System Access</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <meta content="Bikeshed version 82ce88815, updated Thu Sep 7 16:33:55 2023 -0700" name="generator">
  <link href="https://wicg.github.io/file-system-access/" rel="canonical">
  <meta content="f443f21571e13d9f4c078af8bfe862d1e61bd0a0" name="document-revision">
<style>
.domintro dt {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;

    padding-top: 0.5em;
    padding-bottom: 1em;
}
.domintro dt a {
    color: inherit; border-bottom-style: none;
}
.domintro dt code {
    font-size: inherit;
}
.domintro::before {
    content: 'For web developers (non-normative)';
    text-transform: initial;

}
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    white-space: pre;
    display: inline-block;
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled[role="button"] { cursor: pointer; }
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    white-space: pre;
    display: inline-block;
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled[role="button"] { cursor: pointer; }
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-mdn-anno */
:root {
	--mdn-bg: #EEE;
	--mdn-shadow: #999;
	--mdn-nosupport-text: #ccc;
}
@media (prefers-color-scheme: dark) {
	:root {
		--mdn-bg: #222;
		--mdn-shadow: #444;
		--mdn-nosupport-text: #666;
	}
}
.mdn-anno {
	background: var(--mdn-bg, #EEE);
	border-radius: .25em;
	box-shadow: 0 0 3px var(--mdn-shadow, #999);
	color: var(--text, black);
	font: 1em sans-serif;
	hyphens: none;
	max-width: min-content;
	overflow: hidden;
	padding: 0.2em;
	position: absolute;
	right: 0.3em;
	top: auto;
	white-space: nowrap;
	word-wrap: normal;
	z-index: 8;
}
.mdn-anno.unpositioned {
	display: none;
}
.mdn-anno.overlapping-main {
	opacity: .2;
	transition: opacity .1s;
}
.mdn-anno[open] {
	opacity: 1;
	z-index: 9;
	min-width: 9em;
}
.mdn-anno:hover {
	opacity: 1;
	outline: var(--text, black) 1px solid;
}
.mdn-anno > summary {
	font-weight: normal;
	text-align: right;
	cursor: pointer;
	display: block;
}
.mdn-anno > summary > .less-than-two-engines-flag {
	color: red;
	padding-right: 2px;
}
.mdn-anno > summary > .all-engines-flag {
	color: green;
	padding-right: 2px;
}
.mdn-anno > summary > span {
	color: #fff;
	background-color: #000;
	font-weight: normal;
	font-family: zillaslab, Palatino, "Palatino Linotype", serif;
	padding: 2px 3px 0px 3px;
	line-height: 1.3em;
	vertical-align: top;
}
.mdn-anno > .feature {
	margin-top: 20px;
}
.mdn-anno > .feature:not(:first-of-type) {
	border-top: 1px solid #999;
	margin-top: 6px;
	padding-top: 2px;
}
.mdn-anno > .feature > .less-than-two-engines-text {
	color: red;
}
.mdn-anno > .feature > .all-engines-text {
	color: green;
}
.mdn-anno > .feature > p {
	font-size: .75em;
	margin-top: 6px;
	margin-bottom: 0;
}
.mdn-anno > .feature > p + p {
	margin-top: 3px;
}
.mdn-anno > .feature > .support {
	display: block;
	font-size: 0.6em;
	margin: 0;
	padding: 0;
	margin-top: 2px;
}
.mdn-anno > .feature > .support + div {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > hr {
	display: block;
	border: none;
	border-top: 1px dotted #999;
	padding: 3px 0px 0px 0px;
	margin: 2px 3px 0px 3px;
}
.mdn-anno > .feature > .support > hr::before {
	content: "";
}
.mdn-anno > .feature > .support > span {
	padding: 0.2em 0;
	display: block;
	display: table;
}
.mdn-anno > .feature > .support > span.no {
	color: var(--mdn-nosupport-text);
	filter: grayscale(100%);
}
.mdn-anno > .feature > .support > span.no::before {
	opacity: 0.5;
}
.mdn-anno > .feature > .support > span:first-of-type {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > span > span {
	padding: 0 0.5em;
	display: table-cell;
}
.mdn-anno > .feature > .support > span > span:first-child {
	width: 100%;
}
.mdn-anno > .feature > .support > span > span:last-child {
	width: 100%;
	white-space: pre;
	padding: 0;
}
.mdn-anno > .feature > .support > span::before {
	content: ' ';
	display: table-cell;
	min-width: 1.5em;
	height: 1.5em;
	background: no-repeat center center;
	background-size: contain;
	text-align: right;
	font-size: 0.75em;
	font-weight: bold;
}
.mdn-anno > .feature > .support > .chrome_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .firefox_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .chrome::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .edge_blink::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
}
.mdn-anno > .feature > .support > .edge::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
}
.mdn-anno > .feature > .support > .firefox::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .ie::before {
	background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
}
.mdn-anno > .feature > .support > .safari_ios::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
}
.mdn-anno > .feature > .support > .nodejs::before {
	background-image: url(https://nodejs.org/static/images/favicons/favicon.ico);
}
.mdn-anno > .feature > .support > .opera_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .opera::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .safari::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
}
.mdn-anno > .feature > .support > .samsunginternet_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
}
.mdn-anno > .feature > .support > .webview_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
}
.name-slug-mismatch {
	color: red;
}
.caniuse-status:hover {
	z-index: 9;
}
/* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */;
.h-entry:not(.status-LS) dt > .mdn-anno, .h-entry:not(.status-LS) li > .mdn-anno, .h-entry:not(.status-LS) .issue > .mdn-anno, .h-entry:not(.status-LS) .note > .mdn-anno, .h-entry:not(.status-LS) .example > .mdn-anno {
	right: -6.7em;
}
.h-entry p + .mdn-anno {
	margin-top: 0;
}
 h2 + .mdn-anno.after {
	margin: -48px 0 0 0;
}
 h3 + .mdn-anno.after {
	margin: -46px 0 0 0;
}
 h4 + .mdn-anno.after {
	margin: -42px 0 0 0;
}
 h5 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
 h6 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
</style>
<style>/* Boilerplate: style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */

            pre.idl.highlight {
                background: var(--borderedblock-bg, var(--def-bg));
            }
            
</style>
<style>/* Boilerplate: style-syntax-highlighting */

code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */


@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)
*/
var { cursor: pointer; }
var.selected0 { background-color: #F4D200; box-shadow: 0 0 0 2px #F4D200; }
var.selected1 { background-color: #FF87A2; box-shadow: 0 0 0 2px #FF87A2; }
var.selected2 { background-color: #96E885; box-shadow: 0 0 0 2px #96E885; }
var.selected3 { background-color: #3EEED2; box-shadow: 0 0 0 2px #3EEED2; }
var.selected4 { background-color: #EACFB6; box-shadow: 0 0 0 2px #EACFB6; }
var.selected5 { background-color: #82DDFF; box-shadow: 0 0 0 2px #82DDFF; }
var.selected6 { background-color: #FFBCF2; box-shadow: 0 0 0 2px #FFBCF2; }
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">File System Access</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="2024-03-20">20 March 2024</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/file-system-access/">https://wicg.github.io/file-system-access/</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/wicg/file-system-access/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard" data-editor-id="126126"><a class="p-name fn u-email email" href="mailto:asully@chromium.org">Austin Sullivan</a> (<span class="p-org org">Google</span>)
     <dt class="editor">Former Editor:
     <dd class="editor p-author h-card vcard" data-editor-id="72440"><a class="p-name fn u-email email" href="mailto:mek@chromium.org">Marijn Kruisselbrink</a> (<span class="p-org org">Google</span>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2024 the Contributors to the File System Access Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document extends the API in <a data-link-type="biblio" href="#biblio-fs" title="File System Standard">[FS]</a> to enable developers to build

  powerful web apps that interact with files on the user’s local device.
  It builds on <a data-link-type="biblio" href="#biblio-file-api" title="File API">File API</a> for file reading capabilities, and adds new API
  surface to enable modifying files, as well as working with directories.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#files-and-directories"><span class="secno">2</span> <span class="content">Files and Directories</span></a>
     <ol class="toc">
      <li><a href="#concepts"><span class="secno">2.1</span> <span class="content">Concepts</span></a>
      <li><a href="#permissions"><span class="secno">2.2</span> <span class="content">Permissions</span></a>
      <li>
       <a href="#api-filesystemhandle"><span class="secno">2.3</span> <span class="content">The <code class="idl"><span>FileSystemHandle</span></code> interface</span></a>
       <ol class="toc">
        <li><a href="#api-filesystemhandle-querypermission"><span class="secno">2.3.1</span> <span class="content">The <code class="idl"><span>queryPermission()</span></code> method</span></a>
        <li><a href="#api-filesystemhandle-requestpermission"><span class="secno">2.3.2</span> <span class="content">The <code class="idl"><span>requestPermission()</span></code> method</span></a>
       </ol>
     </ol>
    <li>
     <a href="#local-filesystem"><span class="secno">3</span> <span class="content">Accessing Local File System</span></a>
     <ol class="toc">
      <li><a href="#local-file-system-permissions"><span class="secno">3.1</span> <span class="content">Local File System Permissions</span></a>
      <li>
       <a href="#api-filepickeroptions"><span class="secno">3.2</span> <span class="content">File picker options</span></a>
       <ol class="toc">
        <li><a href="#api-filepickeroptions-types"><span class="secno">3.2.1</span> <span class="content">Accepted file types</span></a>
        <li><a href="#api-filepickeroptions-starting-directory"><span class="secno">3.2.2</span> <span class="content">Starting Directory</span></a>
       </ol>
      <li><a href="#api-showopenfilepicker"><span class="secno">3.3</span> <span class="content">The <code class="idl"><span>showOpenFilePicker()</span></code> method</span></a>
      <li><a href="#api-showsavefilepicker"><span class="secno">3.4</span> <span class="content">The <code class="idl"><span>showSaveFilePicker()</span></code> method</span></a>
      <li><a href="#api-showdirectorypicker"><span class="secno">3.5</span> <span class="content">The <code class="idl"><span>showDirectoryPicker()</span></code> method</span></a>
      <li><a href="#drag-and-drop"><span class="secno">3.6</span> <span class="content">Drag and Drop</span></a>
     </ol>
    <li><a href="#accessibility-considerations"><span class="secno">4</span> <span class="content">Accessibility Considerations</span></a>
    <li>
     <a href="#privacy-considerations"><span class="secno">5</span> <span class="content">Privacy Considerations</span></a>
     <ol class="toc">
      <li><a href="#privacy-wide-access"><span class="secno">5.1</span> <span class="content">Users giving access to more, or more sensitive files than they intended.</span></a>
      <li><a href="#privacy-tracking"><span class="secno">5.2</span> <span class="content">Websites trying to use this API for tracking.</span></a>
      <li><a href="#privacy-third-party"><span class="secno">5.3</span> <span class="content">First-party vs third-party contexts.</span></a>
     </ol>
    <li>
     <a href="#security-considerations"><span class="secno">6</span> <span class="content">Security Considerations</span></a>
     <ol class="toc">
      <li><a href="#security-malware"><span class="secno">6.1</span> <span class="content">Malware</span></a>
      <li><a href="#security-ransomware"><span class="secno">6.2</span> <span class="content">Ransomware attacks</span></a>
      <li><a href="#filling-up-disk"><span class="secno">6.3</span> <span class="content">Filling up a users disk</span></a>
     </ol>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>This API enables developers to build powerful apps that interact with other
(non-Web) apps on the user’s device via the device’s file system. Prominent
examples of applications where users expect this functionality are IDEs,
photo and video editors, text editors, and more.
After a user grants a web app access, this API allows the app to read or save
changes directly to files and folders on the user’s device. Beyond reading and
writing files, this API provides the ability to open a directory and enumerate
its contents. Additionally, web apps can use this API to store references to
files and directories they’ve been given access to, allowing the web apps to
later regain access to the same content without requiring the user to select the
same file again.</p>
   <p>This API is similar to <a href="https://html.spec.whatwg.org/multipage/input.html#file-upload-state-(type=file)"><code>&lt;input type=file></code></a> and <a href="https://wicg.github.io/entries-api/#html-forms"><code>&lt;input type=file webkitdirectory></code></a> <a data-link-type="biblio" href="#biblio-entries-api" title="File and Directory Entries API">[entries-api]</a> in that user interaction happens through file and directory picker dialogs.
Unlike those APIs, this API is currently purely a javascript API, and
does not integrate with forms and/or input elements.</p>
   <p>This API extends the API in <a data-link-type="biblio" href="#biblio-fs" title="File System Standard">[FS]</a>, which specifies a <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#origin-private-file-system" id="ref-for-origin-private-file-system">bucket file system</a> which websites can get access to without having to first prompt the user for access.</p>
   <h2 class="heading settled" data-level="2" id="files-and-directories"><span class="secno">2. </span><span class="content">Files and Directories</span><a class="self-link" href="#files-and-directories"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="concepts"><span class="secno">2.1. </span><span class="content">Concepts</span><a class="self-link" href="#concepts"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="valid-suffix-code-point">valid suffix code point</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-point" id="ref-for-code-point">code point</a> that is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-alphanumeric" id="ref-for-ascii-alphanumeric">ASCII alphanumeric</a>,
U+002B (+), or U+002E (.).</p>
   <p class="note" role="note"><span class="marker">Note:</span> These code points were chosen to support most pre-existing file formats. The vast
majority of file extensions are purely alphanumeric, but compound extensions (such as <code>.tar.gz</code>) and extensions such as <code>.c++</code> for C++ source code are also fairly common,
hence the inclusion of + and . as allowed code points.</p>
   <h3 class="heading settled" data-level="2.2" id="permissions"><span class="secno">2.2. </span><span class="content">Permissions</span><a class="self-link" href="#permissions"></a></h3>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-file-system"><code>"file-system"</code></dfn> <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-powerful-feature" id="ref-for-dfn-powerful-feature">powerful feature</a>'s
permission-related algorithms and types are defined as follows:</p>
   <dl>
    <dt data-md><a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-descriptor-type" id="ref-for-dfn-permission-descriptor-type">permission descriptor type</a>
    <dd data-md>
     <p><code class="idl"><a data-link-type="idl" href="#dictdef-filesystempermissiondescriptor" id="ref-for-dictdef-filesystempermissiondescriptor">FileSystemPermissionDescriptor</a></code>, defined as:</p>
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-filesystempermissionmode"><code><c- g>FileSystemPermissionMode</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemPermissionMode" data-dfn-type="enum-value" data-export id="dom-filesystempermissionmode-read"><code><c- s>"read"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemPermissionMode" data-dfn-type="enum-value" data-export id="dom-filesystempermissionmode-readwrite"><code><c- s>"readwrite"</c-></code></dfn>
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filesystempermissiondescriptor"><code><c- g>FileSystemPermissionDescriptor</c-></code></dfn> : <a data-link-type="idl-name" href="https://w3c.github.io/permissions/#dom-permissiondescriptor" id="ref-for-dom-permissiondescriptor"><c- n>PermissionDescriptor</c-></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="https://fs.spec.whatwg.org/#filesystemhandle" id="ref-for-filesystemhandle"><c- n>FileSystemHandle</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemPermissionDescriptor" data-dfn-type="dict-member" data-export data-type="FileSystemHandle " id="dom-filesystempermissiondescriptor-handle"><code><c- g>handle</c-></code></dfn>;
  <a data-link-type="idl-name" href="#enumdef-filesystempermissionmode" id="ref-for-enumdef-filesystempermissionmode"><c- n>FileSystemPermissionMode</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;read&quot;" data-dfn-for="FileSystemPermissionDescriptor" data-dfn-type="dict-member" data-export data-type="FileSystemPermissionMode " id="dom-filesystempermissiondescriptor-mode"><code><c- g>mode</c-></code></dfn> = "read";
};
</pre>
    <dt data-md><a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state-constraints" id="ref-for-dfn-permission-state-constraints">permission state constraints</a>
    <dd data-md>
     <div class="algorithm" data-algorithm="permission state constraints">
       To determine <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state-constraints" id="ref-for-dfn-permission-state-constraints①">permission state constraints</a> for a <code class="idl"><a data-link-type="idl" href="#dictdef-filesystempermissiondescriptor" id="ref-for-dictdef-filesystempermissiondescriptor①">FileSystemPermissionDescriptor</a></code> <var>desc</var>,
run these steps: 
      <ol>
       <li data-md>
        <p>Let <var>entry</var> be <var>desc</var>["<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle">handle</a></code>"]'s <a data-link-type="dfn">entry</a>.</p>
       <li data-md>
        <p>If <var>entry</var> represents a <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#entry" id="ref-for-entry">file system entry</a> in a <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#origin-private-file-system" id="ref-for-origin-private-file-system①">bucket file system</a>,
 this descriptor’s <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state">permission state</a> must always be
 "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted">granted</a></code>".</p>
       <li data-md>
        <p>Otherwise, if <var>entry</var>’s <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#entry-parent" id="ref-for-entry-parent">parent</a> is not null, this descriptor’s <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state①">permission state</a> must be
 equal to the <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state②">permission state</a> for a descriptor with the same <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode">mode</a></code>,
 and a <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle①">handle</a></code> representing <var>entry</var>’s <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#entry-parent" id="ref-for-entry-parent①">parent</a>.</p>
       <li data-md>
        <p>Otherwise, if <var>desc</var>["<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode①">mode</a></code>"] is
 "<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite">readwrite</a></code>":</p>
        <ol>
         <li data-md>
          <p>Let <var>read state</var> be the <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state③">permission state</a> for a descriptor
 with the same <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle②">handle</a></code>,
 but whose <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode②">mode</a></code> is
 "<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read">read</a></code>".</p>
         <li data-md>
          <p>If <var>read state</var> is not "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted①">granted</a></code>", this descriptor’s <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state④">permission state</a> must be equal to <var>read state</var>.</p>
        </ol>
      </ol>
     </div>
   </dl>
   <p class="issue" id="issue-45c3f8b0"><a class="self-link" href="#issue-45c3f8b0"></a> Make these checks no longer associated with an entry. <a href="https://github.com/whatwg/fs/issues/101">[Issue #whatwg/fs#101]</a></p>
   <dl>
    <dt data-md><a data-link-type="dfn" href="https://wicg.github.io/permissions-request/#permission-request-algorithm" id="ref-for-permission-request-algorithm">permission request algorithm</a>
    <dd data-md>
     <div class="algorithm" data-algorithm="permission request algorithm">
       Given a <code class="idl"><a data-link-type="idl" href="#dictdef-filesystempermissiondescriptor" id="ref-for-dictdef-filesystempermissiondescriptor②">FileSystemPermissionDescriptor</a></code> <var>desc</var> and a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstatus" id="ref-for-dom-permissionstatus">PermissionStatus</a></code> <var>status</var>,
run these steps: 
      <ol>
       <li data-md>
        <p>Run the <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-default-permission-query-algorithm" id="ref-for-dfn-default-permission-query-algorithm">default permission query algorithm</a> on <var>desc</var> and <var>status</var>.</p>
       <li data-md>
        <p>If <var>status</var>’s <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstatus-state" id="ref-for-dom-permissionstatus-state">state</a></code> is not
 "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt">prompt</a></code>", then abort these steps.</p>
       <li data-md>
        <p>Let <var>settings</var> be <var>desc</var>["<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle③">handle</a></code>"]'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object">relevant settings object</a>.</p>
       <li data-md>
        <p>Let <var>global</var> be <var>settings</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global">global object</a>.</p>
       <li data-md>
        <p>If <var>global</var> is not a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code>, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw">throw</a> a "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>.</p>
       <li data-md>
        <p>If <var>global</var> does not have <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" id="ref-for-transient-activation">transient activation</a>, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw①">throw</a> a "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror①">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code>.</p>
       <li data-md>
        <p>If <var>settings</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin">origin</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin">same origin</a> with <var>settings</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin" id="ref-for-concept-environment-top-level-origin">top-level origin</a>, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw②">throw</a> a "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror②">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException②">DOMException</a></code>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-request-permission-to-use" id="ref-for-dfn-request-permission-to-use">Request permission to use</a> <var>desc</var>.</p>
       <li data-md>
        <p>Run the <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-default-permission-query-algorithm" id="ref-for-dfn-default-permission-query-algorithm①">default permission query algorithm</a> on <var>desc</var> and <var>status</var>.</p>
      </ol>
      <p class="issue" id="issue-88417955"><a class="self-link" href="#issue-88417955"></a> Ideally this user activation requirement would be defined upstream. <a href="https://github.com/WICG/permissions-request/issues/2">[Issue #WICG/permissions-request#2]</a></p>
     </div>
   </dl>
   <div class="algorithm" data-algorithm="querying file system permission">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="querying file system permission|query file system permission" data-noexport id="querying-file-system-permission">query file system permission</dfn> given a <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#filesystemhandle" id="ref-for-filesystemhandle①">FileSystemHandle</a></code> <var>handle</var> and a <code class="idl"><a data-link-type="idl" href="#enumdef-filesystempermissionmode" id="ref-for-enumdef-filesystempermissionmode①">FileSystemPermissionMode</a></code> <var>mode</var>, run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>desc</var> be a <code class="idl"><a data-link-type="idl" href="#dictdef-filesystempermissiondescriptor" id="ref-for-dictdef-filesystempermissiondescriptor③">FileSystemPermissionDescriptor</a></code>.</p>
     <li data-md>
      <p>Set <var>desc</var>["<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name">name</a></code>"] to
 "<code class="idl"><a data-link-type="idl" href="#dom-permissionname-file-system" id="ref-for-dom-permissionname-file-system">file-system</a></code>".</p>
     <li data-md>
      <p>Set <var>desc</var>["<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle④">handle</a></code>"] to <var>handle</var>.</p>
     <li data-md>
      <p>Set <var>desc</var>["<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode③">mode</a></code>"] to <var>mode</var>.</p>
     <li data-md>
      <p>Return <var>desc</var>’s <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state⑤">permission state</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="requesting file system permission">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="requesting file system permission|request file system permission" data-noexport id="requesting-file-system-permission">request file system permission</dfn> given a <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#filesystemhandle" id="ref-for-filesystemhandle②">FileSystemHandle</a></code> <var>handle</var> and a <code class="idl"><a data-link-type="idl" href="#enumdef-filesystempermissionmode" id="ref-for-enumdef-filesystempermissionmode②">FileSystemPermissionMode</a></code> <var>mode</var>, run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>desc</var> be a <code class="idl"><a data-link-type="idl" href="#dictdef-filesystempermissiondescriptor" id="ref-for-dictdef-filesystempermissiondescriptor④">FileSystemPermissionDescriptor</a></code>.</p>
     <li data-md>
      <p>Set <var>desc</var>["<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name①">name</a></code>"] to
 "<code class="idl"><a data-link-type="idl" href="#dom-permissionname-file-system" id="ref-for-dom-permissionname-file-system①">file-system</a></code>".</p>
     <li data-md>
      <p>Set <var>desc</var>["<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle⑤">handle</a></code>"] to <var>handle</var>.</p>
     <li data-md>
      <p>Set <var>desc</var>["<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode④">mode</a></code>"] to <var>mode</var>.</p>
     <li data-md>
      <p>Let <var>status</var> be the result of running <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-create-a-permissionstatus" id="ref-for-dfn-create-a-permissionstatus">create a PermissionStatus</a> for <var>desc</var>.</p>
     <li data-md>
      <p>Run the <a data-link-type="dfn" href="https://wicg.github.io/permissions-request/#permission-request-algorithm" id="ref-for-permission-request-algorithm①">permission request algorithm</a> for the
 "<code class="idl"><a data-link-type="idl" href="#dom-permissionname-file-system" id="ref-for-dom-permissionname-file-system②">file-system</a></code>" feature, given <var>desc</var> and <var>status</var>.</p>
     <li data-md>
      <p>Return <var>desc</var>’s <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state⑥">permission state</a>.</p>
    </ol>
   </div>
   <p class="issue" id="issue-7fc2f5c7"><a class="self-link" href="#issue-7fc2f5c7"></a> Currently <code class="idl"><a data-link-type="idl" href="#enumdef-filesystempermissionmode" id="ref-for-enumdef-filesystempermissionmode③">FileSystemPermissionMode</a></code> can only be
"<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read①">read</a></code>" or "<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite①">readwrite</a></code>".
In the future we might want to add a "write" mode as well to support write-only
handles. <a href="https://github.com/wicg/file-system-access/issues/119">[Issue #119]</a></p>
   <h3 class="heading settled" data-level="2.3" id="api-filesystemhandle"><span class="secno">2.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#filesystemhandle" id="ref-for-filesystemhandle③">FileSystemHandle</a></code> interface</span><a class="self-link" href="#api-filesystemhandle"></a></h3>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filesystemhandlepermissiondescriptor"><code><c- g>FileSystemHandlePermissionDescriptor</c-></code></dfn> {
  <a data-link-type="idl-name" href="#enumdef-filesystempermissionmode" id="ref-for-enumdef-filesystempermissionmode④"><c- n>FileSystemPermissionMode</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;read&quot;" data-dfn-for="FileSystemHandlePermissionDescriptor" data-dfn-type="dict-member" data-export data-type="FileSystemPermissionMode " id="dom-filesystemhandlepermissiondescriptor-mode"><code><c- g>mode</c-></code></dfn> = "read";
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable" id="ref-for-serializable"><c- g>Serializable</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://fs.spec.whatwg.org/#filesystemhandle" id="ref-for-filesystemhandle④"><c- g>FileSystemHandle</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#dom-permissionstate" id="ref-for-dom-permissionstate"><c- n>PermissionState</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemhandle-querypermission" id="ref-for-dom-filesystemhandle-querypermission"><c- g>queryPermission</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemhandlepermissiondescriptor" id="ref-for-dictdef-filesystemhandlepermissiondescriptor"><c- n>FileSystemHandlePermissionDescriptor</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemHandle/queryPermission(descriptor), FileSystemHandle/queryPermission()" data-dfn-type="argument" data-export id="dom-filesystemhandle-querypermission-descriptor-descriptor"><code><c- g>descriptor</c-></code><a class="self-link" href="#dom-filesystemhandle-querypermission-descriptor-descriptor"></a></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#dom-permissionstate" id="ref-for-dom-permissionstate①"><c- n>PermissionState</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission"><c- g>requestPermission</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemhandlepermissiondescriptor" id="ref-for-dictdef-filesystemhandlepermissiondescriptor①"><c- n>FileSystemHandlePermissionDescriptor</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemHandle/requestPermission(descriptor), FileSystemHandle/requestPermission()" data-dfn-type="argument" data-export id="dom-filesystemhandle-requestpermission-descriptor-descriptor"><code><c- g>descriptor</c-></code><a class="self-link" href="#dom-filesystemhandle-requestpermission-descriptor-descriptor"></a></dfn> = {});
};
</pre>
   <h4 class="heading settled" data-level="2.3.1" id="api-filesystemhandle-querypermission"><span class="secno">2.3.1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-querypermission" id="ref-for-dom-filesystemhandle-querypermission①">queryPermission()</a></code> method</span><a class="self-link" href="#api-filesystemhandle-querypermission"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>status</var> = await <var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-querypermission" id="ref-for-dom-filesystemhandle-querypermission②">queryPermission</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlepermissiondescriptor-mode" id="ref-for-dom-filesystemhandlepermissiondescriptor-mode">mode</a></code> : "<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read②">read</a></code>" })
     <dt data-md><var>status</var> = await <var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-querypermission" id="ref-for-dom-filesystemhandle-querypermission③">queryPermission()</a></code>
     <dt data-md><var>status</var> = (await navigator.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-navigator-permissions" id="ref-for-dom-navigator-permissions">permissions</a></code>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissions-query" id="ref-for-dom-permissions-query">query</a></code>({ <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name②">name</a></code> : "<code class="idl"><a data-link-type="idl" href="#dom-permissionname-file-system" id="ref-for-dom-permissionname-file-system③">file-system</a></code>", <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle⑥">handle</a></code> : <var>handle</var> })).<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstatus-state" id="ref-for-dom-permissionstatus-state①">state</a></code>
     <dd data-md>
      <p>Queries the current state of the read permission of this handle.
 If this returns "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt①">prompt</a></code>" the website will have to call <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission①">requestPermission()</a></code> before any operations on the
 handle can be done.
 If this returns "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied">denied</a></code>" any operations will reject.</p>
      <p>Usually handles returned by the <a data-link-type="dfn" href="#local-file-system-handle-factories" id="ref-for-local-file-system-handle-factories">local file system handle factories</a> will
 initially return "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted②">granted</a></code>" for their read permission
 state, however other than through the user revoking permission, a handle
 retrieved from IndexedDB is also likely to return
 "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt②">prompt</a></code>".</p>
     <dt data-md><var>status</var> = await <var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-querypermission" id="ref-for-dom-filesystemhandle-querypermission④">queryPermission</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlepermissiondescriptor-mode" id="ref-for-dom-filesystemhandlepermissiondescriptor-mode①">mode</a></code> : "<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite②">readwrite</a></code>" })
     <dt data-md><var>status</var> = (await navigator.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-navigator-permissions" id="ref-for-dom-navigator-permissions①">permissions</a></code>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissions-query" id="ref-for-dom-permissions-query①">query</a></code>({ <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name③">name</a></code> : "<code class="idl"><a data-link-type="idl" href="#dom-permissionname-file-system" id="ref-for-dom-permissionname-file-system④">file-system</a></code>", <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle⑦">handle</a></code> : <var>handle</var>, <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode⑤">mode</a></code> : "<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite③">readwrite</a></code>" }).<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstatus-state" id="ref-for-dom-permissionstatus-state②">state</a></code>
     <dd data-md>
      <p>Queries the current state of the write permission of this handle.
 If this returns "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt③">prompt</a></code>", attempting to modify the
 file or directory this handle represents will require user activation
 and will result in a confirmation prompt being shown to the user.
 However if the state of the read permission of this handle is also
 "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt④">prompt</a></code>" the website will need to call <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission②">requestPermission()</a></code>.
 There is no automatic prompting for read access when attempting to
 read from a file or directory.</p>
    </dl>
   </div>
   <p><strong class="advisement"> The integration with the permissions API’s <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissions-query" id="ref-for-dom-permissions-query②">query()</a></code> method is not yet implemented in Chrome.</strong></p>
   <div class="algorithm" data-algorithm="queryPermission(descriptor)" data-algorithm-for="FileSystemHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandle" data-dfn-type="method" data-export data-lt="queryPermission(descriptor)|queryPermission()" id="dom-filesystemhandle-querypermission"><code>queryPermission(<var>descriptor</var>)</code></dfn> method, when invoked, must run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>state</var> be the result of <a data-link-type="dfn" href="#querying-file-system-permission" id="ref-for-querying-file-system-permission">querying file system permission</a> given <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a></b> and <var>descriptor</var>["<code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlepermissiondescriptor-mode" id="ref-for-dom-filesystemhandlepermissiondescriptor-mode②">mode</a></code>"].</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve">Resolve</a> <var>result</var> with <var>state</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.3.2" id="api-filesystemhandle-requestpermission"><span class="secno">2.3.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission③">requestPermission()</a></code> method</span><a class="self-link" href="#api-filesystemhandle-requestpermission"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>status</var> = await <var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission④">requestPermission</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlepermissiondescriptor-mode" id="ref-for-dom-filesystemhandlepermissiondescriptor-mode③">mode</a></code> : "<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read③">read</a></code>" })
     <dt data-md><var>status</var> = await <var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission⑤">requestPermission()</a></code>
     <dd data-md>
      <p>If the state of the read permission of this handle is anything other than
 "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt⑤">prompt</a></code>", this will return that state directly.
 If it is "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt⑥">prompt</a></code>" however, user activation is needed and
 this will show a confirmation prompt to the user.
 The new read permission state is then returned, depending on
 the user’s response to the prompt.</p>
     <dt data-md><var>status</var> = await <var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission⑥">requestPermission</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlepermissiondescriptor-mode" id="ref-for-dom-filesystemhandlepermissiondescriptor-mode④">mode</a></code> : "<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite④">readwrite</a></code>" })
     <dd data-md>
      <p>If the state of the write permission of this handle is anything other than
 "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt⑦">prompt</a></code>", this will return that state directly.
 If the status of the read permission of this handle is
 "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied①">denied</a></code>" this will return that.</p>
      <p>Otherwise the state of the write permission is "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt⑧">prompt</a></code>"
 and this will show a confirmation prompt to the user.
 The new write permission state is then returned, depending on
 what the user selected.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="requestPermission(descriptor)" data-algorithm-for="FileSystemHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandle" data-dfn-type="method" data-export data-lt="requestPermission(descriptor)|requestPermission()" id="dom-filesystemhandle-requestpermission"><code>requestPermission(<var>descriptor</var>)</code></dfn> method, when invoked, must run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise①">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>state</var> be the result of <a data-link-type="dfn" href="#requesting-file-system-permission" id="ref-for-requesting-file-system-permission">requesting file system permission</a> given <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①">this</a></b> and <var>descriptor</var>["<code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlepermissiondescriptor-mode" id="ref-for-dom-filesystemhandlepermissiondescriptor-mode⑤">mode</a></code>"].
 If that throws an exception, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject">reject</a> <var>result</var> with that exception and abort.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①">Resolve</a> <var>result</var> with <var>state</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="3" id="local-filesystem"><span class="secno">3. </span><span class="content">Accessing Local File System</span><a class="self-link" href="#local-filesystem"></a></h2>
<pre class="idl highlight def"><c- b>enum</c-> <a class="idl-code" data-link-type="enum" href="#enumdef-wellknowndirectory" id="ref-for-enumdef-wellknowndirectory"><c- g>WellKnownDirectory</c-></a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-wellknowndirectory-desktop" id="ref-for-dom-wellknowndirectory-desktop"><c- s>"desktop"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-wellknowndirectory-documents" id="ref-for-dom-wellknowndirectory-documents"><c- s>"documents"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-wellknowndirectory-downloads" id="ref-for-dom-wellknowndirectory-downloads"><c- s>"downloads"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-wellknowndirectory-music" id="ref-for-dom-wellknowndirectory-music"><c- s>"music"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-wellknowndirectory-pictures" id="ref-for-dom-wellknowndirectory-pictures"><c- s>"pictures"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-wellknowndirectory-videos" id="ref-for-dom-wellknowndirectory-videos"><c- s>"videos"</c-></a>,
};

<c- b>typedef</c-> (<a data-link-type="idl-name" href="#enumdef-wellknowndirectory" id="ref-for-enumdef-wellknowndirectory①"><c- n>WellKnownDirectory</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://fs.spec.whatwg.org/#filesystemhandle" id="ref-for-filesystemhandle⑤"><c- n>FileSystemHandle</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export id="typedefdef-startindirectory"><code><c- g>StartInDirectory</c-></code></dfn>;

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filepickeraccepttype"><code><c- g>FilePickerAcceptType</c-></code></dfn> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;&quot;" data-dfn-for="FilePickerAcceptType" data-dfn-type="dict-member" data-export data-type="USVString " id="dom-filepickeraccepttype-description"><code><c- g>description</c-></code></dfn> = "";
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-record" id="ref-for-idl-record"><c- b>record</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①"><c- b>USVString</c-></a>, (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString②"><c- b>USVString</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString③"><c- b>USVString</c-></a>>)> <dfn class="dfn-paneled idl-code" data-dfn-for="FilePickerAcceptType" data-dfn-type="dict-member" data-export data-type="record<USVString, (USVString or sequence<USVString>)> " id="dom-filepickeraccepttype-accept"><code><c- g>accept</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filepickeroptions"><code><c- g>FilePickerOptions</c-></code></dfn> {
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-filepickeraccepttype" id="ref-for-dictdef-filepickeraccepttype"><c- n>FilePickerAcceptType</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FilePickerOptions" data-dfn-type="dict-member" data-export data-type="sequence<FilePickerAcceptType> " id="dom-filepickeroptions-types"><code><c- g>types</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="FilePickerOptions" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-filepickeroptions-excludeacceptalloption"><code><c- g>excludeAcceptAllOption</c-></code></dfn> = <c- b>false</c->;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FilePickerOptions" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-filepickeroptions-id"><code><c- g>id</c-></code></dfn>;
    <a data-link-type="idl-name" href="#typedefdef-startindirectory" id="ref-for-typedefdef-startindirectory"><c- n>StartInDirectory</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FilePickerOptions" data-dfn-type="dict-member" data-export data-type="StartInDirectory " id="dom-filepickeroptions-startin"><code><c- g>startIn</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-openfilepickeroptions"><code><c- g>OpenFilePickerOptions</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-filepickeroptions" id="ref-for-dictdef-filepickeroptions"><c- n>FilePickerOptions</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="OpenFilePickerOptions" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-openfilepickeroptions-multiple"><code><c- g>multiple</c-></code></dfn> = <c- b>false</c->;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-savefilepickeroptions"><code><c- g>SaveFilePickerOptions</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-filepickeroptions" id="ref-for-dictdef-filepickeroptions①"><c- n>FilePickerOptions</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString④"><c- b>USVString</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="SaveFilePickerOptions" data-dfn-type="dict-member" data-export data-type="USVString? " id="dom-savefilepickeroptions-suggestedname"><code><c- g>suggestedName</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-directorypickeroptions"><code><c- g>DirectoryPickerOptions</c-></code></dfn> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="DirectoryPickerOptions" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-directorypickeroptions-id"><code><c- g>id</c-></code></dfn>;
    <a data-link-type="idl-name" href="#typedefdef-startindirectory" id="ref-for-typedefdef-startindirectory①"><c- n>StartInDirectory</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="DirectoryPickerOptions" data-dfn-type="dict-member" data-export data-type="StartInDirectory " id="dom-directorypickeroptions-startin"><code><c- g>startIn</c-></code></dfn>;
    <a data-link-type="idl-name" href="#enumdef-filesystempermissionmode" id="ref-for-enumdef-filesystempermissionmode⑤"><c- n>FileSystemPermissionMode</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;read&quot;" data-dfn-for="DirectoryPickerOptions" data-dfn-type="dict-member" data-export data-type="FileSystemPermissionMode " id="dom-directorypickeroptions-mode"><code><c- g>mode</c-></code></dfn> = "read";
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext①"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①"><c- g>Window</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://fs.spec.whatwg.org/#filesystemfilehandle" id="ref-for-filesystemfilehandle"><c- n>FileSystemFileHandle</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker"><c- g>showOpenFilePicker</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-openfilepickeroptions" id="ref-for-dictdef-openfilepickeroptions"><c- n>OpenFilePickerOptions</c-></a> <dfn class="idl-code" data-dfn-for="Window/showOpenFilePicker(options), Window/showOpenFilePicker()" data-dfn-type="argument" data-export id="dom-window-showopenfilepicker-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-window-showopenfilepicker-options-options"></a></dfn> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise③"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://fs.spec.whatwg.org/#filesystemfilehandle" id="ref-for-filesystemfilehandle①"><c- n>FileSystemFileHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker"><c- g>showSaveFilePicker</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-savefilepickeroptions" id="ref-for-dictdef-savefilepickeroptions"><c- n>SaveFilePickerOptions</c-></a> <dfn class="idl-code" data-dfn-for="Window/showSaveFilePicker(options), Window/showSaveFilePicker()" data-dfn-type="argument" data-export id="dom-window-showsavefilepicker-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-window-showsavefilepicker-options-options"></a></dfn> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise④"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://fs.spec.whatwg.org/#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle"><c- n>FileSystemDirectoryHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-window-showdirectorypicker" id="ref-for-dom-window-showdirectorypicker"><c- g>showDirectoryPicker</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-directorypickeroptions" id="ref-for-dictdef-directorypickeroptions"><c- n>DirectoryPickerOptions</c-></a> <dfn class="idl-code" data-dfn-for="Window/showDirectoryPicker(options), Window/showDirectoryPicker()" data-dfn-type="argument" data-export id="dom-window-showdirectorypicker-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-window-showdirectorypicker-options-options"></a></dfn> = {});
};
</pre>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker①">showOpenFilePicker()</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker①">showSaveFilePicker()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-window-showdirectorypicker" id="ref-for-dom-window-showdirectorypicker①">showDirectoryPicker()</a></code> methods
are together known as the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="local-file-system-handle-factories">local file system handle factories</dfn>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> What is referred to as the "local file system" in this spec, does not have to
strictly refer to the file system on the local device. What we call the local file system
could just as well be backed by a cloud provider. For example on Chrome OS these
file pickers will also let you pick files and directories on Google Drive.</p>
   <p><strong class="advisement"> In Chrome versions earlier than 85, this was implemented as a generic <code>chooseFileSystemEntries</code> method.</strong></p>
   <h3 class="heading settled" data-level="3.1" id="local-file-system-permissions"><span class="secno">3.1. </span><span class="content">Local File System Permissions</span><a class="self-link" href="#local-file-system-permissions"></a></h3>
   <p>The fact that the user picked the specific files returned by the <a data-link-type="dfn" href="#local-file-system-handle-factories" id="ref-for-local-file-system-handle-factories①">local file system handle factories</a> in a prompt
should be treated by the user agent as the user intending to grant read access to the website
for the returned files. As such, at the time the promise returned by one of the <a data-link-type="dfn" href="#local-file-system-handle-factories" id="ref-for-local-file-system-handle-factories②">local file system handle factories</a> resolves, <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state⑦">permission state</a> for a descriptor with <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle⑧">handle</a></code> set to the returned handle,
and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode⑥">mode</a></code> set to "<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read④">read</a></code>"
should be "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted③">granted</a></code>".</p>
   <p>Additionally for calls to <code class="idl"><a data-link-type="idl" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker②">showSaveFilePicker</a></code> the <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state⑧">permission state</a> for a descriptor with <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle⑨">handle</a></code> set to the returned handle,
and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode⑦">mode</a></code> set to "<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite⑤">readwrite</a></code>"
should be "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted④">granted</a></code>".</p>
   <div class="algorithm" data-algorithm="is allowed to show a file picker">
     To verify that an <var>environment</var> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="is-allowed-to-show-a-file-picker">is allowed to show a file picker</dfn>, run these steps: 
    <ol>
     <li data-md>
      <p>If <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①">origin</a> is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque" id="ref-for-concept-origin-opaque">opaque origin</a>,
 return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with">a promise rejected with</a> a "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror③">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException③">DOMException</a></code>.</p>
     <li data-md>
      <p>If <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin②">origin</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin①">same origin</a> with <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin" id="ref-for-concept-environment-top-level-origin①">top-level origin</a>,
 return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①">a promise rejected with</a> a "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror④">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException④">DOMException</a></code>.</p>
     <li data-md>
      <p>Let <var>global</var> be <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global①">global object</a>.</p>
     <li data-md>
      <p>If <var>global</var> does not have <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" id="ref-for-transient-activation①">transient activation</a>, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw③">throw</a> a "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror⑤">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑤">DOMException</a></code>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="3.2" id="api-filepickeroptions"><span class="secno">3.2. </span><span class="content">File picker options</span><a class="self-link" href="#api-filepickeroptions"></a></h3>
   <h4 class="heading settled" data-level="3.2.1" id="api-filepickeroptions-types"><span class="secno">3.2.1. </span><span class="content">Accepted file types</span><a class="self-link" href="#api-filepickeroptions-types"></a></h4>
   <div class="note domintro" role="note">
     The <code class="idl"><a data-link-type="idl" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker②">showOpenFilePicker(options)</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker③">showSaveFilePicker(options)</a></code> methods accept a <code class="idl"><a data-link-type="idl" href="#dictdef-filepickeroptions" id="ref-for-dictdef-filepickeroptions②">FilePickerOptions</a></code> argument, which lets the website specify the types of files
the file picker will let the user select. 
    <p>Each entry in <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-types" id="ref-for-dom-filepickeroptions-types">types</a></code> specifies a single user selectable option
for filtering the files displayed in the file picker.</p>
    <p>Each option consists of an <span class="allow-2119">optional</span> <code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-description" id="ref-for-dom-filepickeraccepttype-description">description</a></code> and a number of MIME types and extensions (specified as a mapping of
MIME type to a list of extensions). If no description is provided one will be generated.
Extensions have to be strings that start with a "." and only contain <a data-link-type="dfn" href="#valid-suffix-code-point" id="ref-for-valid-suffix-code-point">valid suffix code points</a>.
Additionally extensions are limited to a length of 16 code points.</p>
    <p>In addition to complete MIME types, "*" can be used as the subtype of a MIME type to match
for example all image formats with "image/*".</p>
    <p>Websites <span class="allow-2119">should</span> always provide both MIME types and file
extensions for each option. On platforms that only use file extensions to describe file types
user agents can match on the extensions, while on platforms that don’t use extensions,
user agents can match on MIME type.</p>
    <p>By default the file picker will also include an option to not apply any filter,
letting the user select any file. Set <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-excludeacceptalloption" id="ref-for-dom-filepickeroptions-excludeacceptalloption">excludeAcceptAllOption</a></code> to <code>true</code> to not
include this option in the file picker.</p>
    <p>For example , the following options will let the user pick one of three different filters.
One for text files (either plain text or HTML), one for images, and a third one that doesn’t apply
any filter and lets the user select any file.</p>
<pre class="example highlight" id="filepickeroptions-types-example1"><a class="self-link" href="#filepickeroptions-types-example1"></a><c- a>const</c-> options <c- o>=</c-> <c- p>{</c->
  <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-types" id="ref-for-dom-filepickeroptions-types①">types</a></code><c- o>:</c-> <c- p>[</c->
    <c- p>{</c->
      <code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-description" id="ref-for-dom-filepickeraccepttype-description①">description</a></code><c- o>:</c-> <c- t>'Text Files'</c-><c- p>,</c->
      <code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-accept" id="ref-for-dom-filepickeraccepttype-accept">accept</a></code><c- o>:</c-> <c- p>{</c->
        <c- t>'text/plain'</c-><c- o>:</c-> <c- p>[</c-><c- t>'.txt'</c-><c- p>,</c-> <c- t>'.text'</c-><c- p>],</c->
        <c- t>'text/html'</c-><c- o>:</c-> <c- p>[</c-><c- t>'.html'</c-><c- p>,</c-> <c- t>'.htm'</c-><c- p>]</c->
      <c- p>}</c->
    <c- p>},</c->
    <c- p>{</c->
      <code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-description" id="ref-for-dom-filepickeraccepttype-description②">description</a></code><c- o>:</c-> <c- t>'Images'</c-><c- p>,</c->
      <code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-accept" id="ref-for-dom-filepickeraccepttype-accept①">accept</a></code><c- o>:</c-> <c- p>{</c->
        <c- t>'image/*'</c-><c- o>:</c-> <c- p>[</c-><c- t>'.png'</c-><c- p>,</c-> <c- t>'.gif'</c-><c- p>,</c-> <c- t>'.jpeg'</c-><c- p>,</c-> <c- t>'.jpg'</c-><c- p>]</c->
      <c- p>}</c->
    <c- p>}</c->
  <c- p>],</c->
<c- p>};</c->
</pre>
    <p>On the other hand, the following example will only let the user select SVG files. The dialog
will not show an option to not apply any filters.</p>
<pre class="example highlight" id="filepickeroptions-types-example2"><a class="self-link" href="#filepickeroptions-types-example2"></a><c- a>const</c-> options <c- o>=</c-> <c- p>{</c->
  <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-types" id="ref-for-dom-filepickeroptions-types②">types</a></code><c- o>:</c-> <c- p>[</c->
    <c- p>{</c->
      <code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-accept" id="ref-for-dom-filepickeraccepttype-accept②">accept</a></code><c- o>:</c-> <c- p>{</c->
        <c- t>'image/svg+xml'</c-><c- o>:</c-> <c- t>'.svg'</c->
      <c- p>}</c->
    <c- p>},</c->
  <c- p>],</c->
  <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-excludeacceptalloption" id="ref-for-dom-filepickeroptions-excludeacceptalloption①">excludeAcceptAllOption</a></code><c- o>:</c-> <c- kc>true</c->
<c- p>};</c->
</pre>
   </div>
   <div class="algorithm" data-algorithm="process accept types">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="process-accept-types">process accept types</dfn>, given <code class="idl"><a data-link-type="idl" href="#dictdef-filepickeroptions" id="ref-for-dictdef-filepickeroptions③">FilePickerOptions</a></code> <var>options</var>,
run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>accepts options</var> be a empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple">tuples</a> consisting of a description and a filter.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>type</var> of <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-types" id="ref-for-dom-filepickeroptions-types③">types</a></code>"]:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate">For each</a> <var>typeString</var> → <var>suffixes</var> of <var>type</var>["<code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-accept" id="ref-for-dom-filepickeraccepttype-accept③">accept</a></code>"]:</p>
        <ol>
         <li data-md>
          <p>Let <var>parsedType</var> be the result of <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parse-a-mime-type" id="ref-for-parse-a-mime-type">parse a MIME type</a> with <var>typeString</var>.</p>
         <li data-md>
          <p>If <var>parsedType</var> is failure, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw④">throw</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code>.</p>
         <li data-md>
          <p>If <var>parsedType</var>’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parameters" id="ref-for-parameters">parameters</a> are not empty, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑤">throw</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code>.</p>
         <li data-md>
          <p>If <var>suffixes</var> is a string:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="#validate-a-suffix" id="ref-for-validate-a-suffix">Validate a suffix</a> given <var>suffixes</var>.</p>
          </ol>
         <li data-md>
          <p>Otherwise, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">for each</a> <var>suffix</var> of <var>suffixes</var>:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="#validate-a-suffix" id="ref-for-validate-a-suffix①">Validate a suffix</a> given <var>suffix</var>.</p>
          </ol>
        </ol>
       <li data-md>
        <p>Let <var>filter</var> be these steps, given a <var>filename</var> (a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">string</a>) and a <var>type</var> (a <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#mime-type" id="ref-for-mime-type">MIME type</a>):</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate①">For each</a> <var>typeString</var> → <var>suffixes</var> of <var>type</var>["<code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-accept" id="ref-for-dom-filepickeraccepttype-accept④">accept</a></code>"]:</p>
         <li data-md>
          <p>Let <var>parsedType</var> be the result of <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parse-a-mime-type" id="ref-for-parse-a-mime-type①">parse a MIME type</a> with <var>typeString</var>.</p>
          <ol>
           <li data-md>
            <p>If <var>parsedType</var>’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#subtype" id="ref-for-subtype">subtype</a> is "*":</p>
            <ol>
             <li data-md>
              <p>If <var>parsedType</var>’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#type" id="ref-for-type">type</a> is "*", return <code>true</code>.</p>
             <li data-md>
              <p>If <var>parsedType</var>’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#type" id="ref-for-type①">type</a> is <var>type</var>’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#type" id="ref-for-type②">type</a>, return <code>true</code>.</p>
            </ol>
           <li data-md>
            <p><var>parsedType</var>’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#mime-type-essence" id="ref-for-mime-type-essence">essence</a> is <var>type</var>’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#mime-type-essence" id="ref-for-mime-type-essence①">essence</a>, return <code>true</code>.</p>
           <li data-md>
            <p>If <var>suffixes</var> is a string, set <var>suffixes</var> to « <var>suffixes</var> ».</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">For each</a> <var>suffix</var> of <var>suffixes</var>:</p>
            <ol>
             <li data-md>
              <p>If <var>filename</var> ends with <var>suffix</var>, return <code>true</code>.</p>
            </ol>
          </ol>
         <li data-md>
          <p>Return <code>false</code>.</p>
        </ol>
       <li data-md>
        <p>Let <var>description</var> be <var>type</var>["<code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-description" id="ref-for-dom-filepickeraccepttype-description③">description</a></code>"].</p>
       <li data-md>
        <p>If <var>description</var> is an empty string,
set <var>description</var> to some user understandable string describing <var>filter</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">Append</a> (<var>description</var>, <var>filter</var>) to <var>accepts options</var>.</p>
      </ol>
     <li data-md>
      <p>If either <var>accepts options</var> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">empty</a>,
or <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-excludeacceptalloption" id="ref-for-dom-filepickeroptions-excludeacceptalloption②">excludeAcceptAllOption</a></code>"] is <code>false</code>:</p>
      <ol>
       <li data-md>
        <p>Let <var>description</var> be a user understandable string describing "all files".</p>
        <ol>
         <li data-md>
          <p>Let <var>filter</var> be an algorithm that returns <code>true</code>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">Append</a> (<var>description</var>, <var>filter</var>) to <var>accepts options</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>If <var>accepts options</var> is empty, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑥">throw</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code>.</p>
     <li data-md>
      <p>Return <var>accepts options</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="validate a suffix">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="validate-a-suffix">validate a suffix</dfn> <var>suffix</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>If <var>suffix</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-starts-with" id="ref-for-string-starts-with">start with</a> ".", then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑦">throw</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>suffix</var> contains any <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-point" id="ref-for-code-point①">code points</a> that are not <a data-link-type="dfn" href="#valid-suffix-code-point" id="ref-for-valid-suffix-code-point①">valid suffix code points</a>, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑧">throw</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>suffix</var> ends with ".", then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑨">throw</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>suffix</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length">length</a> is more than 16, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw①⓪">throw</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥">TypeError</a></code>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="3.2.2" id="api-filepickeroptions-starting-directory"><span class="secno">3.2.2. </span><span class="content">Starting Directory</span><a class="self-link" href="#api-filepickeroptions-starting-directory"></a></h4>
   <div class="note domintro" role="note">
     The <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id">id</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-startin" id="ref-for-dom-filepickeroptions-startin">startIn</a></code> fields can be specified to suggest
the directory in which the file picker opens. 
    <p>If neither of these options are specified, the user agent remembers the last directory a file
or directory was picked from, and new pickers will start out in that directory. By specifying an <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id①">id</a></code> the user agent can remember different directories for different IDs
(user agents will only remember directories for a limited number of IDs).</p>
<pre class="example highlight" id="filepickeroptions-starting-directory-example1"><a class="self-link" href="#filepickeroptions-starting-directory-example1"></a><c- c1>// If a mapping exists from this ID to a previousy picked directory, start in</c->
<c- c1>// this directory. Otherwise, a mapping will be created from this ID to the</c->
<c- c1>// directory of the resulting file picker invocation.</c->
<c- a>const</c-> options <c- o>=</c-> <c- p>{</c->
  <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id②">id</a></code><c- o>:</c-> <c- t>'foo'</c-><c- p>,</c->
<c- p>};</c->
</pre>
    <p>Specifying <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-startin" id="ref-for-dom-filepickeroptions-startin①">startIn</a></code> as a <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#filesystemfilehandle" id="ref-for-filesystemfilehandle②">FileSystemFileHandle</a></code> will result in the dialog
starting in the parent directory of that file, while passing in a <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle①">FileSystemDirectoryHandle</a></code> will result in the dialog to start in the passed in directory. These take precedence even if
an explicit <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id③">id</a></code> is also passed in.</p>
    <p>For example, given a <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle②">FileSystemDirectoryHandle</a></code> <var>project_dir</var>, the following will show
a file picker that starts out in that directory:</p>
<pre class="example highlight" id="filepickeroptions-starting-directory-example2"><a class="self-link" href="#filepickeroptions-starting-directory-example2"></a><c- c1>// The picker will open to the directory of |project_dir| regardless of whether</c->
<c- c1>// 'foo' has a valid mapping.</c->
<c- a>const</c-> options <c- o>=</c-> <c- p>{</c->
  <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id④">id</a></code><c- o>:</c-> <c- t>'foo'</c-><c- p>,</c->
  <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-startin" id="ref-for-dom-filepickeroptions-startin②">startIn</a></code><c- o>:</c-> <c- o>|</c->project_dir<c- o>|</c-><c- p>,</c->
<c- p>};</c->
</pre>
    <p>The <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id⑤">id</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-startin" id="ref-for-dom-filepickeroptions-startin③">startIn</a></code> fields control only
the directory the picker opens to. In the above example, it cannot be assumed that
the <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id⑥">id</a></code> 'foo' will map to the same directory as <var>project_dir</var> once the file picker operation has completed.</p>
    <p>Specifying <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-startin" id="ref-for-dom-filepickeroptions-startin④">startIn</a></code> as a <code class="idl"><a data-link-type="idl" href="#enumdef-wellknowndirectory" id="ref-for-enumdef-wellknowndirectory②">WellKnownDirectory</a></code> will result in the dialog
starting in that directory, unless an explicit <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id⑦">id</a></code> was also passed
in which has a mapping to a valid directory.</p>
    <p>Below is an example of specifying both an <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id⑧">id</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-startin" id="ref-for-dom-filepickeroptions-startin⑤">startIn</a></code> as a <code class="idl"><a data-link-type="idl" href="#enumdef-wellknowndirectory" id="ref-for-enumdef-wellknowndirectory③">WellKnownDirectory</a></code>. If there is an existing
mapping from the given ID to a path, this mapping is used. Otherwise, the path suggested
via the <code class="idl"><a data-link-type="idl" href="#enumdef-wellknowndirectory" id="ref-for-enumdef-wellknowndirectory④">WellKnownDirectory</a></code> is used.</p>
<pre class="example highlight" id="filepickeroptions-starting-directory-example3"><a class="self-link" href="#filepickeroptions-starting-directory-example3"></a><c- c1>// First time specifying the ID 'foo'. It is not mapped to a directory.</c->
<c- c1>// The file picker will fall back to opening to the Downloads directory. TODO: link this.</c->
<c- a>const</c-> options <c- o>=</c-> <c- p>{</c->
  <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id⑨">id</a></code><c- o>:</c-> <c- t>'foo'</c-><c- p>,</c->  <c- c1>// Unmapped.</c->
  <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-startin" id="ref-for-dom-filepickeroptions-startin⑥">startIn</a></code><c- o>:</c-> <c- u>"</c-><code class="idl"><a data-link-type="idl" href="#dom-wellknowndirectory-downloads" id="ref-for-dom-wellknowndirectory-downloads①"><c- u>downloads</c-></a></code><c- u>"</c-><c- p>,</c->  <c- c1>// Start here.</c->
<c- p>};</c->

<c- c1>// Later...</c->

<c- c1>// The ID 'foo' might or might not be mapped. For example, the mapping for this ID</c->
<c- c1>// might have been evicted.</c->
<c- a>const</c-> options <c- o>=</c-> <c- p>{</c->
  <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id①⓪">id</a></code><c- o>:</c-> <c- t>'foo'</c-><c- p>,</c->  <c- c1>// Maybe mapped. If so, start here.</c->
  <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-startin" id="ref-for-dom-filepickeroptions-startin⑦">startIn</a></code><c- o>:</c-> <c- u>"</c-><code class="idl"><a data-link-type="idl" href="#dom-wellknowndirectory-downloads" id="ref-for-dom-wellknowndirectory-downloads②"><c- u>downloads</c-></a></code><c- u>"</c-><c- p>,</c->  <c- c1>// Otherwise, start here.</c->
<c- p>};</c->
</pre>
   </div>
   <p><strong class="advisement"> The <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-startin" id="ref-for-dom-filepickeroptions-startin⑧">startIn</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id①①">id</a></code> options were first introduced in Chrome 91.</strong></p>
   <p>A user agent holds a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="recently-picked-directory-map">recently picked directory map</dfn>, which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">map</a> of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin">origins</a> to <a data-link-type="dfn" href="#path-id-map" id="ref-for-path-id-map">path id maps</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="path-id-map">path id map</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①">map</a> of <a data-link-type="dfn" href="#valid-path-id" id="ref-for-valid-path-id">valid path ids</a> to paths.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="valid-path-id">valid path id</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①">string</a> where each character is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-alphanumeric" id="ref-for-ascii-alphanumeric①">ASCII alphanumeric</a> or "_" or "-".</p>
   <p>To prevent a <a data-link-type="dfn" href="#path-id-map" id="ref-for-path-id-map①">path id map</a> from growing without a bound, user agents should implement
some mechanism to limit how many recently picked directories will be remembered. This
can for example be done by evicting least recently used entries.
User agents should allow at least 16 entries to be stored in a <a data-link-type="dfn" href="#path-id-map" id="ref-for-path-id-map②">path id map</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-wellknowndirectory"><code>WellKnownDirectory</code></dfn> enum lets a website pick one of several well-known
directories. The exact paths the various values of this enum map to is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined">implementation-defined</a> (and in some cases these might not even represent actual paths on disk).
The following list describes the meaning of each of the values, and gives possible example paths on different operating systems:</p>
   <dl>
    <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="WellKnownDirectory" data-dfn-type="enum-value" data-export id="dom-wellknowndirectory-desktop"><code>"desktop"</code></dfn>
    <dd data-md>
     <p>The user’s Desktop directory, if such a thing exists. For example this could be <code>C:\Documents and Settings\username\Desktop</code>, <code>/Users/username/Desktop</code>, or <code>/home/username/Desktop</code>.</p>
    <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="WellKnownDirectory" data-dfn-type="enum-value" data-export id="dom-wellknowndirectory-documents"><code>"documents"</code></dfn>
    <dd data-md>
     <p>Directory in which documents created by the user would typically be stored.
 For example <code>C:\Documents and Settings\username\My Documents</code>, <code>/Users/username/Documents</code>, or <code>/home/username/Documents</code>.</p>
    <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="WellKnownDirectory" data-dfn-type="enum-value" data-export id="dom-wellknowndirectory-downloads"><code>"downloads"</code></dfn>
    <dd data-md>
     <p>Directory where downloaded files would typically be stored.
 For example <code>C:\Documents and Settings\username\Downloads</code>, <code>/Users/username/Downloads</code>, or <code>/home/username/Downloads</code>.</p>
    <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="WellKnownDirectory" data-dfn-type="enum-value" data-export id="dom-wellknowndirectory-music"><code>"music"</code></dfn>
    <dd data-md>
     <p>Directory where audio files would typically be stored.
 For example <code>C:\Documents and Settings\username\My Documents\My Music</code>, <code>/Users/username/Music</code>, or <code>/home/username/Music</code>.</p>
    <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="WellKnownDirectory" data-dfn-type="enum-value" data-export id="dom-wellknowndirectory-pictures"><code>"pictures"</code></dfn>
    <dd data-md>
     <p>Directory where photos and other still images would typically be stored.
 For example <code>C:\Documents and Settings\username\My Documents\My Pictures</code>, <code>/Users/username/Pictures</code>, or <code>/home/username/Pictures</code>.</p>
    <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="WellKnownDirectory" data-dfn-type="enum-value" data-export id="dom-wellknowndirectory-videos"><code>"videos"</code></dfn>
    <dd data-md>
     <p>Directory where videos/movies would typically be stored.
 For example <code>C:\Documents and Settings\username\My Documents\My Videos</code>, <code>/Users/username/Movies</code>, or <code>/home/username/Videos</code>.</p>
    </dd>
    <div class="algorithm" data-algorithm="determine the directory the picker will start in">
      To <dfn class="dfn-paneled" data-dfn-for="WellKnownDirectory" data-dfn-type="dfn" data-noexport id="wellknowndirectory-determine-the-directory-the-picker-will-start-in">determine the directory the picker will start in</dfn>, given an optional <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string②">string</a> <var>id</var>,
an optional <code class="idl"><a data-link-type="idl" href="#typedefdef-startindirectory" id="ref-for-typedefdef-startindirectory②">StartInDirectory</a></code> <var>startIn</var> and an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object">environment settings object</a> <var>environment</var>,
run the following steps: 
     <ol>
      <li data-md>
       <p>If <var>id</var> given, and is not a <a data-link-type="dfn" href="#valid-path-id" id="ref-for-valid-path-id①">valid path id</a>, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw①①">throw</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦">TypeError</a></code>.</p>
      <li data-md>
       <p>If <var>id</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length①">length</a> is more than 32, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw①②">throw</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧">TypeError</a></code>.</p>
      <li data-md>
       <p>Let <var>origin</var> be <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin③">origin</a>.</p>
      <li data-md>
       <p>If <var>startIn</var> is a <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#filesystemhandle" id="ref-for-filesystemhandle⑥">FileSystemHandle</a></code> and <var>startIn</var> is not <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#filesystemhandle-is-in-a-bucket-file-system" id="ref-for-filesystemhandle-is-in-a-bucket-file-system">in a bucket file system</a>:</p>
       <ol>
        <li data-md>
         <p>Let <var>entry</var> be the result of <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#locating-an-entry" id="ref-for-locating-an-entry">locating an entry</a> given <var>startIn</var>’s <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#filesystemhandle-locator" id="ref-for-filesystemhandle-locator">locator</a>.</p>
        <li data-md>
         <p>If <var>entry</var> is a <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#file" id="ref-for-file">file entry</a>, return the path of <var>entry</var>’s <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#entry-parent" id="ref-for-entry-parent②">parent</a> in the local file system.</p>
        <li data-md>
         <p>If <var>entry</var> is a <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#directory" id="ref-for-directory">directory entry</a>, return <var>entry</var>’s path in the local file system.</p>
       </ol>
      <li data-md>
       <p>If <var>id</var> is non-empty:</p>
       <ol>
        <li data-md>
         <p>If <a data-link-type="dfn" href="#recently-picked-directory-map" id="ref-for-recently-picked-directory-map">recently picked directory map</a>[<var>origin</var>] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">exists</a>:</p>
         <ol>
          <li data-md>
           <p>Let <var>path map</var> be <a data-link-type="dfn" href="#recently-picked-directory-map" id="ref-for-recently-picked-directory-map①">recently picked directory map</a>[<var>origin</var>].</p>
          <li data-md>
           <p>If <var>path map</var>[<var>id</var>] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①">exists</a>, then return <var>path map</var>[<var>id</var>].</p>
         </ol>
       </ol>
      <li data-md>
       <p>If <var>startIn</var> is a <code class="idl"><a data-link-type="idl" href="#enumdef-wellknowndirectory" id="ref-for-enumdef-wellknowndirectory⑤">WellKnownDirectory</a></code>:</p>
       <ol>
        <li data-md>
         <p>Return a user agent defined path corresponding to the <code class="idl"><a data-link-type="idl" href="#enumdef-wellknowndirectory" id="ref-for-enumdef-wellknowndirectory⑥">WellKnownDirectory</a></code> value of <var>startIn</var>.</p>
       </ol>
      <li data-md>
       <p>If <var>id</var> is not specified, or is an empty string:</p>
       <ol>
        <li data-md>
         <p>If <a data-link-type="dfn" href="#recently-picked-directory-map" id="ref-for-recently-picked-directory-map②">recently picked directory map</a>[<var>origin</var>] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②">exists</a>:</p>
         <ol>
          <li data-md>
           <p>Let <var>path map</var> be <a data-link-type="dfn" href="#recently-picked-directory-map" id="ref-for-recently-picked-directory-map③">recently picked directory map</a>[<var>origin</var>].</p>
          <li data-md>
           <p>If <var>path map</var>[""] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists③">exists</a>, then return <var>path map</var>[""].</p>
         </ol>
       </ol>
      <li data-md>
       <p>Return a default path in a user agent specific manner.</p>
     </ol>
    </div>
    <div class="algorithm" data-algorithm="remember a picked directory">
      To <dfn class="dfn-paneled" data-dfn-for="WellKnownDirectory" data-dfn-type="dfn" data-noexport id="wellknowndirectory-remember-a-picked-directory">remember a picked directory</dfn>, given an optional <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string③">string</a> <var>id</var>,
a <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#entry" id="ref-for-entry①">file system entry</a> <var>entry</var>, and an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①">environment settings object</a> <var>environment</var>,
run the following steps: 
     <ol>
      <li data-md>
       <p>Let <var>origin</var> be <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin④">origin</a>.</p>
      <li data-md>
       <p>If <a data-link-type="dfn" href="#recently-picked-directory-map" id="ref-for-recently-picked-directory-map④">recently picked directory map</a>[<var>origin</var>] does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists④">exist</a>,
 then set <a data-link-type="dfn" href="#recently-picked-directory-map" id="ref-for-recently-picked-directory-map⑤">recently picked directory map</a>[<var>origin</var>] to an empty <a data-link-type="dfn" href="#path-id-map" id="ref-for-path-id-map③">path id map</a>.</p>
      <li data-md>
       <p>If <var>id</var> is not specified, let <var>id</var> be an empty string.</p>
      <li data-md>
       <p>Set <a data-link-type="dfn" href="#recently-picked-directory-map" id="ref-for-recently-picked-directory-map⑥">recently picked directory map</a>[<var>origin</var>][<var>id</var>] to the path on the local file system corresponding to <var>entry</var>,
 if such a path can be determined.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="3.3" id="api-showopenfilepicker"><span class="secno">3.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker③">showOpenFilePicker()</a></code> method</span><a class="self-link" href="#api-showopenfilepicker"></a></h3>
    <div class="note domintro" role="note">
     <dt data-md>[ <var>handle</var> ] = await window . <code class="idl"><a data-link-type="idl" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker④">showOpenFilePicker()</a></code>
     <dt data-md>[ <var>handle</var> ] = await window . <code class="idl"><a data-link-type="idl" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker⑤">showOpenFilePicker</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-openfilepickeroptions-multiple" id="ref-for-dom-openfilepickeroptions-multiple">multiple</a></code>: false })
     <dd data-md>
      <p>Shows a file picker that lets a user select a single existing file, returning a handle for
the selected file.</p>
     <dt data-md>handles = await window . <code class="idl"><a data-link-type="idl" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker⑥">showOpenFilePicker</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-openfilepickeroptions-multiple" id="ref-for-dom-openfilepickeroptions-multiple①">multiple</a></code>: true })
     <dd data-md>
      <p>Shows a file picker that lets a user select multiple existing files, returning handles for
the selected files.</p>
      <p>Additional options can be passed to <code class="idl"><a data-link-type="idl" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker⑦">showOpenFilePicker()</a></code> to indicate the types of files
the website wants the user to select and the directory in which the
file picker will open. See <a href="#api-filepickeroptions">§ 3.2 File picker options</a> for details.</p>
    </div>
    <div class="algorithm" data-algorithm="showOpenFilePicker(options)" data-algorithm-for="Window">
      The <dfn class="dfn-paneled idl-code" data-dfn-for="Window" data-dfn-type="method" data-export data-lt="showOpenFilePicker(options)|showOpenFilePicker()" id="dom-window-showopenfilepicker"><code>showOpenFilePicker(<var>options</var>)</code></dfn> method, when invoked, must run
these steps: 
     <ol>
      <li data-md>
       <p>Let <var>environment</var> be <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②">this</a></b>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①">relevant settings object</a>.</p>
      <li data-md>
       <p>Let <var>accepts options</var> be the result of <a data-link-type="dfn" href="#process-accept-types" id="ref-for-process-accept-types">processing accept types</a> given <var>options</var>.</p>
      <li data-md>
       <p>Let <var>starting directory</var> be the result of <a data-link-type="dfn" href="#wellknowndirectory-determine-the-directory-the-picker-will-start-in" id="ref-for-wellknowndirectory-determine-the-directory-the-picker-will-start-in">determining the directory the picker will start in</a> given <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id①②">id</a></code>"], <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-startin" id="ref-for-dom-filepickeroptions-startin⑨">startIn</a></code>"], and <var>environment</var>.</p>
      <li data-md>
       <p>Let <var>global</var> be <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global②">global object</a>.</p>
      <li data-md>
       <p>Verify that <var>environment</var> <a data-link-type="dfn" href="#is-allowed-to-show-a-file-picker" id="ref-for-is-allowed-to-show-a-file-picker">is allowed to show a file picker</a>.</p>
      <li data-md>
       <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise②">a new promise</a>.</p>
      <li data-md>
       <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel②">in parallel</a>:</p>
       <ol>
        <li data-md>
         <p>Optionally, wait until any prior execution of this algorithm has terminated.</p>
        <li data-md>
         <p>Display a prompt to the user requesting that the user pick some files.
 If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-openfilepickeroptions-multiple" id="ref-for-dom-openfilepickeroptions-multiple②">multiple</a></code>"] is false,
 there must be no more than one file selected;
 otherwise any number may be selected.</p>
         <p>The displayed prompt should let the user pick one of the <var>accepts options</var> to filter the list of displayed files.
 Exactly how this is implemented, and what this prompt looks like is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined①">implementation-defined</a>.</p>
         <p>When possible, this prompt should start out showing <var>starting directory</var>.</p>
        <li data-md>
         <p>Wait for the user to have made their selection.</p>
        <li data-md>
         <p>If the user dismissed the prompt without making a selection, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①">reject</a> <var>p</var> with an "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror">AbortError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑥">DOMException</a></code> and abort.</p>
        <li data-md>
         <p>Let <var>entries</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a> of <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#file" id="ref-for-file①">file entries</a> representing the selected files or directories.</p>
        <li data-md>
         <p>Let <var>result</var> be a empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a>.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate③">For each</a> <var>entry</var> of <var>entries</var>:</p>
         <ol>
          <li data-md>
           <p>If <var>entry</var> is deemed <a data-link-type="dfn" href="#wellknowndirectory-too-sensitive-or-dangerous" id="ref-for-wellknowndirectory-too-sensitive-or-dangerous">too sensitive or dangerous</a> to be exposed to this website by the user agent:</p>
           <ol>
            <li data-md>
             <p>Inform the user that the selected files or directories can’t be exposed to this website.</p>
            <li data-md>
             <p>At the discretion of the user agent,
 either go back to the beginning of these <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel③">in parallel</a> steps,
 or <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②">reject</a> <var>p</var> with an "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror①">AbortError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑦">DOMException</a></code> and abort.</p>
           </ol>
          <li data-md>
           <p>Add a new <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#filesystemfilehandle" id="ref-for-filesystemfilehandle③">FileSystemFileHandle</a></code> associated with <var>entry</var> to <var>result</var>.</p>
         </ol>
        <li data-md>
         <p><a data-link-type="dfn" href="#wellknowndirectory-remember-a-picked-directory" id="ref-for-wellknowndirectory-remember-a-picked-directory">Remember a picked directory</a> given <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id①③">id</a></code>"], <var>entries</var>[0] and <var>environment</var>.</p>
        <li data-md>
         <p>Perform the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#activation-notification" id="ref-for-activation-notification">activation notification</a> steps in <var>global</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc">browsing context</a>.</p>
         <p class="note" role="note"><span class="marker">Note:</span> This lets a website immediately perform operations on the returned handles that
 might require user activation, such as requesting more permissions.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②">Resolve</a> <var>p</var> with <var>result</var>.</p>
       </ol>
      <li data-md>
       <p>Return <var>p</var>.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="3.4" id="api-showsavefilepicker"><span class="secno">3.4. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker④">showSaveFilePicker()</a></code> method</span><a class="self-link" href="#api-showsavefilepicker"></a></h3>
    <div class="note domintro" role="note">
     <dt data-md><var>handle</var> = await window . <code class="idl"><a data-link-type="idl" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker⑤">showSaveFilePicker</a></code>( <var>options</var> )
     <dd data-md>
      <p>Shows a file picker that lets a user select a single file, returning a handle for
the selected file. The selected file does not have to exist already. If the selected
file does not exist a new empty file is created before this method returns, otherwise
the existing file is cleared before this method returned.</p>
     <dt data-md><var>handle</var> = await window . <code class="idl"><a data-link-type="idl" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker⑥">showSaveFilePicker</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-savefilepickeroptions-suggestedname" id="ref-for-dom-savefilepickeroptions-suggestedname">suggestedName</a></code>: "README.md" })
     <dd data-md>
      <p>Shows a file picker with the suggested "README.md" file name pre-filled as the default file name to save as.</p>
      <p>Additional <var>options</var> can be passed to <code class="idl"><a data-link-type="idl" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker⑦">showSaveFilePicker()</a></code> to indicate the types of files
the website wants the user to select and the directory in which the
file picker will open. See <a href="#api-filepickeroptions">§ 3.2 File picker options</a> for details.</p>
    </div>
    <p><strong class="advisement"> The <code class="idl"><a data-link-type="idl" href="#dom-savefilepickeroptions-suggestedname" id="ref-for-dom-savefilepickeroptions-suggestedname①">suggestedName</a></code> option was first introduced in Chrome 91.</strong></p>
    <div class="algorithm" data-algorithm="showSaveFilePicker(options)" data-algorithm-for="Window">
      The <dfn class="dfn-paneled idl-code" data-dfn-for="Window" data-dfn-type="method" data-export data-lt="showSaveFilePicker(options)|showSaveFilePicker()" id="dom-window-showsavefilepicker"><code>showSaveFilePicker(<var>options</var>)</code></dfn> method, when invoked, must run
these steps: 
     <ol>
      <li data-md>
       <p>Let <var>environment</var> be <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③">this</a></b>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object②">relevant settings object</a>.</p>
      <li data-md>
       <p>Let <var>accepts options</var> be the result of <a data-link-type="dfn" href="#process-accept-types" id="ref-for-process-accept-types①">processing accept types</a> given <var>options</var>.</p>
      <li data-md>
       <p>Let <var>starting directory</var> be the result of <a data-link-type="dfn" href="#wellknowndirectory-determine-the-directory-the-picker-will-start-in" id="ref-for-wellknowndirectory-determine-the-directory-the-picker-will-start-in①">determining the directory the picker will start in</a> given <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id①④">id</a></code>"], <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-startin" id="ref-for-dom-filepickeroptions-startin①⓪">startIn</a></code>"] and <var>environment</var>.</p>
      <li data-md>
       <p>Let <var>global</var> be <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global③">global object</a>.</p>
      <li data-md>
       <p>Verify that <var>environment</var> <a data-link-type="dfn" href="#is-allowed-to-show-a-file-picker" id="ref-for-is-allowed-to-show-a-file-picker①">is allowed to show a file picker</a>.</p>
      <li data-md>
       <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise③">a new promise</a>.</p>
      <li data-md>
       <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel④">in parallel</a>:</p>
       <ol>
        <li data-md>
         <p>Optionally, wait until any prior execution of this algorithm has terminated.</p>
        <li data-md>
         <p>Display a prompt to the user requesting that the user pick exactly one file.
 The displayed prompt should let the user pick one of the <var>accepts options</var> to filter the list of displayed files.
 Exactly how this is implemented, and what this prompt looks like is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined②">implementation-defined</a>.
 If <var>accepts options</var> are displayed in the UI, the selected option should also be used to suggest an extension
 to append to a user provided file name, but this is not required. In particular user agents are free to ignore
 potentially dangerous suffixes such as those ending in <code>".lnk"</code> or <code>".local"</code>.</p>
         <p>When possible, this prompt should start out showing <var>starting directory</var>.</p>
         <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-savefilepickeroptions-suggestedname" id="ref-for-dom-savefilepickeroptions-suggestedname②">suggestedName</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑤">exists</a> and
 is not null, the file picker prompt will be pre-filled with the <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-savefilepickeroptions-suggestedname" id="ref-for-dom-savefilepickeroptions-suggestedname③">suggestedName</a></code>"] as the default name
 to save as. The interaction between the <code class="idl"><a data-link-type="idl" href="#dom-savefilepickeroptions-suggestedname" id="ref-for-dom-savefilepickeroptions-suggestedname④">suggestedName</a></code> and <var>accepts options</var> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined③">implementation-defined</a>.
 If the <code class="idl"><a data-link-type="idl" href="#dom-savefilepickeroptions-suggestedname" id="ref-for-dom-savefilepickeroptions-suggestedname⑤">suggestedName</a></code> is deemed too dangerous, user agents should ignore or sanitize the
 suggested file name, similar to the sanitization done when fetching something <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#as-a-download" id="ref-for-as-a-download">as a download</a>.</p>
         <p class="note" role="note"><span class="marker">Note:</span> A user agent could for example pick whichever option in <var>accepts options</var> that matches <code class="idl"><a data-link-type="idl" href="#dom-savefilepickeroptions-suggestedname" id="ref-for-dom-savefilepickeroptions-suggestedname⑥">suggestedName</a></code> as the default filter.</p>
        <li data-md>
         <p>Wait for the user to have made their selection.</p>
        <li data-md>
         <p>If the user dismissed the prompt without making a selection, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject③">reject</a> <var>p</var> with an "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror②">AbortError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑧">DOMException</a></code> and abort.</p>
        <li data-md>
         <p>Let <var>entry</var> be a <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#file" id="ref-for-file②">file entry</a> representing the selected file.</p>
        <li data-md>
         <p>If <var>entry</var> is deemed <a data-link-type="dfn" href="#wellknowndirectory-too-sensitive-or-dangerous" id="ref-for-wellknowndirectory-too-sensitive-or-dangerous①">too sensitive or dangerous</a> to be exposed to this website by the user agent:</p>
         <ol>
          <li data-md>
           <p>Inform the user that the selected files or directories can’t be exposed to this website.</p>
          <li data-md>
           <p>At the discretion of the user agent,
 either go back to the beginning of these <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑤">in parallel</a> steps,
 or <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject④">reject</a> <var>p</var> with an "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror③">AbortError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑨">DOMException</a></code> and abort.</p>
         </ol>
        <li data-md>
         <p>Set <var>entry</var>’s <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#file-entry-binary-data" id="ref-for-file-entry-binary-data">binary data</a> to an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence">byte sequence</a>.</p>
        <li data-md>
         <p>Set <var>result</var> to a new <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#filesystemfilehandle" id="ref-for-filesystemfilehandle④">FileSystemFileHandle</a></code> associated with <var>entry</var>.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="#wellknowndirectory-remember-a-picked-directory" id="ref-for-wellknowndirectory-remember-a-picked-directory①">Remember a picked directory</a> given <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id①⑤">id</a></code>"], <var>entry</var> and <var>environment</var>.</p>
        <li data-md>
         <p>Perform the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#activation-notification" id="ref-for-activation-notification①">activation notification</a> steps in <var>global</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc①">browsing context</a>.</p>
         <p class="note" role="note"><span class="marker">Note:</span> This lets a website immediately perform operations on the returned handles that
 might require user activation, such as requesting more permissions.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve③">Resolve</a> <var>p</var> with <var>result</var>.</p>
       </ol>
      <li data-md>
       <p>Return <var>p</var>.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="3.5" id="api-showdirectorypicker"><span class="secno">3.5. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-window-showdirectorypicker" id="ref-for-dom-window-showdirectorypicker②">showDirectoryPicker()</a></code> method</span><a class="self-link" href="#api-showdirectorypicker"></a></h3>
    <div class="note domintro" role="note">
     <dt data-md><var>handle</var> = await window . <code class="idl"><a data-link-type="idl" href="#dom-window-showdirectorypicker" id="ref-for-dom-window-showdirectorypicker③">showDirectoryPicker()</a></code>
     <dt data-md><var>handle</var> = await window . <code class="idl"><a data-link-type="idl" href="#dom-window-showdirectorypicker" id="ref-for-dom-window-showdirectorypicker④">showDirectoryPicker()</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-directorypickeroptions-mode" id="ref-for-dom-directorypickeroptions-mode">mode</a></code>: 'read' })
     <dd data-md>
      <p>Shows a directory picker that lets the user select a single directory, returning a handle for
the selected directory if the user grants read permission.</p>
     <dt data-md><var>handle</var> = await window . <code class="idl"><a data-link-type="idl" href="#dom-window-showdirectorypicker" id="ref-for-dom-window-showdirectorypicker⑤">showDirectoryPicker()</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-directorypickeroptions-mode" id="ref-for-dom-directorypickeroptions-mode①">mode</a></code>: 'readwrite' })
     <dd data-md>
      <p>Shows a directory picker that lets the user select a single directory, returning a handle for
the selected directory. The user agent can combine read and write permission requests on this handle into
one subsequent prompt.</p>
     </dd>
     <p>The <code class="idl"><a data-link-type="idl" href="#dom-directorypickeroptions-id" id="ref-for-dom-directorypickeroptions-id">id</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-directorypickeroptions-startin" id="ref-for-dom-directorypickeroptions-startin">startIn</a></code> fields behave
  identically to the <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-id" id="ref-for-dom-filepickeroptions-id①⑥">id</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-startin" id="ref-for-dom-filepickeroptions-startin①①">startIn</a></code> fields, respectively.
  See <a href="#api-filepickeroptions-starting-directory">§ 3.2.2 Starting Directory</a> for details on how to use these fields.</p>
    </div>
    <div class="algorithm" data-algorithm="showDirectoryPicker(options)" data-algorithm-for="Window">
      The <dfn class="dfn-paneled idl-code" data-dfn-for="Window" data-dfn-type="method" data-export data-lt="showDirectoryPicker(options)|showDirectoryPicker()" id="dom-window-showdirectorypicker"><code>showDirectoryPicker(<var>options</var>)</code></dfn> method, when invoked, must run
these steps: 
     <ol>
      <li data-md>
       <p>Let <var>environment</var> be <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a></b>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object③">relevant settings object</a>.</p>
      <li data-md>
       <p>Let <var>starting directory</var> be the result of <a data-link-type="dfn" href="#wellknowndirectory-determine-the-directory-the-picker-will-start-in" id="ref-for-wellknowndirectory-determine-the-directory-the-picker-will-start-in②">determining the directory the picker will start in</a> given <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-directorypickeroptions-id" id="ref-for-dom-directorypickeroptions-id①">id</a></code>"], <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-directorypickeroptions-startin" id="ref-for-dom-directorypickeroptions-startin①">startIn</a></code>"] and <var>environment</var>.</p>
      <li data-md>
       <p>Let <var>global</var> be <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global④">global object</a>.</p>
      <li data-md>
       <p>Verify that <var>environment</var> <a data-link-type="dfn" href="#is-allowed-to-show-a-file-picker" id="ref-for-is-allowed-to-show-a-file-picker②">is allowed to show a file picker</a>.</p>
      <li data-md>
       <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise④">a new promise</a>.</p>
      <li data-md>
       <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑥">in parallel</a>:</p>
       <ol>
        <li data-md>
         <p>Optionally, wait until any prior execution of this algorithm has terminated.</p>
        <li data-md>
         <p>Display a prompt to the user requesting that the user pick a directory.</p>
         <p>When possible, this prompt should start out showing <var>starting directory</var>.</p>
        <li data-md>
         <p>Wait for the user to have made their selection.</p>
        <li data-md>
         <p>If the user dismissed the prompt without making a selection, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑤">reject</a> <var>p</var> with an "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror④">AbortError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①⓪">DOMException</a></code> and abort.</p>
        <li data-md>
         <p>Let <var>entry</var> be a <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#directory" id="ref-for-directory①">directory entry</a> representing the selected directory.</p>
        <li data-md>
         <p>If <var>entry</var> is deemed <a data-link-type="dfn" href="#wellknowndirectory-too-sensitive-or-dangerous" id="ref-for-wellknowndirectory-too-sensitive-or-dangerous②">too sensitive or dangerous</a> to be exposed to this website by the user agent:</p>
         <ol>
          <li data-md>
           <p>Inform the user that the selected files or directories can’t be exposed to this website.</p>
          <li data-md>
           <p>At the discretion of the user agent,
 either go back to the beginning of these <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑦">in parallel</a> steps,
 or <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑥">reject</a> <var>p</var> with an "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror⑤">AbortError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①①">DOMException</a></code> and abort.</p>
         </ol>
        <li data-md>
         <p>Set <var>result</var> to a new <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle③">FileSystemDirectoryHandle</a></code> associated with <var>entry</var>.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="#wellknowndirectory-remember-a-picked-directory" id="ref-for-wellknowndirectory-remember-a-picked-directory②">Remember a picked directory</a> given <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-directorypickeroptions-id" id="ref-for-dom-directorypickeroptions-id②">id</a></code>"], <var>entry</var> and <var>environment</var>.</p>
        <li data-md>
         <p>Let <var>desc</var> be a <code class="idl"><a data-link-type="idl" href="#dictdef-filesystempermissiondescriptor" id="ref-for-dictdef-filesystempermissiondescriptor⑤">FileSystemPermissionDescriptor</a></code>.</p>
        <li data-md>
         <p>Set <var>desc</var>["<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name④">name</a></code>"] to
 "<code class="idl"><a data-link-type="idl" href="#dom-permissionname-file-system" id="ref-for-dom-permissionname-file-system⑤">file-system</a></code>".</p>
        <li data-md>
         <p>Set <var>desc</var>["<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle①⓪">handle</a></code>"] to <var>result</var>.</p>
        <li data-md>
         <p>Set <var>desc</var>["<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode⑧">mode</a></code>"] to <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-directorypickeroptions-mode" id="ref-for-dom-directorypickeroptions-mode②">mode</a></code>"].</p>
        <li data-md>
         <p>Let <var>status</var> be the result of running <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-create-a-permissionstatus" id="ref-for-dfn-create-a-permissionstatus①">create a PermissionStatus</a> for <var>desc</var>.</p>
        <li data-md>
         <p>Perform the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#activation-notification" id="ref-for-activation-notification②">activation notification</a> steps in <var>global</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc②">browsing context</a>.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-request-permission-to-use" id="ref-for-dfn-request-permission-to-use①">Request permission to use</a> <var>desc</var>.</p>
        <li data-md>
         <p>Run the <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-default-permission-query-algorithm" id="ref-for-dfn-default-permission-query-algorithm②">default permission query algorithm</a> on <var>desc</var> and <var>status</var>.</p>
        <li data-md>
         <p>If <var>status</var> is not "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑤">granted</a></code>", <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑦">reject</a> <var>result</var> with a "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror⑥">AbortError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①②">DOMException</a></code> and abort.</p>
        <li data-md>
         <p>Perform the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#activation-notification" id="ref-for-activation-notification③">activation notification</a> steps in <var>global</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc③">browsing context</a>.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve④">Resolve</a> <var>p</var> with <var>result</var>.</p>
       </ol>
      <li data-md>
       <p>Return <var>p</var>.</p>
     </ol>
    </div>
    <h3 class="heading settled" data-level="3.6" id="drag-and-drop"><span class="secno">3.6. </span><span class="content">Drag and Drop</span><a class="self-link" href="#drag-and-drop"></a></h3>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/dnd.html#datatransferitem" id="ref-for-datatransferitem"><c- g>DataTransferItem</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑤"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://fs.spec.whatwg.org/#filesystemhandle" id="ref-for-filesystemhandle⑦"><c- n>FileSystemHandle</c-></a>?> <a class="idl-code" data-link-type="method" href="#dom-datatransferitem-getasfilesystemhandle" id="ref-for-dom-datatransferitem-getasfilesystemhandle"><c- g>getAsFileSystemHandle</c-></a>();
};
</pre>
    <p>During a <em>drag-and-drop operation</em>, dragged file and
directory items are associated with <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#file" id="ref-for-file③">file entries</a> and <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#directory" id="ref-for-directory②">directory entries</a> respectively.</p>
    <div class="note domintro" role="note">
     <dt data-md><var>handle</var> = await item . <code class="idl"><a data-link-type="idl" href="#dom-datatransferitem-getasfilesystemhandle" id="ref-for-dom-datatransferitem-getasfilesystemhandle①">getAsFileSystemHandle()</a></code>
     <dd data-md>
      <p>Returns a <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#filesystemfilehandle" id="ref-for-filesystemfilehandle⑤">FileSystemFileHandle</a></code> object if the dragged item is a file and a <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle④">FileSystemDirectoryHandle</a></code> object if the dragged item is a directory.</p>
    </div>
    <div class="algorithm" data-algorithm="getAsFileSystemHandle()" data-algorithm-for="DataTransferItem">
     <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="DataTransferItem" data-dfn-type="method" data-export id="dom-datatransferitem-getasfilesystemhandle"><code>getAsFileSystemHandle()</code></dfn> method steps are:</p>
     <ol>
      <li data-md>
       <p>If the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dnd.html#datatransferitem" id="ref-for-datatransferitem①">DataTransferItem</a></code> object is not in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-rw" id="ref-for-concept-dnd-rw">read/write
  mode</a> or the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-ro" id="ref-for-concept-dnd-ro">read-only mode</a>, return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-resolved-with" id="ref-for-a-promise-resolved-with">a promise resolved with</a> <code>null</code>.</p>
      <li data-md>
       <p>If the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind" id="ref-for-the-drag-data-item-kind">the drag data item kind</a> is not <em>File</em>,
  then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-resolved-with" id="ref-for-a-promise-resolved-with①">a promise resolved with</a> <code>null</code>.</p>
      <li data-md>
       <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise⑤">a new promise</a>.</p>
      <li data-md>
       <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑧">in parallel</a>:</p>
       <ol>
        <li data-md>
         <p>Let <var>entry</var> be the <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#entry" id="ref-for-entry②">file system entry</a> representing the dragged file or directory.</p>
        <li data-md>
         <p>If <var>entry</var> is a <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#file" id="ref-for-file④">file entry</a>:</p>
         <ol>
          <li data-md>
           <p>Let <var>handle</var> be a <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#filesystemfilehandle" id="ref-for-filesystemfilehandle⑥">FileSystemFileHandle</a></code> associated with <var>entry</var>.</p>
         </ol>
        <li data-md>
         <p>Else if <var>entry</var> is a <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#directory" id="ref-for-directory③">directory entry</a>:</p>
         <ol>
          <li data-md>
           <p>Let <var>handle</var> be a <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle⑤">FileSystemDirectoryHandle</a></code> associated with <var>entry</var>.</p>
         </ol>
        <li data-md>
         <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑤">Resolve</a> <var>p</var> with <var>entry</var>.</p>
       </ol>
      <li data-md>
       <p>Return <var>p</var>.</p>
     </ol>
    </div>
    <div class="example" id="draganddrop-example">
     <a class="self-link" href="#draganddrop-example"></a> Handling drag and drop of files and directories: 
<pre class="highlight">elem<c- p>.</c->addEventListener<c- p>(</c-><c- t>'dragover'</c-><c- p>,</c-> <c- p>(</c->e<c- p>)</c-> <c- p>=></c-> <c- p>{</c->
  <c- c1>// Prevent navigation.</c->
  e<c- p>.</c->preventDefault<c- p>();</c->
<c- p>});</c->

elem<c- p>.</c->addEventListener<c- p>(</c-><c- t>'drop'</c-><c- p>,</c-> <c- k>async</c-> <c- p>(</c->e<c- p>)</c-> <c- p>=></c-> <c- p>{</c->
  e<c- p>.</c->preventDefault<c- p>();</c->

  <c- a>const</c-> fileHandlesPromises <c- o>=</c-> <c- p>[...</c->e<c- p>.</c->dataTransfer<c- p>.</c->items<c- p>]</c->
    <c- p>.</c->filter<c- p>(</c->item <c- p>=></c-> item<c- p>.</c->kind <c- o>===</c-> <c- t>'file'</c-><c- p>)</c->
    <c- p>.</c->map<c- p>(</c->item <c- p>=></c-> item<c- p>.</c->getAsFileSystemHandle<c- p>());</c->

  <c- k>for</c-> <c- k>await</c-> <c- p>(</c-><c- a>const</c-> handle <c- k>of</c-> fileHandlesPromises<c- p>)</c-> <c- p>{</c->
    <c- k>if</c-> <c- p>(</c->handle<c- p>.</c->kind <c- o>===</c-> <c- t>'directory'</c-><c- p>)</c-> <c- p>{</c->
      console<c- p>.</c->log<c- p>(</c-><c- sb>`Directory: </c-><c- si>${</c->handle<c- p>.</c->name<c- si>}</c-><c- sb>`</c-><c- p>);</c->
    <c- p>}</c-> <c- k>else</c-> <c- p>{</c->
      console<c- p>.</c->log<c- p>(</c-><c- sb>`File: </c-><c- si>${</c->handle<c- p>.</c->name<c- si>}</c-><c- sb>`</c-><c- p>);</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>});</c->
</pre>
    </div>
    <p class="issue" id="issue-8306b646"><a class="self-link" href="#issue-8306b646"></a> This currently does not block access to <a data-link-type="dfn" href="#wellknowndirectory-too-sensitive-or-dangerous" id="ref-for-wellknowndirectory-too-sensitive-or-dangerous③">too sensitive or dangerous</a> directories, to
be consistent with other APIs that give access to dropped files and directories. This is inconsistent
with the <a data-link-type="dfn" href="#local-file-system-handle-factories" id="ref-for-local-file-system-handle-factories③">local file system handle factories</a> though, so we might want to reconsider this.</p>
    <h2 class="heading settled" data-level="4" id="accessibility-considerations"><span class="secno">4. </span><span class="content">Accessibility Considerations</span><a class="self-link" href="#accessibility-considerations"></a></h2>
    <p><em>This section is non-normative.</em></p>
    <p>When this specification is used to present information in the user interface,
implementors will want to follow the OS level accessibility guidelines for the platform.</p>
    <h2 class="heading settled" data-level="5" id="privacy-considerations"><span class="secno">5. </span><span class="content">Privacy Considerations</span><a class="self-link" href="#privacy-considerations"></a></h2>
    <p><em>This section is non-normative.</em></p>
    <p>This API does not give websites any more read access to data than the existing <code>&lt;input type=file></code> and <code>&lt;input type=file webkitdirectory></code> APIs already do. Furthermore similarly to those APIs, all
access to files and directories is explicitly gated behind a file or directory picker.</p>
    <p>There are however several major privacy risks with this new API:</p>
    <h3 class="heading settled" data-level="5.1" id="privacy-wide-access"><span class="secno">5.1. </span><span class="content">Users giving access to more, or more sensitive files than they intended.</span><a class="self-link" href="#privacy-wide-access"></a></h3>
    <p>This isn’t a new risk with this API, but user agents should try to make sure that users are aware
of what exactly they’re giving websites access to. This is particularly important when giving
access to a directory, where it might not be immediately clear to a user just how many files
actually exist in that directory.</p>
    <p>A related risk is having a user give access to particularly sensitive data. This
could include some of a user agent’s configuration data, network cache or cookie store,
or operating system configuration data such as password files. To protect against this, user agents
are encouraged to restrict which directories a user is allowed to select in a directory picker,
and potentially even restrict which files the user is allowed to select. This will make it much
harder to accidentally give access to a directory that contains particularly sensitive data. Care
must be taken to strike the right balance between restricting what the API can access while still
having the API be useful. After all, this API intentionally lets the user use websites to interact
with some of their most private personal data.</p>
    <p>Examples of directories that user agents might want to restrict as being <dfn class="dfn-paneled" data-dfn-for="WellKnownDirectory" data-dfn-type="dfn" data-noexport id="wellknowndirectory-too-sensitive-or-dangerous">too sensitive or dangerous</dfn> include:</p>
    <ul>
     <li data-md>
      <p>The directory or directories containing the user agent itself.</p>
     <li data-md>
      <p>Directories where the user agent stores <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#site-storage" id="ref-for-site-storage">website storage</a>.</p>
     <li data-md>
      <p>Directories containing system files (such as <code>C:\Windows</code> on Windows).</p>
     <li data-md>
      <p>Directories such as <code>/dev/</code>, <code>/sys</code>, and <code>/proc</code> on Linux that would give access to low-level devices.</p>
     <li data-md>
      <p>A user’s entire "home" directory.
Individual files and directories inside the home directory should still be allowed,
but user agents should not generally let users give blanket access to the entire directory.</p>
     <li data-md>
      <p>The default directory for downloads, if the user agent has such a thing.
Individual files inside the directory again should be allowed, but the whole directory would risk leaking more data than a user realizes.</p>
     <li data-md>
      <p>Files with names that end in <code>.lnk</code>, when selecting a file to write to. Writing to
these files on Windows is similar to creating symlinks on other operating systems,
and as such can be used to attempt to trick users into giving access to files they didn’t intend to expose.</p>
     <li data-md>
      <p>Files with names that end in <code>.local</code>, when selecting a file to write to.
Windows uses these files to decide what DLLs to load, and as such writing to
these files could be used to cause code to be executed.</p>
    </ul>
    <h3 class="heading settled" data-level="5.2" id="privacy-tracking"><span class="secno">5.2. </span><span class="content">Websites trying to use this API for tracking.</span><a class="self-link" href="#privacy-tracking"></a></h3>
    <p>This API could be used by websites to track the user across clearing browsing
data. This is because, in contrast with existing file access APIs, user agents are
able to grant persistent access to files or directories and can re-prompt. In
combination with the ability to write to files, websites will be able to persist an
identifier on the users' disk. Clearing browsing data will not affect those files
in any way, making these identifiers persist through those actions.</p>
    <p>This risk is somewhat mitigated by the fact that clearing browsing data will clear all handles
that a website had persisted (for example in IndexedDB),
so websites won’t have any handles to re-prompt for permission after browsing data was cleared.
Furthermore user agents are encouraged to make it clear what files and directories a website has
access to, and to automatically expire permission grants except for particularly well trusted
origins (for example persistent permissions could be limited to "installed" web applications).</p>
    <p>User agents also are encouraged to provide a way for users to revoke permissions granted.
Clearing browsing data is expected to revoke all permissions as well.</p>
    <h3 class="heading settled" data-level="5.3" id="privacy-third-party"><span class="secno">5.3. </span><span class="content">First-party vs third-party contexts.</span><a class="self-link" href="#privacy-third-party"></a></h3>
    <p>In third-party contexts (e.g. an iframe whose origin does not match that of the top-level frame)
websites can’t gain access to data they don’t already have access to. This includes both getting
access to new files or directories via the <a data-link-type="dfn" href="#local-file-system-handle-factories" id="ref-for-local-file-system-handle-factories④">local file system handle factories</a>, as well as requesting
more permissions to existing handles via the <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission⑦">requestPermission</a></code> API.</p>
    <p>Handles can also only be post-messaged to same-origin destinations. Attempts to send a handle to
a cross-origin destination will result in a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-messageerror" id="ref-for-event-messageerror">messageerror</a></code> event.</p>
    <h2 class="heading settled" data-level="6" id="security-considerations"><span class="secno">6. </span><span class="content">Security Considerations</span><a class="self-link" href="#security-considerations"></a></h2>
    <p><em>This section is non-normative.</em></p>
    <p>This API gives websites the ability to modify existing files on disk, as well as write to new
files. This has a couple of important security considerations:</p>
    <h3 class="heading settled" data-level="6.1" id="security-malware"><span class="secno">6.1. </span><span class="content">Malware</span><a class="self-link" href="#security-malware"></a></h3>
    <p>This API could be used by websites to try to store and/or execute malware on the users system.
To mitigate this risk, this API does not provide any way to mark files as executable (on the other
hand files that are already executable likely remain that way, even after the files are modified
through this API). Furthermore user agents are encouraged to apply things like Mark-of-the-Web to
files created or modified by this API.</p>
    <p>Finally, user agents are encouraged to verify the contents of files modified by this API via malware
scans and safe browsing checks, unless some kind of external strong trust relation already exists.
This of course has effects on the performance characteristics of this API.</p>
    <h3 class="heading settled" data-level="6.2" id="security-ransomware"><span class="secno">6.2. </span><span class="content">Ransomware attacks</span><a class="self-link" href="#security-ransomware"></a></h3>
    <p>Another risk factor is that of ransomware attacks. The limitations described above regarding
blocking access to certain sensitive directories helps limit the damage such an attack can do.
Additionally user agents can grant write access to files at whatever granularity they deem
appropriate.</p>
    <h3 class="heading settled" data-level="6.3" id="filling-up-disk"><span class="secno">6.3. </span><span class="content">Filling up a users disk</span><a class="self-link" href="#filling-up-disk"></a></h3>
    <p>Other than files in a <a data-link-type="dfn" href="https://fs.spec.whatwg.org/#origin-private-file-system" id="ref-for-origin-private-file-system②">bucket file system</a>, files written by this API are not subject
to <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota">storage quota</a>. As such websites can fill up a users disk without being limited by
quota, which could leave a users device in a bad state (do note that even with storage that is
subject to <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota①">storage quota</a> it is still possible to fill up, or come close to filling up, a users
disk, since <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota②">storage quota</a> in general is not dependent on the amount of available disk
space).</p>
    <p>Without this API websites can write data to disk not subject to quota limitations already
by triggering downloads of large files (potentially created client side, to not incur any network
overhead). While the presence of <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#dom-filesystemwritablefilestream-truncate" id="ref-for-dom-filesystemwritablefilestream-truncate">truncate()</a></code> and writing at a
potentially really large offset past the end of a file makes it much easier and lower cost to
create large files, on most file systems such files should not actually take up as much disk space as
most commonly used file systems support sparse files (and thus wouldn’t actually store the NUL
bytes generated by resizing a file or seeking past the end of it).</p>
    <p>Whatever mitigations user agents use to guard against websites filling up a disk via either
quota managed storage or the existing downloads mechanism should also be employed when websites
use this API to write to disk.</p>
   </dl>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
  </div>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-filepickeraccepttype-accept">accept</a><span>, in § 3</span>
   <li><a href="#dom-filepickeraccepttype-description">description</a><span>, in § 3</span>
   <li><a href="#dom-wellknowndirectory-desktop">"desktop"</a><span>, in § 3.2.2</span>
   <li><a href="#wellknowndirectory-determine-the-directory-the-picker-will-start-in">determine the directory the picker will start in</a><span>, in § 3.2.2</span>
   <li><a href="#dictdef-directorypickeroptions">DirectoryPickerOptions</a><span>, in § 3</span>
   <li><a href="#dom-wellknowndirectory-documents">"documents"</a><span>, in § 3.2.2</span>
   <li><a href="#dom-wellknowndirectory-downloads">"downloads"</a><span>, in § 3.2.2</span>
   <li><a href="#dom-filepickeroptions-excludeacceptalloption">excludeAcceptAllOption</a><span>, in § 3</span>
   <li><a href="#dictdef-filepickeraccepttype">FilePickerAcceptType</a><span>, in § 3</span>
   <li><a href="#dictdef-filepickeroptions">FilePickerOptions</a><span>, in § 3</span>
   <li><a href="#dom-permissionname-file-system">"file-system"</a><span>, in § 2.2</span>
   <li><a href="#dictdef-filesystemhandlepermissiondescriptor">FileSystemHandlePermissionDescriptor</a><span>, in § 2.3</span>
   <li><a href="#dictdef-filesystempermissiondescriptor">FileSystemPermissionDescriptor</a><span>, in § 2.2</span>
   <li><a href="#enumdef-filesystempermissionmode">FileSystemPermissionMode</a><span>, in § 2.2</span>
   <li><a href="#dom-datatransferitem-getasfilesystemhandle">getAsFileSystemHandle()</a><span>, in § 3.6</span>
   <li><a href="#dom-filesystempermissiondescriptor-handle">handle</a><span>, in § 2.2</span>
   <li>
    id
    <ul>
     <li><a href="#dom-directorypickeroptions-id">dict-member for DirectoryPickerOptions</a><span>, in § 3</span>
     <li><a href="#dom-filepickeroptions-id">dict-member for FilePickerOptions</a><span>, in § 3</span>
    </ul>
   <li><a href="#is-allowed-to-show-a-file-picker">is allowed to show a file picker</a><span>, in § 3.1</span>
   <li><a href="#local-file-system-handle-factories">local file system handle factories</a><span>, in § 3</span>
   <li>
    mode
    <ul>
     <li><a href="#dom-directorypickeroptions-mode">dict-member for DirectoryPickerOptions</a><span>, in § 3</span>
     <li><a href="#dom-filesystemhandlepermissiondescriptor-mode">dict-member for FileSystemHandlePermissionDescriptor</a><span>, in § 2.3</span>
     <li><a href="#dom-filesystempermissiondescriptor-mode">dict-member for FileSystemPermissionDescriptor</a><span>, in § 2.2</span>
    </ul>
   <li><a href="#dom-openfilepickeroptions-multiple">multiple</a><span>, in § 3</span>
   <li><a href="#dom-wellknowndirectory-music">"music"</a><span>, in § 3.2.2</span>
   <li><a href="#dictdef-openfilepickeroptions">OpenFilePickerOptions</a><span>, in § 3</span>
   <li><a href="#path-id-map">path id map</a><span>, in § 3.2.2</span>
   <li><a href="#dom-wellknowndirectory-pictures">"pictures"</a><span>, in § 3.2.2</span>
   <li><a href="#process-accept-types">process accept types</a><span>, in § 3.2.1</span>
   <li><a href="#querying-file-system-permission">query file system permission</a><span>, in § 2.2</span>
   <li><a href="#querying-file-system-permission">querying file system permission</a><span>, in § 2.2</span>
   <li><a href="#dom-filesystemhandle-querypermission">queryPermission()</a><span>, in § 2.3.1</span>
   <li><a href="#dom-filesystemhandle-querypermission">queryPermission(descriptor)</a><span>, in § 2.3.1</span>
   <li><a href="#dom-filesystempermissionmode-read">"read"</a><span>, in § 2.2</span>
   <li><a href="#dom-filesystempermissionmode-readwrite">"readwrite"</a><span>, in § 2.2</span>
   <li><a href="#recently-picked-directory-map">recently picked directory map</a><span>, in § 3.2.2</span>
   <li><a href="#wellknowndirectory-remember-a-picked-directory">remember a picked directory</a><span>, in § 3.2.2</span>
   <li><a href="#requesting-file-system-permission">request file system permission</a><span>, in § 2.2</span>
   <li><a href="#requesting-file-system-permission">requesting file system permission</a><span>, in § 2.2</span>
   <li><a href="#dom-filesystemhandle-requestpermission">requestPermission()</a><span>, in § 2.3.2</span>
   <li><a href="#dom-filesystemhandle-requestpermission">requestPermission(descriptor)</a><span>, in § 2.3.2</span>
   <li><a href="#dictdef-savefilepickeroptions">SaveFilePickerOptions</a><span>, in § 3</span>
   <li><a href="#dom-window-showdirectorypicker">showDirectoryPicker()</a><span>, in § 3.5</span>
   <li><a href="#dom-window-showdirectorypicker">showDirectoryPicker(options)</a><span>, in § 3.5</span>
   <li><a href="#dom-window-showopenfilepicker">showOpenFilePicker()</a><span>, in § 3.3</span>
   <li><a href="#dom-window-showopenfilepicker">showOpenFilePicker(options)</a><span>, in § 3.3</span>
   <li><a href="#dom-window-showsavefilepicker">showSaveFilePicker()</a><span>, in § 3.4</span>
   <li><a href="#dom-window-showsavefilepicker">showSaveFilePicker(options)</a><span>, in § 3.4</span>
   <li>
    startIn
    <ul>
     <li><a href="#dom-directorypickeroptions-startin">dict-member for DirectoryPickerOptions</a><span>, in § 3</span>
     <li><a href="#dom-filepickeroptions-startin">dict-member for FilePickerOptions</a><span>, in § 3</span>
    </ul>
   <li><a href="#typedefdef-startindirectory">StartInDirectory</a><span>, in § 3</span>
   <li><a href="#dom-savefilepickeroptions-suggestedname">suggestedName</a><span>, in § 3</span>
   <li><a href="#wellknowndirectory-too-sensitive-or-dangerous">too sensitive or dangerous</a><span>, in § 5.1</span>
   <li><a href="#dom-filepickeroptions-types">types</a><span>, in § 3</span>
   <li><a href="#validate-a-suffix">validate a suffix</a><span>, in § 3.2.1</span>
   <li><a href="#valid-path-id">valid path id</a><span>, in § 3.2.2</span>
   <li><a href="#valid-suffix-code-point">valid suffix code point</a><span>, in § 2.1</span>
   <li><a href="#dom-wellknowndirectory-videos">"videos"</a><span>, in § 3.2.2</span>
   <li><a href="#enumdef-wellknowndirectory">WellKnownDirectory</a><span>, in § 3.2.2</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[FS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="23e108bd">FileSystemDirectoryHandle</span>
     <li><span class="dfn-paneled" id="c551a16f">FileSystemFileHandle</span>
     <li><span class="dfn-paneled" id="cd895d76">FileSystemHandle</span>
     <li><span class="dfn-paneled" id="4e1cb6d8">binary data</span>
     <li><span class="dfn-paneled" id="2b36a48c">bucket file system</span>
     <li><span class="dfn-paneled" id="132b29a9">directory entry</span>
     <li><span class="dfn-paneled" id="229e7921">file entry</span>
     <li><span class="dfn-paneled" id="83e04685">file system entry</span>
     <li><span class="dfn-paneled" id="e2504190">is in a bucket file system</span>
     <li><span class="dfn-paneled" id="c8c03f35">locating an entry</span>
     <li><span class="dfn-paneled" id="598433c6">locator</span>
     <li><span class="dfn-paneled" id="44262c3b">parent</span>
     <li><span class="dfn-paneled" id="2becd408">truncate(size)</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="4ff66d05">DataTransferItem</span>
     <li><span class="dfn-paneled" id="eb5c4be3">Serializable</span>
     <li><span class="dfn-paneled" id="5d7209e9">Window</span>
     <li><span class="dfn-paneled" id="36d15a6d">activation notification</span>
     <li><span class="dfn-paneled" id="9329fd7b">as a download</span>
     <li><span class="dfn-paneled" id="6d88ab2e">browsing context</span>
     <li><span class="dfn-paneled" id="3e12e042">environment settings object</span>
     <li><span class="dfn-paneled" id="8a30477b">global object</span>
     <li><span class="dfn-paneled" id="a72449dd">in parallel</span>
     <li><span class="dfn-paneled" id="6b373a4a">messageerror</span>
     <li><span class="dfn-paneled" id="b01b1359">opaque origin</span>
     <li><span class="dfn-paneled" id="086e3aff">origin</span>
     <li><span class="dfn-paneled" id="43ac8374">origin <small>(for environment settings object)</small></span>
     <li><span class="dfn-paneled" id="bb0e27f7">read-only mode</span>
     <li><span class="dfn-paneled" id="9604548f">read/write mode</span>
     <li><span class="dfn-paneled" id="9c4c1e66">relevant settings object</span>
     <li><span class="dfn-paneled" id="7393da89">same origin</span>
     <li><span class="dfn-paneled" id="7e94ee2f">the drag data item kind</span>
     <li><span class="dfn-paneled" id="c63519ed">top-level origin</span>
     <li><span class="dfn-paneled" id="47fe679e">transient activation</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53275e46">append</span>
     <li><span class="dfn-paneled" id="f43d6978">ascii alphanumeric</span>
     <li><span class="dfn-paneled" id="3de9e659">byte sequence</span>
     <li><span class="dfn-paneled" id="915aff5e">code point</span>
     <li><span class="dfn-paneled" id="03afaf9c">empty</span>
     <li><span class="dfn-paneled" id="1243a891">exist</span>
     <li><span class="dfn-paneled" id="16d07e10">for each <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="45209803">for each <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="860300d4">implementation-defined</span>
     <li><span class="dfn-paneled" id="0fa357c3">length</span>
     <li><span class="dfn-paneled" id="649608b9">list</span>
     <li><span class="dfn-paneled" id="3fca5a9e">map</span>
     <li><span class="dfn-paneled" id="54627f47">starts with</span>
     <li><span class="dfn-paneled" id="0698d556">string</span>
     <li><span class="dfn-paneled" id="0e8de730">tuple</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MIMESNIFF]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="7c195f8b">essence</span>
     <li><span class="dfn-paneled" id="16785ec4">mime type</span>
     <li><span class="dfn-paneled" id="fc5a3214">parameters</span>
     <li><span class="dfn-paneled" id="d72dabca">parse a mime type</span>
     <li><span class="dfn-paneled" id="69d8b9f1">subtype</span>
     <li><span class="dfn-paneled" id="b5c41c63">type</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="ebb01253">PermissionDescriptor</span>
     <li><span class="dfn-paneled" id="6c3bee60">PermissionState</span>
     <li><span class="dfn-paneled" id="dbf8e074">PermissionStatus</span>
     <li><span class="dfn-paneled" id="113dd5ca">create a permissionstatus</span>
     <li><span class="dfn-paneled" id="1191fb01">default permission query algorithm</span>
     <li><span class="dfn-paneled" id="2cb28cb0">denied</span>
     <li><span class="dfn-paneled" id="c6ce3c60">granted</span>
     <li><span class="dfn-paneled" id="0310eecd">name</span>
     <li><span class="dfn-paneled" id="4b7ca52a">permission descriptor type</span>
     <li><span class="dfn-paneled" id="d124397f">permission state</span>
     <li><span class="dfn-paneled" id="3e7aa5da">permission state constraints</span>
     <li><span class="dfn-paneled" id="ec3886d6">permissions</span>
     <li><span class="dfn-paneled" id="6c2d7879">powerful feature</span>
     <li><span class="dfn-paneled" id="325da0f2">prompt</span>
     <li><span class="dfn-paneled" id="78f04503">query()</span>
     <li><span class="dfn-paneled" id="bcc085e3">request permission to use</span>
     <li><span class="dfn-paneled" id="620f832e">state</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS-REQUEST]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="35725f70">permission request algorithm</span>
    </ul>
   <li>
    <a data-link-type="biblio">[STORAGE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="91461e7c">storage</span>
     <li><span class="dfn-paneled" id="cac8dd86">storage quota</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d25dfb2c">AbortError</span>
     <li><span class="dfn-paneled" id="dca2de17">DOMException</span>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
     <li><span class="dfn-paneled" id="b75bb3bd">SecureContext</span>
     <li><span class="dfn-paneled" id="c3e881ef">SecurityError</span>
     <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
     <li><span class="dfn-paneled" id="b0d7f3c3">USVString</span>
     <li><span class="dfn-paneled" id="dacde8b5">a new promise</span>
     <li><span class="dfn-paneled" id="d0b4a948">a promise rejected with</span>
     <li><span class="dfn-paneled" id="8f5c2179">a promise resolved with</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="7787d359">record</span>
     <li><span class="dfn-paneled" id="b262501e">reject</span>
     <li><span class="dfn-paneled" id="3b90bdcd">resolve</span>
     <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
     <li><span class="dfn-paneled" id="4013a022">this</span>
     <li><span class="dfn-paneled" id="b4cfa5ce">throw</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-fs">[FS]
   <dd>Austin Sullivan. <a href="https://fs.spec.whatwg.org/"><cite>File System Standard</cite></a>. Living Standard. URL: <a href="https://fs.spec.whatwg.org/">https://fs.spec.whatwg.org/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-mimesniff">[MIMESNIFF]
   <dd>Gordon P. Hemsley. <a href="https://mimesniff.spec.whatwg.org/"><cite>MIME Sniffing Standard</cite></a>. Living Standard. URL: <a href="https://mimesniff.spec.whatwg.org/">https://mimesniff.spec.whatwg.org/</a>
   <dt id="biblio-permissions">[PERMISSIONS]
   <dd>Marcos Caceres; Mike Taylor. <a href="https://w3c.github.io/permissions/"><cite>Permissions</cite></a>. URL: <a href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a>
   <dt id="biblio-permissions-request">[PERMISSIONS-REQUEST]
   <dd><a href="https://wicg.github.io/permissions-request/"><cite>Requesting Permissions</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/permissions-request/">https://wicg.github.io/permissions-request/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-storage">[STORAGE]
   <dd>Anne van Kesteren. <a href="https://storage.spec.whatwg.org/"><cite>Storage Standard</cite></a>. Living Standard. URL: <a href="https://storage.spec.whatwg.org/">https://storage.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-entries-api">[ENTRIES-API]
   <dd><a href="https://wicg.github.io/entries-api/"><cite>File and Directory Entries API</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/entries-api/">https://wicg.github.io/entries-api/</a>
   <dt id="biblio-file-api">[FILE-API]
   <dd>Marijn Kruisselbrink. <a href="https://w3c.github.io/FileAPI/"><cite>File API</cite></a>. URL: <a href="https://w3c.github.io/FileAPI/">https://w3c.github.io/FileAPI/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>enum</c-> <a href="#enumdef-filesystempermissionmode"><code><c- g>FileSystemPermissionMode</c-></code></a> {
  <a href="#dom-filesystempermissionmode-read"><code><c- s>"read"</c-></code></a>,
  <a href="#dom-filesystempermissionmode-readwrite"><code><c- s>"readwrite"</c-></code></a>
};

<c- b>dictionary</c-> <a href="#dictdef-filesystempermissiondescriptor"><code><c- g>FileSystemPermissionDescriptor</c-></code></a> : <a data-link-type="idl-name" href="https://w3c.github.io/permissions/#dom-permissiondescriptor"><c- n>PermissionDescriptor</c-></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="https://fs.spec.whatwg.org/#filesystemhandle"><c- n>FileSystemHandle</c-></a> <a data-type="FileSystemHandle " href="#dom-filesystempermissiondescriptor-handle"><code><c- g>handle</c-></code></a>;
  <a data-link-type="idl-name" href="#enumdef-filesystempermissionmode"><c- n>FileSystemPermissionMode</c-></a> <a data-default="&quot;read&quot;" data-type="FileSystemPermissionMode " href="#dom-filesystempermissiondescriptor-mode"><code><c- g>mode</c-></code></a> = "read";
};

<c- b>dictionary</c-> <a href="#dictdef-filesystemhandlepermissiondescriptor"><code><c- g>FileSystemHandlePermissionDescriptor</c-></code></a> {
  <a data-link-type="idl-name" href="#enumdef-filesystempermissionmode"><c- n>FileSystemPermissionMode</c-></a> <a data-default="&quot;read&quot;" data-type="FileSystemPermissionMode " href="#dom-filesystemhandlepermissiondescriptor-mode"><code><c- g>mode</c-></code></a> = "read";
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable"><c- g>Serializable</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://fs.spec.whatwg.org/#filesystemhandle"><c- g>FileSystemHandle</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#dom-permissionstate"><c- n>PermissionState</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemhandle-querypermission"><c- g>queryPermission</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemhandlepermissiondescriptor"><c- n>FileSystemHandlePermissionDescriptor</c-></a> <a href="#dom-filesystemhandle-querypermission-descriptor-descriptor"><code><c- g>descriptor</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#dom-permissionstate"><c- n>PermissionState</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemhandle-requestpermission"><c- g>requestPermission</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemhandlepermissiondescriptor"><c- n>FileSystemHandlePermissionDescriptor</c-></a> <a href="#dom-filesystemhandle-requestpermission-descriptor-descriptor"><code><c- g>descriptor</c-></code></a> = {});
};

<c- b>enum</c-> <a class="idl-code" data-link-type="enum" href="#enumdef-wellknowndirectory"><c- g>WellKnownDirectory</c-></a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-wellknowndirectory-desktop"><c- s>"desktop"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-wellknowndirectory-documents"><c- s>"documents"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-wellknowndirectory-downloads"><c- s>"downloads"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-wellknowndirectory-music"><c- s>"music"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-wellknowndirectory-pictures"><c- s>"pictures"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-wellknowndirectory-videos"><c- s>"videos"</c-></a>,
};

<c- b>typedef</c-> (<a data-link-type="idl-name" href="#enumdef-wellknowndirectory"><c- n>WellKnownDirectory</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://fs.spec.whatwg.org/#filesystemhandle"><c- n>FileSystemHandle</c-></a>) <a href="#typedefdef-startindirectory"><code><c- g>StartInDirectory</c-></code></a>;

<c- b>dictionary</c-> <a href="#dictdef-filepickeraccepttype"><code><c- g>FilePickerAcceptType</c-></code></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-default="&quot;&quot;" data-type="USVString " href="#dom-filepickeraccepttype-description"><code><c- g>description</c-></code></a> = "";
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-record"><c- b>record</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a>, (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a>>)> <a data-type="record<USVString, (USVString or sequence<USVString>)> " href="#dom-filepickeraccepttype-accept"><code><c- g>accept</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-filepickeroptions"><code><c- g>FilePickerOptions</c-></code></a> {
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-filepickeraccepttype"><c- n>FilePickerAcceptType</c-></a>> <a data-type="sequence<FilePickerAcceptType> " href="#dom-filepickeroptions-types"><code><c- g>types</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-filepickeroptions-excludeacceptalloption"><code><c- g>excludeAcceptAllOption</c-></code></a> = <c- b>false</c->;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString " href="#dom-filepickeroptions-id"><code><c- g>id</c-></code></a>;
    <a data-link-type="idl-name" href="#typedefdef-startindirectory"><c- n>StartInDirectory</c-></a> <a data-type="StartInDirectory " href="#dom-filepickeroptions-startin"><code><c- g>startIn</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-openfilepickeroptions"><code><c- g>OpenFilePickerOptions</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-filepickeroptions"><c- n>FilePickerOptions</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-openfilepickeroptions-multiple"><code><c- g>multiple</c-></code></a> = <c- b>false</c->;
};

<c- b>dictionary</c-> <a href="#dictdef-savefilepickeroptions"><code><c- g>SaveFilePickerOptions</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-filepickeroptions"><c- n>FilePickerOptions</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a>? <a data-type="USVString? " href="#dom-savefilepickeroptions-suggestedname"><code><c- g>suggestedName</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-directorypickeroptions"><code><c- g>DirectoryPickerOptions</c-></code></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString " href="#dom-directorypickeroptions-id"><code><c- g>id</c-></code></a>;
    <a data-link-type="idl-name" href="#typedefdef-startindirectory"><c- n>StartInDirectory</c-></a> <a data-type="StartInDirectory " href="#dom-directorypickeroptions-startin"><code><c- g>startIn</c-></code></a>;
    <a data-link-type="idl-name" href="#enumdef-filesystempermissionmode"><c- n>FileSystemPermissionMode</c-></a> <a data-default="&quot;read&quot;" data-type="FileSystemPermissionMode " href="#dom-directorypickeroptions-mode"><code><c- g>mode</c-></code></a> = "read";
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><c- g>Window</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://fs.spec.whatwg.org/#filesystemfilehandle"><c- n>FileSystemFileHandle</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-window-showopenfilepicker"><c- g>showOpenFilePicker</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-openfilepickeroptions"><c- n>OpenFilePickerOptions</c-></a> <a href="#dom-window-showopenfilepicker-options-options"><code><c- g>options</c-></code></a> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://fs.spec.whatwg.org/#filesystemfilehandle"><c- n>FileSystemFileHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-window-showsavefilepicker"><c- g>showSaveFilePicker</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-savefilepickeroptions"><c- n>SaveFilePickerOptions</c-></a> <a href="#dom-window-showsavefilepicker-options-options"><code><c- g>options</c-></code></a> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://fs.spec.whatwg.org/#filesystemdirectoryhandle"><c- n>FileSystemDirectoryHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-window-showdirectorypicker"><c- g>showDirectoryPicker</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-directorypickeroptions"><c- n>DirectoryPickerOptions</c-></a> <a href="#dom-window-showdirectorypicker-options-options"><code><c- g>options</c-></code></a> = {});
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/dnd.html#datatransferitem"><c- g>DataTransferItem</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://fs.spec.whatwg.org/#filesystemhandle"><c- n>FileSystemHandle</c-></a>?> <a class="idl-code" data-link-type="method" href="#dom-datatransferitem-getasfilesystemhandle"><c- g>getAsFileSystemHandle</c-></a>();
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Make these checks no longer associated with an entry. <a href="https://github.com/whatwg/fs/issues/101">[Issue #whatwg/fs#101]</a> <a class="issue-return" href="#issue-45c3f8b0" title="Jump to section">↵</a></div>
   <div class="issue"> Ideally this user activation requirement would be defined upstream. <a href="https://github.com/WICG/permissions-request/issues/2">[Issue #WICG/permissions-request#2]</a> <a class="issue-return" href="#issue-88417955" title="Jump to section">↵</a></div>
   <div class="issue"> Currently <code class="idl"><a data-link-type="idl" href="#enumdef-filesystempermissionmode">FileSystemPermissionMode</a></code> can only be
"<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read">read</a></code>" or "<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite">readwrite</a></code>".
In the future we might want to add a "write" mode as well to support write-only
handles. <a href="https://github.com/wicg/file-system-access/issues/119">[Issue #119]</a> <a class="issue-return" href="#issue-7fc2f5c7" title="Jump to section">↵</a></div>
   <div class="issue"> This currently does not block access to <a data-link-type="dfn" href="#wellknowndirectory-too-sensitive-or-dangerous">too sensitive or dangerous</a> directories, to
be consistent with other APIs that give access to dropped files and directories. This is inconsistent
with the <a data-link-type="dfn" href="#local-file-system-handle-factories">local file system handle factories</a> though, so we might want to reconsider this. <a class="issue-return" href="#issue-8306b646" title="Jump to section">↵</a></div>
  </div>
  <details class="mdn-anno unpositioned" data-anno-for="dom-datatransferitem-getasfilesystemhandle">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem/getAsFileSystemHandle" title="The getAsFileSystemHandle() method of the DataTransferItem interface returns a FileSystemFileHandle if the dragged item is a file, or a FileSystemDirectoryHandle if the dragged item is a directory.">DataTransferItem/getAsFileSystemHandle</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>86+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>86+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>None</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="api-filesystemhandle-querypermission">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/FileSystemHandle/queryPermission" title="The queryPermission() method of the FileSystemHandle interface queries the current permission state of the current handle.">FileSystemHandle/queryPermission</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>86+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>86+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>None</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="api-filesystemhandle-requestpermission">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/FileSystemHandle/requestPermission" title="The requestPermission() method of the FileSystemHandle interface requests read or readwrite permissions for the file handle.">FileSystemHandle/requestPermission</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>86+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>86+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>None</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="api-showdirectorypicker">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/api/window/showdirectorypicker" title="The showDirectoryPicker() method of the Window interface displays a directory picker which allows the user to select a directory.">window/showdirectorypicker</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>86+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>86+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>None</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="api-showopenfilepicker">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/api/window/showopenfilepicker" title="The showOpenFilePicker() method of the Window interface shows a file picker that allows a user to select a file or multiple files and returns a handle for the file(s).">window/showopenfilepicker</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>86+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>86+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>None</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="api-showsavefilepicker">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/api/window/showsavefilepicker" title="The showSaveFilePicker() method of the Window interface shows a file picker that allows a user to save a file. Either by selecting an existing file, or entering a name for a new file.">window/showsavefilepicker</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>86+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>86+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>None</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
    const dfnsJson = window.dfnsJson || {};

    function genDfnPanel({dfnID, url, dfnText, refSections, external}) {
        return mk.aside({
            class: "dfn-panel",
            id: `infopanel-for-${dfnID}`,
            "data-for": dfnID,
            "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
            },
            mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
                `Info about the '${dfnText}' ${external?"external":""} reference.`),
            mk.a({href:url}, url),
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({
                                    href: `#${ref.id}`
                                    },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        );
    }

    function genAllDfnPanels() {
        for(const panelData of Object.values(window.dfnpanelData)) {
            const dfnID = panelData.dfnID;
            const dfn = document.getElementById(dfnID);
            if(!dfn) {
                console.log(`Can't find dfn#${dfnID}.`, panelData);
            } else {
                const panel = genDfnPanel(panelData);
                append(document.body, panel);
                insertDfnPopupAction(dfn, panel)
            }
        }
    }

    document.addEventListener("DOMContentLoaded", ()=>{
        genAllDfnPanels();

        // Add popup behavior to all dfns to show the corresponding dfn-panel.
        var dfns = queryAll('.dfn-paneled');
        for(let dfn of dfns) { ; }

        document.body.addEventListener("click", (e) => {
            // If not handled already, just hide all dfn panels.
            hideAllDfnPanels();
        });
    })


    function hideAllDfnPanels() {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>hideDfnPanel(el));
    }

    function showDfnPanel(dfnPanel, dfn) {
        hideAllDfnPanels(); // Only display one at this time.
        dfn.setAttribute("aria-expanded", "true");
        dfnPanel.classList.add("on");
        dfnPanel.style.left = "5px";
        dfnPanel.style.top = "0px";
        const panelRect = dfnPanel.getBoundingClientRect();
        const panelWidth = panelRect.right - panelRect.left;
        if (panelRect.right > document.body.scrollWidth) {
            // Panel's overflowing the screen.
            // Just drop it below the dfn and flip it rightward instead.
            // This still wont' fix things if the screen is *really* wide,
            // but fixing that's a lot harder without 'anchor()'.
            dfnPanel.style.top = "1.5em";
            dfnPanel.style.left = "auto";
            dfnPanel.style.right = "0px";
        }
    }

    function pinDfnPanel(dfnPanel) {
        // Switch it to "activated" state, which pins it.
        dfnPanel.classList.add("activated");
        dfnPanel.style.left = null;
        dfnPanel.style.top = null;
    }

    function hideDfnPanel(dfnPanel, dfn) {
        if(!dfn) {
            dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
        }
        dfn.setAttribute("aria-expanded", "false")
        dfnPanel.classList.remove("on");
        dfnPanel.classList.remove("activated");
    }

    function toggleDfnPanel(dfnPanel, dfn) {
        if(dfnPanel.classList.contains("on")) {
            hideDfnPanel(dfnPanel, dfn);
        } else {
            showDfnPanel(dfnPanel, dfn);
        }
    }

    function insertDfnPopupAction(dfn, dfnPanel) {
        // Find dfn panel
        const panelWrapper = document.createElement('span');
        panelWrapper.appendChild(dfnPanel);
        panelWrapper.style.position = "relative";
        panelWrapper.style.height = "0px";
        dfn.insertAdjacentElement("afterend", panelWrapper);
        dfn.setAttribute('role', 'button');
        dfn.setAttribute('aria-expanded', 'false')
        dfn.tabIndex = 0;
        dfn.classList.add('has-dfn-panel');
        dfn.addEventListener('click', (event) => {
            showDfnPanel(dfnPanel, dfn);
            event.stopPropagation();
        });
        dfn.addEventListener('keypress', (event) => {
            const kc = event.keyCode;
            // 32->Space, 13->Enter
            if(kc == 32 || kc == 13) {
                toggleDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        });

        dfnPanel.addEventListener('click', (event) => {
            if (event.target.nodeName == 'A') {
                pinDfnPanel(dfnPanel);
            }
            event.stopPropagation();
        });

        dfnPanel.addEventListener('keydown', (event) => {
            if(event.keyCode == 27) { // Escape key
                hideDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        })
    }
}
</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
    const dfnsJson = window.dfnsJson || {};

    function genDfnPanel({dfnID, url, dfnText, refSections, external}) {
        return mk.aside({
            class: "dfn-panel",
            id: `infopanel-for-${dfnID}`,
            "data-for": dfnID,
            "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
            },
            mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
                `Info about the '${dfnText}' ${external?"external":""} reference.`),
            mk.a({href:url}, url),
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({
                                    href: `#${ref.id}`
                                    },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        );
    }

    function genAllDfnPanels() {
        for(const panelData of Object.values(window.dfnpanelData)) {
            const dfnID = panelData.dfnID;
            const dfn = document.getElementById(dfnID);
            if(!dfn) {
                console.log(`Can't find dfn#${dfnID}.`, panelData);
            } else {
                const panel = genDfnPanel(panelData);
                append(document.body, panel);
                insertDfnPopupAction(dfn, panel)
            }
        }
    }

    document.addEventListener("DOMContentLoaded", ()=>{
        genAllDfnPanels();

        // Add popup behavior to all dfns to show the corresponding dfn-panel.
        var dfns = queryAll('.dfn-paneled');
        for(let dfn of dfns) { ; }

        document.body.addEventListener("click", (e) => {
            // If not handled already, just hide all dfn panels.
            hideAllDfnPanels();
        });
    })


    function hideAllDfnPanels() {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>hideDfnPanel(el));
    }

    function showDfnPanel(dfnPanel, dfn) {
        hideAllDfnPanels(); // Only display one at this time.
        dfn.setAttribute("aria-expanded", "true");
        dfnPanel.classList.add("on");
        dfnPanel.style.left = "5px";
        dfnPanel.style.top = "0px";
        const panelRect = dfnPanel.getBoundingClientRect();
        const panelWidth = panelRect.right - panelRect.left;
        if (panelRect.right > document.body.scrollWidth) {
            // Panel's overflowing the screen.
            // Just drop it below the dfn and flip it rightward instead.
            // This still wont' fix things if the screen is *really* wide,
            // but fixing that's a lot harder without 'anchor()'.
            dfnPanel.style.top = "1.5em";
            dfnPanel.style.left = "auto";
            dfnPanel.style.right = "0px";
        }
    }

    function pinDfnPanel(dfnPanel) {
        // Switch it to "activated" state, which pins it.
        dfnPanel.classList.add("activated");
        dfnPanel.style.left = null;
        dfnPanel.style.top = null;
    }

    function hideDfnPanel(dfnPanel, dfn) {
        if(!dfn) {
            dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
        }
        dfn.setAttribute("aria-expanded", "false")
        dfnPanel.classList.remove("on");
        dfnPanel.classList.remove("activated");
    }

    function toggleDfnPanel(dfnPanel, dfn) {
        if(dfnPanel.classList.contains("on")) {
            hideDfnPanel(dfnPanel, dfn);
        } else {
            showDfnPanel(dfnPanel, dfn);
        }
    }

    function insertDfnPopupAction(dfn, dfnPanel) {
        // Find dfn panel
        const panelWrapper = document.createElement('span');
        panelWrapper.appendChild(dfnPanel);
        panelWrapper.style.position = "relative";
        panelWrapper.style.height = "0px";
        dfn.insertAdjacentElement("afterend", panelWrapper);
        dfn.setAttribute('role', 'button');
        dfn.setAttribute('aria-expanded', 'false')
        dfn.tabIndex = 0;
        dfn.classList.add('has-dfn-panel');
        dfn.addEventListener('click', (event) => {
            showDfnPanel(dfnPanel, dfn);
            event.stopPropagation();
        });
        dfn.addEventListener('keypress', (event) => {
            const kc = event.keyCode;
            // 32->Space, 13->Enter
            if(kc == 32 || kc == 13) {
                toggleDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        });

        dfnPanel.addEventListener('click', (event) => {
            if (event.target.nodeName == 'A') {
                pinDfnPanel(dfnPanel);
            }
            event.stopPropagation();
        });

        dfnPanel.addEventListener('keydown', (event) => {
            if(event.keyCode == 27) { // Escape key
                hideDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        })
    }
}
</script>
<script>/* Boilerplate: script-dfn-panel-json */
window.dfnpanelData = {};
window.dfnpanelData['23e108bd'] = {"dfnID": "23e108bd", "url": "https://fs.spec.whatwg.org/#filesystemdirectoryhandle", "dfnText": "FileSystemDirectoryHandle", "refSections": [{"refs": [{"id": "ref-for-filesystemdirectoryhandle"}], "title": "3. Accessing Local File System"}, {"refs": [{"id": "ref-for-filesystemdirectoryhandle\u2460"}, {"id": "ref-for-filesystemdirectoryhandle\u2461"}], "title": "3.2.2. Starting Directory"}, {"refs": [{"id": "ref-for-filesystemdirectoryhandle\u2462"}], "title": "3.5. The showDirectoryPicker() method"}, {"refs": [{"id": "ref-for-filesystemdirectoryhandle\u2463"}, {"id": "ref-for-filesystemdirectoryhandle\u2464"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['c551a16f'] = {"dfnID": "c551a16f", "url": "https://fs.spec.whatwg.org/#filesystemfilehandle", "dfnText": "FileSystemFileHandle", "refSections": [{"refs": [{"id": "ref-for-filesystemfilehandle"}, {"id": "ref-for-filesystemfilehandle\u2460"}], "title": "3. Accessing Local File System"}, {"refs": [{"id": "ref-for-filesystemfilehandle\u2461"}], "title": "3.2.2. Starting Directory"}, {"refs": [{"id": "ref-for-filesystemfilehandle\u2462"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-filesystemfilehandle\u2463"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-filesystemfilehandle\u2464"}, {"id": "ref-for-filesystemfilehandle\u2465"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['cd895d76'] = {"dfnID": "cd895d76", "url": "https://fs.spec.whatwg.org/#filesystemhandle", "dfnText": "FileSystemHandle", "refSections": [{"refs": [{"id": "ref-for-filesystemhandle"}, {"id": "ref-for-filesystemhandle\u2460"}, {"id": "ref-for-filesystemhandle\u2461"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-filesystemhandle\u2462"}, {"id": "ref-for-filesystemhandle\u2463"}], "title": "2.3. The FileSystemHandle interface"}, {"refs": [{"id": "ref-for-filesystemhandle\u2464"}], "title": "3. Accessing Local File System"}, {"refs": [{"id": "ref-for-filesystemhandle\u2465"}], "title": "3.2.2. Starting Directory"}, {"refs": [{"id": "ref-for-filesystemhandle\u2466"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['4e1cb6d8'] = {"dfnID": "4e1cb6d8", "url": "https://fs.spec.whatwg.org/#file-entry-binary-data", "dfnText": "binary data", "refSections": [{"refs": [{"id": "ref-for-file-entry-binary-data"}], "title": "3.4. The showSaveFilePicker() method"}], "external": true};
window.dfnpanelData['2b36a48c'] = {"dfnID": "2b36a48c", "url": "https://fs.spec.whatwg.org/#origin-private-file-system", "dfnText": "bucket file system", "refSections": [{"refs": [{"id": "ref-for-origin-private-file-system"}], "title": "1. Introduction"}, {"refs": [{"id": "ref-for-origin-private-file-system\u2460"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-origin-private-file-system\u2461"}], "title": "6.3. Filling up a users disk"}], "external": true};
window.dfnpanelData['132b29a9'] = {"dfnID": "132b29a9", "url": "https://fs.spec.whatwg.org/#directory", "dfnText": "directory entry", "refSections": [{"refs": [{"id": "ref-for-directory"}], "title": "3.2.2. Starting Directory"}, {"refs": [{"id": "ref-for-directory\u2460"}], "title": "3.5. The showDirectoryPicker() method"}, {"refs": [{"id": "ref-for-directory\u2461"}, {"id": "ref-for-directory\u2462"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['229e7921'] = {"dfnID": "229e7921", "url": "https://fs.spec.whatwg.org/#file", "dfnText": "file entry", "refSections": [{"refs": [{"id": "ref-for-file"}], "title": "3.2.2. Starting Directory"}, {"refs": [{"id": "ref-for-file\u2460"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-file\u2461"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-file\u2462"}, {"id": "ref-for-file\u2463"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['83e04685'] = {"dfnID": "83e04685", "url": "https://fs.spec.whatwg.org/#entry", "dfnText": "file system entry", "refSections": [{"refs": [{"id": "ref-for-entry"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-entry\u2460"}], "title": "3.2.2. Starting Directory"}, {"refs": [{"id": "ref-for-entry\u2461"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['e2504190'] = {"dfnID": "e2504190", "url": "https://fs.spec.whatwg.org/#filesystemhandle-is-in-a-bucket-file-system", "dfnText": "is in a bucket file system", "refSections": [{"refs": [{"id": "ref-for-filesystemhandle-is-in-a-bucket-file-system"}], "title": "3.2.2. Starting Directory"}], "external": true};
window.dfnpanelData['c8c03f35'] = {"dfnID": "c8c03f35", "url": "https://fs.spec.whatwg.org/#locating-an-entry", "dfnText": "locating an entry", "refSections": [{"refs": [{"id": "ref-for-locating-an-entry"}], "title": "3.2.2. Starting Directory"}], "external": true};
window.dfnpanelData['598433c6'] = {"dfnID": "598433c6", "url": "https://fs.spec.whatwg.org/#filesystemhandle-locator", "dfnText": "locator", "refSections": [{"refs": [{"id": "ref-for-filesystemhandle-locator"}], "title": "3.2.2. Starting Directory"}], "external": true};
window.dfnpanelData['44262c3b'] = {"dfnID": "44262c3b", "url": "https://fs.spec.whatwg.org/#entry-parent", "dfnText": "parent", "refSections": [{"refs": [{"id": "ref-for-entry-parent"}, {"id": "ref-for-entry-parent\u2460"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-entry-parent\u2461"}], "title": "3.2.2. Starting Directory"}], "external": true};
window.dfnpanelData['2becd408'] = {"dfnID": "2becd408", "url": "https://fs.spec.whatwg.org/#dom-filesystemwritablefilestream-truncate", "dfnText": "truncate(size)", "refSections": [{"refs": [{"id": "ref-for-dom-filesystemwritablefilestream-truncate"}], "title": "6.3. Filling up a users disk"}], "external": true};
window.dfnpanelData['4ff66d05'] = {"dfnID": "4ff66d05", "url": "https://html.spec.whatwg.org/multipage/dnd.html#datatransferitem", "dfnText": "DataTransferItem", "refSections": [{"refs": [{"id": "ref-for-datatransferitem"}, {"id": "ref-for-datatransferitem\u2460"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['eb5c4be3'] = {"dfnID": "eb5c4be3", "url": "https://html.spec.whatwg.org/multipage/structured-data.html#serializable", "dfnText": "Serializable", "refSections": [{"refs": [{"id": "ref-for-serializable"}], "title": "2.3. The FileSystemHandle interface"}], "external": true};
window.dfnpanelData['5d7209e9'] = {"dfnID": "5d7209e9", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window", "dfnText": "Window", "refSections": [{"refs": [{"id": "ref-for-window"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-window\u2460"}], "title": "3. Accessing Local File System"}], "external": true};
window.dfnpanelData['36d15a6d'] = {"dfnID": "36d15a6d", "url": "https://html.spec.whatwg.org/multipage/interaction.html#activation-notification", "dfnText": "activation notification", "refSections": [{"refs": [{"id": "ref-for-activation-notification"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-activation-notification\u2460"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-activation-notification\u2461"}, {"id": "ref-for-activation-notification\u2462"}], "title": "3.5. The showDirectoryPicker() method"}], "external": true};
window.dfnpanelData['9329fd7b'] = {"dfnID": "9329fd7b", "url": "https://html.spec.whatwg.org/multipage/links.html#as-a-download", "dfnText": "as a download", "refSections": [{"refs": [{"id": "ref-for-as-a-download"}], "title": "3.4. The showSaveFilePicker() method"}], "external": true};
window.dfnpanelData['6d88ab2e'] = {"dfnID": "6d88ab2e", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc", "dfnText": "browsing context", "refSections": [{"refs": [{"id": "ref-for-window-bc"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-window-bc\u2460"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-window-bc\u2461"}, {"id": "ref-for-window-bc\u2462"}], "title": "3.5. The showDirectoryPicker() method"}], "external": true};
window.dfnpanelData['3e12e042'] = {"dfnID": "3e12e042", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object", "dfnText": "environment settings object", "refSections": [{"refs": [{"id": "ref-for-environment-settings-object"}, {"id": "ref-for-environment-settings-object\u2460"}], "title": "3.2.2. Starting Directory"}], "external": true};
window.dfnpanelData['8a30477b'] = {"dfnID": "8a30477b", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global", "dfnText": "global object", "refSections": [{"refs": [{"id": "ref-for-concept-settings-object-global"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-concept-settings-object-global\u2460"}], "title": "3.1. Local File System Permissions"}, {"refs": [{"id": "ref-for-concept-settings-object-global\u2461"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-concept-settings-object-global\u2462"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-concept-settings-object-global\u2463"}], "title": "3.5. The showDirectoryPicker() method"}], "external": true};
window.dfnpanelData['a72449dd'] = {"dfnID": "a72449dd", "url": "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel", "dfnText": "in parallel", "refSections": [{"refs": [{"id": "ref-for-in-parallel"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-in-parallel\u2460"}], "title": "2.3.2. The requestPermission() method"}, {"refs": [{"id": "ref-for-in-parallel\u2461"}, {"id": "ref-for-in-parallel\u2462"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-in-parallel\u2463"}, {"id": "ref-for-in-parallel\u2464"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-in-parallel\u2465"}, {"id": "ref-for-in-parallel\u2466"}], "title": "3.5. The showDirectoryPicker() method"}, {"refs": [{"id": "ref-for-in-parallel\u2467"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['6b373a4a'] = {"dfnID": "6b373a4a", "url": "https://html.spec.whatwg.org/multipage/indices.html#event-messageerror", "dfnText": "messageerror", "refSections": [{"refs": [{"id": "ref-for-event-messageerror"}], "title": "5.3. First-party vs third-party contexts."}], "external": true};
window.dfnpanelData['b01b1359'] = {"dfnID": "b01b1359", "url": "https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque", "dfnText": "opaque origin", "refSections": [{"refs": [{"id": "ref-for-concept-origin-opaque"}], "title": "3.1. Local File System Permissions"}], "external": true};
window.dfnpanelData['086e3aff'] = {"dfnID": "086e3aff", "url": "https://html.spec.whatwg.org/multipage/browsers.html#concept-origin", "dfnText": "origin", "refSections": [{"refs": [{"id": "ref-for-concept-origin"}], "title": "3.2.2. Starting Directory"}], "external": true};
window.dfnpanelData['43ac8374'] = {"dfnID": "43ac8374", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin", "dfnText": "origin (for environment settings object)", "refSections": [{"refs": [{"id": "ref-for-concept-settings-object-origin"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-concept-settings-object-origin\u2460"}, {"id": "ref-for-concept-settings-object-origin\u2461"}], "title": "3.1. Local File System Permissions"}, {"refs": [{"id": "ref-for-concept-settings-object-origin\u2462"}, {"id": "ref-for-concept-settings-object-origin\u2463"}], "title": "3.2.2. Starting Directory"}], "external": true};
window.dfnpanelData['bb0e27f7'] = {"dfnID": "bb0e27f7", "url": "https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-ro", "dfnText": "read-only mode", "refSections": [{"refs": [{"id": "ref-for-concept-dnd-ro"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['9604548f'] = {"dfnID": "9604548f", "url": "https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-rw", "dfnText": "read/write mode", "refSections": [{"refs": [{"id": "ref-for-concept-dnd-rw"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['9c4c1e66'] = {"dfnID": "9c4c1e66", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object", "dfnText": "relevant settings object", "refSections": [{"refs": [{"id": "ref-for-relevant-settings-object"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-relevant-settings-object\u2460"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-relevant-settings-object\u2461"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-relevant-settings-object\u2462"}], "title": "3.5. The showDirectoryPicker() method"}], "external": true};
window.dfnpanelData['7393da89'] = {"dfnID": "7393da89", "url": "https://html.spec.whatwg.org/multipage/browsers.html#same-origin", "dfnText": "same origin", "refSections": [{"refs": [{"id": "ref-for-same-origin"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-same-origin\u2460"}], "title": "3.1. Local File System Permissions"}], "external": true};
window.dfnpanelData['7e94ee2f'] = {"dfnID": "7e94ee2f", "url": "https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind", "dfnText": "the drag data item kind", "refSections": [{"refs": [{"id": "ref-for-the-drag-data-item-kind"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['c63519ed'] = {"dfnID": "c63519ed", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin", "dfnText": "top-level origin", "refSections": [{"refs": [{"id": "ref-for-concept-environment-top-level-origin"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-concept-environment-top-level-origin\u2460"}], "title": "3.1. Local File System Permissions"}], "external": true};
window.dfnpanelData['47fe679e'] = {"dfnID": "47fe679e", "url": "https://html.spec.whatwg.org/multipage/interaction.html#transient-activation", "dfnText": "transient activation", "refSections": [{"refs": [{"id": "ref-for-transient-activation"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-transient-activation\u2460"}], "title": "3.1. Local File System Permissions"}], "external": true};
window.dfnpanelData['53275e46'] = {"dfnID": "53275e46", "url": "https://infra.spec.whatwg.org/#list-append", "dfnText": "append", "refSections": [{"refs": [{"id": "ref-for-list-append"}, {"id": "ref-for-list-append\u2460"}], "title": "3.2.1. Accepted file types"}], "external": true};
window.dfnpanelData['f43d6978'] = {"dfnID": "f43d6978", "url": "https://infra.spec.whatwg.org/#ascii-alphanumeric", "dfnText": "ascii alphanumeric", "refSections": [{"refs": [{"id": "ref-for-ascii-alphanumeric"}], "title": "2.1. Concepts"}, {"refs": [{"id": "ref-for-ascii-alphanumeric\u2460"}], "title": "3.2.2. Starting Directory"}], "external": true};
window.dfnpanelData['3de9e659'] = {"dfnID": "3de9e659", "url": "https://infra.spec.whatwg.org/#byte-sequence", "dfnText": "byte sequence", "refSections": [{"refs": [{"id": "ref-for-byte-sequence"}], "title": "3.4. The showSaveFilePicker() method"}], "external": true};
window.dfnpanelData['915aff5e'] = {"dfnID": "915aff5e", "url": "https://infra.spec.whatwg.org/#code-point", "dfnText": "code point", "refSections": [{"refs": [{"id": "ref-for-code-point"}], "title": "2.1. Concepts"}, {"refs": [{"id": "ref-for-code-point\u2460"}], "title": "3.2.1. Accepted file types"}], "external": true};
window.dfnpanelData['03afaf9c'] = {"dfnID": "03afaf9c", "url": "https://infra.spec.whatwg.org/#list-empty", "dfnText": "empty", "refSections": [{"refs": [{"id": "ref-for-list-empty"}], "title": "3.2.1. Accepted file types"}], "external": true};
window.dfnpanelData['1243a891'] = {"dfnID": "1243a891", "url": "https://infra.spec.whatwg.org/#map-exists", "dfnText": "exist", "refSections": [{"refs": [{"id": "ref-for-map-exists"}, {"id": "ref-for-map-exists\u2460"}, {"id": "ref-for-map-exists\u2461"}, {"id": "ref-for-map-exists\u2462"}, {"id": "ref-for-map-exists\u2463"}], "title": "3.2.2. Starting Directory"}, {"refs": [{"id": "ref-for-map-exists\u2464"}], "title": "3.4. The showSaveFilePicker() method"}], "external": true};
window.dfnpanelData['16d07e10'] = {"dfnID": "16d07e10", "url": "https://infra.spec.whatwg.org/#list-iterate", "dfnText": "for each (for list)", "refSections": [{"refs": [{"id": "ref-for-list-iterate"}, {"id": "ref-for-list-iterate\u2460"}, {"id": "ref-for-list-iterate\u2461"}], "title": "3.2.1. Accepted file types"}, {"refs": [{"id": "ref-for-list-iterate\u2462"}], "title": "3.3. The showOpenFilePicker() method"}], "external": true};
window.dfnpanelData['45209803'] = {"dfnID": "45209803", "url": "https://infra.spec.whatwg.org/#map-iterate", "dfnText": "for each (for map)", "refSections": [{"refs": [{"id": "ref-for-map-iterate"}, {"id": "ref-for-map-iterate\u2460"}], "title": "3.2.1. Accepted file types"}], "external": true};
window.dfnpanelData['860300d4'] = {"dfnID": "860300d4", "url": "https://infra.spec.whatwg.org/#implementation-defined", "dfnText": "implementation-defined", "refSections": [{"refs": [{"id": "ref-for-implementation-defined"}], "title": "3.2.2. Starting Directory"}, {"refs": [{"id": "ref-for-implementation-defined\u2460"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-implementation-defined\u2461"}, {"id": "ref-for-implementation-defined\u2462"}], "title": "3.4. The showSaveFilePicker() method"}], "external": true};
window.dfnpanelData['0fa357c3'] = {"dfnID": "0fa357c3", "url": "https://infra.spec.whatwg.org/#string-length", "dfnText": "length", "refSections": [{"refs": [{"id": "ref-for-string-length"}], "title": "3.2.1. Accepted file types"}, {"refs": [{"id": "ref-for-string-length\u2460"}], "title": "3.2.2. Starting Directory"}], "external": true};
window.dfnpanelData['649608b9'] = {"dfnID": "649608b9", "url": "https://infra.spec.whatwg.org/#list", "dfnText": "list", "refSections": [{"refs": [{"id": "ref-for-list"}], "title": "3.2.1. Accepted file types"}, {"refs": [{"id": "ref-for-list\u2460"}, {"id": "ref-for-list\u2461"}], "title": "3.3. The showOpenFilePicker() method"}], "external": true};
window.dfnpanelData['3fca5a9e'] = {"dfnID": "3fca5a9e", "url": "https://infra.spec.whatwg.org/#ordered-map", "dfnText": "map", "refSections": [{"refs": [{"id": "ref-for-ordered-map"}, {"id": "ref-for-ordered-map\u2460"}], "title": "3.2.2. Starting Directory"}], "external": true};
window.dfnpanelData['54627f47'] = {"dfnID": "54627f47", "url": "https://infra.spec.whatwg.org/#string-starts-with", "dfnText": "starts with", "refSections": [{"refs": [{"id": "ref-for-string-starts-with"}], "title": "3.2.1. Accepted file types"}], "external": true};
window.dfnpanelData['0698d556'] = {"dfnID": "0698d556", "url": "https://infra.spec.whatwg.org/#string", "dfnText": "string", "refSections": [{"refs": [{"id": "ref-for-string"}], "title": "3.2.1. Accepted file types"}, {"refs": [{"id": "ref-for-string\u2460"}, {"id": "ref-for-string\u2461"}, {"id": "ref-for-string\u2462"}], "title": "3.2.2. Starting Directory"}], "external": true};
window.dfnpanelData['0e8de730'] = {"dfnID": "0e8de730", "url": "https://infra.spec.whatwg.org/#tuple", "dfnText": "tuple", "refSections": [{"refs": [{"id": "ref-for-tuple"}], "title": "3.2.1. Accepted file types"}], "external": true};
window.dfnpanelData['7c195f8b'] = {"dfnID": "7c195f8b", "url": "https://mimesniff.spec.whatwg.org/#mime-type-essence", "dfnText": "essence", "refSections": [{"refs": [{"id": "ref-for-mime-type-essence"}, {"id": "ref-for-mime-type-essence\u2460"}], "title": "3.2.1. Accepted file types"}], "external": true};
window.dfnpanelData['16785ec4'] = {"dfnID": "16785ec4", "url": "https://mimesniff.spec.whatwg.org/#mime-type", "dfnText": "mime type", "refSections": [{"refs": [{"id": "ref-for-mime-type"}], "title": "3.2.1. Accepted file types"}], "external": true};
window.dfnpanelData['fc5a3214'] = {"dfnID": "fc5a3214", "url": "https://mimesniff.spec.whatwg.org/#parameters", "dfnText": "parameters", "refSections": [{"refs": [{"id": "ref-for-parameters"}], "title": "3.2.1. Accepted file types"}], "external": true};
window.dfnpanelData['d72dabca'] = {"dfnID": "d72dabca", "url": "https://mimesniff.spec.whatwg.org/#parse-a-mime-type", "dfnText": "parse a mime type", "refSections": [{"refs": [{"id": "ref-for-parse-a-mime-type"}, {"id": "ref-for-parse-a-mime-type\u2460"}], "title": "3.2.1. Accepted file types"}], "external": true};
window.dfnpanelData['69d8b9f1'] = {"dfnID": "69d8b9f1", "url": "https://mimesniff.spec.whatwg.org/#subtype", "dfnText": "subtype", "refSections": [{"refs": [{"id": "ref-for-subtype"}], "title": "3.2.1. Accepted file types"}], "external": true};
window.dfnpanelData['b5c41c63'] = {"dfnID": "b5c41c63", "url": "https://mimesniff.spec.whatwg.org/#type", "dfnText": "type", "refSections": [{"refs": [{"id": "ref-for-type"}, {"id": "ref-for-type\u2460"}, {"id": "ref-for-type\u2461"}], "title": "3.2.1. Accepted file types"}], "external": true};
window.dfnpanelData['ebb01253'] = {"dfnID": "ebb01253", "url": "https://w3c.github.io/permissions/#dom-permissiondescriptor", "dfnText": "PermissionDescriptor", "refSections": [{"refs": [{"id": "ref-for-dom-permissiondescriptor"}], "title": "2.2. Permissions"}], "external": true};
window.dfnpanelData['6c3bee60'] = {"dfnID": "6c3bee60", "url": "https://w3c.github.io/permissions/#dom-permissionstate", "dfnText": "PermissionState", "refSections": [{"refs": [{"id": "ref-for-dom-permissionstate"}, {"id": "ref-for-dom-permissionstate\u2460"}], "title": "2.3. The FileSystemHandle interface"}], "external": true};
window.dfnpanelData['dbf8e074'] = {"dfnID": "dbf8e074", "url": "https://w3c.github.io/permissions/#dom-permissionstatus", "dfnText": "PermissionStatus", "refSections": [{"refs": [{"id": "ref-for-dom-permissionstatus"}], "title": "2.2. Permissions"}], "external": true};
window.dfnpanelData['113dd5ca'] = {"dfnID": "113dd5ca", "url": "https://w3c.github.io/permissions/#dfn-create-a-permissionstatus", "dfnText": "create a permissionstatus", "refSections": [{"refs": [{"id": "ref-for-dfn-create-a-permissionstatus"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dfn-create-a-permissionstatus\u2460"}], "title": "3.5. The showDirectoryPicker() method"}], "external": true};
window.dfnpanelData['1191fb01'] = {"dfnID": "1191fb01", "url": "https://w3c.github.io/permissions/#dfn-default-permission-query-algorithm", "dfnText": "default permission query algorithm", "refSections": [{"refs": [{"id": "ref-for-dfn-default-permission-query-algorithm"}, {"id": "ref-for-dfn-default-permission-query-algorithm\u2460"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dfn-default-permission-query-algorithm\u2461"}], "title": "3.5. The showDirectoryPicker() method"}], "external": true};
window.dfnpanelData['2cb28cb0'] = {"dfnID": "2cb28cb0", "url": "https://w3c.github.io/permissions/#dom-permissionstate-denied", "dfnText": "denied", "refSections": [{"refs": [{"id": "ref-for-dom-permissionstate-denied"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-dom-permissionstate-denied\u2460"}], "title": "2.3.2. The requestPermission() method"}], "external": true};
window.dfnpanelData['c6ce3c60'] = {"dfnID": "c6ce3c60", "url": "https://w3c.github.io/permissions/#dom-permissionstate-granted", "dfnText": "granted", "refSections": [{"refs": [{"id": "ref-for-dom-permissionstate-granted"}, {"id": "ref-for-dom-permissionstate-granted\u2460"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dom-permissionstate-granted\u2461"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-dom-permissionstate-granted\u2462"}, {"id": "ref-for-dom-permissionstate-granted\u2463"}], "title": "3.1. Local File System Permissions"}, {"refs": [{"id": "ref-for-dom-permissionstate-granted\u2464"}], "title": "3.5. The showDirectoryPicker() method"}], "external": true};
window.dfnpanelData['0310eecd'] = {"dfnID": "0310eecd", "url": "https://w3c.github.io/permissions/#dom-permissiondescriptor-name", "dfnText": "name", "refSections": [{"refs": [{"id": "ref-for-dom-permissiondescriptor-name"}, {"id": "ref-for-dom-permissiondescriptor-name\u2460"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dom-permissiondescriptor-name\u2461"}, {"id": "ref-for-dom-permissiondescriptor-name\u2462"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-dom-permissiondescriptor-name\u2463"}], "title": "3.5. The showDirectoryPicker() method"}], "external": true};
window.dfnpanelData['4b7ca52a'] = {"dfnID": "4b7ca52a", "url": "https://w3c.github.io/permissions/#dfn-permission-descriptor-type", "dfnText": "permission descriptor type", "refSections": [{"refs": [{"id": "ref-for-dfn-permission-descriptor-type"}], "title": "2.2. Permissions"}], "external": true};
window.dfnpanelData['d124397f'] = {"dfnID": "d124397f", "url": "https://w3c.github.io/permissions/#dfn-permission-state", "dfnText": "permission state", "refSections": [{"refs": [{"id": "ref-for-dfn-permission-state"}, {"id": "ref-for-dfn-permission-state\u2460"}, {"id": "ref-for-dfn-permission-state\u2461"}, {"id": "ref-for-dfn-permission-state\u2462"}, {"id": "ref-for-dfn-permission-state\u2463"}, {"id": "ref-for-dfn-permission-state\u2464"}, {"id": "ref-for-dfn-permission-state\u2465"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dfn-permission-state\u2466"}, {"id": "ref-for-dfn-permission-state\u2467"}], "title": "3.1. Local File System Permissions"}], "external": true};
window.dfnpanelData['3e7aa5da'] = {"dfnID": "3e7aa5da", "url": "https://w3c.github.io/permissions/#dfn-permission-state-constraints", "dfnText": "permission state constraints", "refSections": [{"refs": [{"id": "ref-for-dfn-permission-state-constraints"}, {"id": "ref-for-dfn-permission-state-constraints\u2460"}], "title": "2.2. Permissions"}], "external": true};
window.dfnpanelData['ec3886d6'] = {"dfnID": "ec3886d6", "url": "https://w3c.github.io/permissions/#dom-navigator-permissions", "dfnText": "permissions", "refSections": [{"refs": [{"id": "ref-for-dom-navigator-permissions"}, {"id": "ref-for-dom-navigator-permissions\u2460"}], "title": "2.3.1. The queryPermission() method"}], "external": true};
window.dfnpanelData['6c2d7879'] = {"dfnID": "6c2d7879", "url": "https://w3c.github.io/permissions/#dfn-powerful-feature", "dfnText": "powerful feature", "refSections": [{"refs": [{"id": "ref-for-dfn-powerful-feature"}], "title": "2.2. Permissions"}], "external": true};
window.dfnpanelData['325da0f2'] = {"dfnID": "325da0f2", "url": "https://w3c.github.io/permissions/#dom-permissionstate-prompt", "dfnText": "prompt", "refSections": [{"refs": [{"id": "ref-for-dom-permissionstate-prompt"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dom-permissionstate-prompt\u2460"}, {"id": "ref-for-dom-permissionstate-prompt\u2461"}, {"id": "ref-for-dom-permissionstate-prompt\u2462"}, {"id": "ref-for-dom-permissionstate-prompt\u2463"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-dom-permissionstate-prompt\u2464"}, {"id": "ref-for-dom-permissionstate-prompt\u2465"}, {"id": "ref-for-dom-permissionstate-prompt\u2466"}, {"id": "ref-for-dom-permissionstate-prompt\u2467"}], "title": "2.3.2. The requestPermission() method"}], "external": true};
window.dfnpanelData['78f04503'] = {"dfnID": "78f04503", "url": "https://w3c.github.io/permissions/#dom-permissions-query", "dfnText": "query()", "refSections": [{"refs": [{"id": "ref-for-dom-permissions-query"}, {"id": "ref-for-dom-permissions-query\u2460"}, {"id": "ref-for-dom-permissions-query\u2461"}], "title": "2.3.1. The queryPermission() method"}], "external": true};
window.dfnpanelData['bcc085e3'] = {"dfnID": "bcc085e3", "url": "https://w3c.github.io/permissions/#dfn-request-permission-to-use", "dfnText": "request permission to use", "refSections": [{"refs": [{"id": "ref-for-dfn-request-permission-to-use"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dfn-request-permission-to-use\u2460"}], "title": "3.5. The showDirectoryPicker() method"}], "external": true};
window.dfnpanelData['620f832e'] = {"dfnID": "620f832e", "url": "https://w3c.github.io/permissions/#dom-permissionstatus-state", "dfnText": "state", "refSections": [{"refs": [{"id": "ref-for-dom-permissionstatus-state"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dom-permissionstatus-state\u2460"}, {"id": "ref-for-dom-permissionstatus-state\u2461"}], "title": "2.3.1. The queryPermission() method"}], "external": true};
window.dfnpanelData['35725f70'] = {"dfnID": "35725f70", "url": "https://wicg.github.io/permissions-request/#permission-request-algorithm", "dfnText": "permission request algorithm", "refSections": [{"refs": [{"id": "ref-for-permission-request-algorithm"}, {"id": "ref-for-permission-request-algorithm\u2460"}], "title": "2.2. Permissions"}], "external": true};
window.dfnpanelData['91461e7c'] = {"dfnID": "91461e7c", "url": "https://storage.spec.whatwg.org/#site-storage", "dfnText": "storage", "refSections": [{"refs": [{"id": "ref-for-site-storage"}], "title": "5.1. Users giving access to more, or more sensitive files than they intended."}], "external": true};
window.dfnpanelData['cac8dd86'] = {"dfnID": "cac8dd86", "url": "https://storage.spec.whatwg.org/#storage-quota", "dfnText": "storage quota", "refSections": [{"refs": [{"id": "ref-for-storage-quota"}, {"id": "ref-for-storage-quota\u2460"}, {"id": "ref-for-storage-quota\u2461"}], "title": "6.3. Filling up a users disk"}], "external": true};
window.dfnpanelData['d25dfb2c'] = {"dfnID": "d25dfb2c", "url": "https://webidl.spec.whatwg.org/#aborterror", "dfnText": "AbortError", "refSections": [{"refs": [{"id": "ref-for-aborterror"}, {"id": "ref-for-aborterror\u2460"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-aborterror\u2461"}, {"id": "ref-for-aborterror\u2462"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-aborterror\u2463"}, {"id": "ref-for-aborterror\u2464"}, {"id": "ref-for-aborterror\u2465"}], "title": "3.5. The showDirectoryPicker() method"}], "external": true};
window.dfnpanelData['dca2de17'] = {"dfnID": "dca2de17", "url": "https://webidl.spec.whatwg.org/#idl-DOMException", "dfnText": "DOMException", "refSections": [{"refs": [{"id": "ref-for-idl-DOMException"}, {"id": "ref-for-idl-DOMException\u2460"}, {"id": "ref-for-idl-DOMException\u2461"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-idl-DOMException\u2462"}, {"id": "ref-for-idl-DOMException\u2463"}, {"id": "ref-for-idl-DOMException\u2464"}], "title": "3.1. Local File System Permissions"}, {"refs": [{"id": "ref-for-idl-DOMException\u2465"}, {"id": "ref-for-idl-DOMException\u2466"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-idl-DOMException\u2467"}, {"id": "ref-for-idl-DOMException\u2468"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-idl-DOMException\u2460\u24ea"}, {"id": "ref-for-idl-DOMException\u2460\u2460"}, {"id": "ref-for-idl-DOMException\u2460\u2461"}], "title": "3.5. The showDirectoryPicker() method"}], "external": true};
window.dfnpanelData['8855a9aa'] = {"dfnID": "8855a9aa", "url": "https://webidl.spec.whatwg.org/#idl-DOMString", "dfnText": "DOMString", "refSections": [{"refs": [{"id": "ref-for-idl-DOMString"}, {"id": "ref-for-idl-DOMString\u2460"}], "title": "3. Accessing Local File System"}], "external": true};
window.dfnpanelData['889e932f'] = {"dfnID": "889e932f", "url": "https://webidl.spec.whatwg.org/#Exposed", "dfnText": "Exposed", "refSections": [{"refs": [{"id": "ref-for-Exposed"}], "title": "2.3. The FileSystemHandle interface"}], "external": true};
window.dfnpanelData['bdbd19d1'] = {"dfnID": "bdbd19d1", "url": "https://webidl.spec.whatwg.org/#idl-promise", "dfnText": "Promise", "refSections": [{"refs": [{"id": "ref-for-idl-promise"}, {"id": "ref-for-idl-promise\u2460"}], "title": "2.3. The FileSystemHandle interface"}, {"refs": [{"id": "ref-for-idl-promise\u2461"}, {"id": "ref-for-idl-promise\u2462"}, {"id": "ref-for-idl-promise\u2463"}], "title": "3. Accessing Local File System"}, {"refs": [{"id": "ref-for-idl-promise\u2464"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['b75bb3bd'] = {"dfnID": "b75bb3bd", "url": "https://webidl.spec.whatwg.org/#SecureContext", "dfnText": "SecureContext", "refSections": [{"refs": [{"id": "ref-for-SecureContext"}], "title": "2.3. The FileSystemHandle interface"}, {"refs": [{"id": "ref-for-SecureContext\u2460"}], "title": "3. Accessing Local File System"}], "external": true};
window.dfnpanelData['c3e881ef'] = {"dfnID": "c3e881ef", "url": "https://webidl.spec.whatwg.org/#securityerror", "dfnText": "SecurityError", "refSections": [{"refs": [{"id": "ref-for-securityerror"}, {"id": "ref-for-securityerror\u2460"}, {"id": "ref-for-securityerror\u2461"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-securityerror\u2462"}, {"id": "ref-for-securityerror\u2463"}, {"id": "ref-for-securityerror\u2464"}], "title": "3.1. Local File System Permissions"}], "external": true};
window.dfnpanelData['82ca3efc'] = {"dfnID": "82ca3efc", "url": "https://webidl.spec.whatwg.org/#exceptiondef-typeerror", "dfnText": "TypeError", "refSections": [{"refs": [{"id": "ref-for-exceptiondef-typeerror"}, {"id": "ref-for-exceptiondef-typeerror\u2460"}, {"id": "ref-for-exceptiondef-typeerror\u2461"}, {"id": "ref-for-exceptiondef-typeerror\u2462"}, {"id": "ref-for-exceptiondef-typeerror\u2463"}, {"id": "ref-for-exceptiondef-typeerror\u2464"}, {"id": "ref-for-exceptiondef-typeerror\u2465"}], "title": "3.2.1. Accepted file types"}, {"refs": [{"id": "ref-for-exceptiondef-typeerror\u2466"}, {"id": "ref-for-exceptiondef-typeerror\u2467"}], "title": "3.2.2. Starting Directory"}], "external": true};
window.dfnpanelData['b0d7f3c3'] = {"dfnID": "b0d7f3c3", "url": "https://webidl.spec.whatwg.org/#idl-USVString", "dfnText": "USVString", "refSections": [{"refs": [{"id": "ref-for-idl-USVString"}, {"id": "ref-for-idl-USVString\u2460"}, {"id": "ref-for-idl-USVString\u2461"}, {"id": "ref-for-idl-USVString\u2462"}, {"id": "ref-for-idl-USVString\u2463"}], "title": "3. Accessing Local File System"}], "external": true};
window.dfnpanelData['dacde8b5'] = {"dfnID": "dacde8b5", "url": "https://webidl.spec.whatwg.org/#a-new-promise", "dfnText": "a new promise", "refSections": [{"refs": [{"id": "ref-for-a-new-promise"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-a-new-promise\u2460"}], "title": "2.3.2. The requestPermission() method"}, {"refs": [{"id": "ref-for-a-new-promise\u2461"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-a-new-promise\u2462"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-a-new-promise\u2463"}], "title": "3.5. The showDirectoryPicker() method"}, {"refs": [{"id": "ref-for-a-new-promise\u2464"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['d0b4a948'] = {"dfnID": "d0b4a948", "url": "https://webidl.spec.whatwg.org/#a-promise-rejected-with", "dfnText": "a promise rejected with", "refSections": [{"refs": [{"id": "ref-for-a-promise-rejected-with"}, {"id": "ref-for-a-promise-rejected-with\u2460"}], "title": "3.1. Local File System Permissions"}], "external": true};
window.dfnpanelData['8f5c2179'] = {"dfnID": "8f5c2179", "url": "https://webidl.spec.whatwg.org/#a-promise-resolved-with", "dfnText": "a promise resolved with", "refSections": [{"refs": [{"id": "ref-for-a-promise-resolved-with"}, {"id": "ref-for-a-promise-resolved-with\u2460"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['5372cca8'] = {"dfnID": "5372cca8", "url": "https://webidl.spec.whatwg.org/#idl-boolean", "dfnText": "boolean", "refSections": [{"refs": [{"id": "ref-for-idl-boolean"}, {"id": "ref-for-idl-boolean\u2460"}], "title": "3. Accessing Local File System"}], "external": true};
window.dfnpanelData['7787d359'] = {"dfnID": "7787d359", "url": "https://webidl.spec.whatwg.org/#idl-record", "dfnText": "record", "refSections": [{"refs": [{"id": "ref-for-idl-record"}], "title": "3. Accessing Local File System"}], "external": true};
window.dfnpanelData['b262501e'] = {"dfnID": "b262501e", "url": "https://webidl.spec.whatwg.org/#reject", "dfnText": "reject", "refSections": [{"refs": [{"id": "ref-for-reject"}], "title": "2.3.2. The requestPermission() method"}, {"refs": [{"id": "ref-for-reject\u2460"}, {"id": "ref-for-reject\u2461"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-reject\u2462"}, {"id": "ref-for-reject\u2463"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-reject\u2464"}, {"id": "ref-for-reject\u2465"}, {"id": "ref-for-reject\u2466"}], "title": "3.5. The showDirectoryPicker() method"}], "external": true};
window.dfnpanelData['3b90bdcd'] = {"dfnID": "3b90bdcd", "url": "https://webidl.spec.whatwg.org/#resolve", "dfnText": "resolve", "refSections": [{"refs": [{"id": "ref-for-resolve"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-resolve\u2460"}], "title": "2.3.2. The requestPermission() method"}, {"refs": [{"id": "ref-for-resolve\u2461"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-resolve\u2462"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-resolve\u2463"}], "title": "3.5. The showDirectoryPicker() method"}, {"refs": [{"id": "ref-for-resolve\u2464"}], "title": "3.6. Drag and Drop"}], "external": true};
window.dfnpanelData['9cce47fd'] = {"dfnID": "9cce47fd", "url": "https://webidl.spec.whatwg.org/#idl-sequence", "dfnText": "sequence", "refSections": [{"refs": [{"id": "ref-for-idl-sequence"}, {"id": "ref-for-idl-sequence\u2460"}, {"id": "ref-for-idl-sequence\u2461"}], "title": "3. Accessing Local File System"}], "external": true};
window.dfnpanelData['4013a022'] = {"dfnID": "4013a022", "url": "https://webidl.spec.whatwg.org/#this", "dfnText": "this", "refSections": [{"refs": [{"id": "ref-for-this"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-this\u2460"}], "title": "2.3.2. The requestPermission() method"}, {"refs": [{"id": "ref-for-this\u2461"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-this\u2462"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-this\u2463"}], "title": "3.5. The showDirectoryPicker() method"}], "external": true};
window.dfnpanelData['b4cfa5ce'] = {"dfnID": "b4cfa5ce", "url": "https://webidl.spec.whatwg.org/#dfn-throw", "dfnText": "throw", "refSections": [{"refs": [{"id": "ref-for-dfn-throw"}, {"id": "ref-for-dfn-throw\u2460"}, {"id": "ref-for-dfn-throw\u2461"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dfn-throw\u2462"}], "title": "3.1. Local File System Permissions"}, {"refs": [{"id": "ref-for-dfn-throw\u2463"}, {"id": "ref-for-dfn-throw\u2464"}, {"id": "ref-for-dfn-throw\u2465"}, {"id": "ref-for-dfn-throw\u2466"}, {"id": "ref-for-dfn-throw\u2467"}, {"id": "ref-for-dfn-throw\u2468"}, {"id": "ref-for-dfn-throw\u2460\u24ea"}], "title": "3.2.1. Accepted file types"}, {"refs": [{"id": "ref-for-dfn-throw\u2460\u2460"}, {"id": "ref-for-dfn-throw\u2460\u2461"}], "title": "3.2.2. Starting Directory"}], "external": true};
window.dfnpanelData['valid-suffix-code-point'] = {"dfnID": "valid-suffix-code-point", "url": "#valid-suffix-code-point", "dfnText": "valid suffix code point", "refSections": [{"refs": [{"id": "ref-for-valid-suffix-code-point"}, {"id": "ref-for-valid-suffix-code-point\u2460"}], "title": "3.2.1. Accepted file types"}], "external": false};
window.dfnpanelData['dom-permissionname-file-system'] = {"dfnID": "dom-permissionname-file-system", "url": "#dom-permissionname-file-system", "dfnText": "\"file-system\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-file-system"}, {"id": "ref-for-dom-permissionname-file-system\u2460"}, {"id": "ref-for-dom-permissionname-file-system\u2461"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dom-permissionname-file-system\u2462"}, {"id": "ref-for-dom-permissionname-file-system\u2463"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-dom-permissionname-file-system\u2464"}], "title": "3.5. The showDirectoryPicker() method"}], "external": false};
window.dfnpanelData['enumdef-filesystempermissionmode'] = {"dfnID": "enumdef-filesystempermissionmode", "url": "#enumdef-filesystempermissionmode", "dfnText": "FileSystemPermissionMode", "refSections": [{"refs": [{"id": "ref-for-enumdef-filesystempermissionmode"}, {"id": "ref-for-enumdef-filesystempermissionmode\u2460"}, {"id": "ref-for-enumdef-filesystempermissionmode\u2461"}, {"id": "ref-for-enumdef-filesystempermissionmode\u2462"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-enumdef-filesystempermissionmode\u2463"}], "title": "2.3. The FileSystemHandle interface"}, {"refs": [{"id": "ref-for-enumdef-filesystempermissionmode\u2464"}], "title": "3. Accessing Local File System"}], "external": false};
window.dfnpanelData['dom-filesystempermissionmode-read'] = {"dfnID": "dom-filesystempermissionmode-read", "url": "#dom-filesystempermissionmode-read", "dfnText": "\"read\"", "refSections": [{"refs": [{"id": "ref-for-dom-filesystempermissionmode-read"}, {"id": "ref-for-dom-filesystempermissionmode-read\u2460"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dom-filesystempermissionmode-read\u2461"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-dom-filesystempermissionmode-read\u2462"}], "title": "2.3.2. The requestPermission() method"}, {"refs": [{"id": "ref-for-dom-filesystempermissionmode-read\u2463"}], "title": "3.1. Local File System Permissions"}], "external": false};
window.dfnpanelData['dom-filesystempermissionmode-readwrite'] = {"dfnID": "dom-filesystempermissionmode-readwrite", "url": "#dom-filesystempermissionmode-readwrite", "dfnText": "\"readwrite\"", "refSections": [{"refs": [{"id": "ref-for-dom-filesystempermissionmode-readwrite"}, {"id": "ref-for-dom-filesystempermissionmode-readwrite\u2460"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dom-filesystempermissionmode-readwrite\u2461"}, {"id": "ref-for-dom-filesystempermissionmode-readwrite\u2462"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-dom-filesystempermissionmode-readwrite\u2463"}], "title": "2.3.2. The requestPermission() method"}, {"refs": [{"id": "ref-for-dom-filesystempermissionmode-readwrite\u2464"}], "title": "3.1. Local File System Permissions"}], "external": false};
window.dfnpanelData['dictdef-filesystempermissiondescriptor'] = {"dfnID": "dictdef-filesystempermissiondescriptor", "url": "#dictdef-filesystempermissiondescriptor", "dfnText": "FileSystemPermissionDescriptor", "refSections": [{"refs": [{"id": "ref-for-dictdef-filesystempermissiondescriptor"}, {"id": "ref-for-dictdef-filesystempermissiondescriptor\u2460"}, {"id": "ref-for-dictdef-filesystempermissiondescriptor\u2461"}, {"id": "ref-for-dictdef-filesystempermissiondescriptor\u2462"}, {"id": "ref-for-dictdef-filesystempermissiondescriptor\u2463"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dictdef-filesystempermissiondescriptor\u2464"}], "title": "3.5. The showDirectoryPicker() method"}], "external": false};
window.dfnpanelData['dom-filesystempermissiondescriptor-handle'] = {"dfnID": "dom-filesystempermissiondescriptor-handle", "url": "#dom-filesystempermissiondescriptor-handle", "dfnText": "handle", "refSections": [{"refs": [{"id": "ref-for-dom-filesystempermissiondescriptor-handle"}, {"id": "ref-for-dom-filesystempermissiondescriptor-handle\u2460"}, {"id": "ref-for-dom-filesystempermissiondescriptor-handle\u2461"}, {"id": "ref-for-dom-filesystempermissiondescriptor-handle\u2462"}, {"id": "ref-for-dom-filesystempermissiondescriptor-handle\u2463"}, {"id": "ref-for-dom-filesystempermissiondescriptor-handle\u2464"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dom-filesystempermissiondescriptor-handle\u2465"}, {"id": "ref-for-dom-filesystempermissiondescriptor-handle\u2466"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-dom-filesystempermissiondescriptor-handle\u2467"}, {"id": "ref-for-dom-filesystempermissiondescriptor-handle\u2468"}], "title": "3.1. Local File System Permissions"}, {"refs": [{"id": "ref-for-dom-filesystempermissiondescriptor-handle\u2460\u24ea"}], "title": "3.5. The showDirectoryPicker() method"}], "external": false};
window.dfnpanelData['dom-filesystempermissiondescriptor-mode'] = {"dfnID": "dom-filesystempermissiondescriptor-mode", "url": "#dom-filesystempermissiondescriptor-mode", "dfnText": "mode", "refSections": [{"refs": [{"id": "ref-for-dom-filesystempermissiondescriptor-mode"}, {"id": "ref-for-dom-filesystempermissiondescriptor-mode\u2460"}, {"id": "ref-for-dom-filesystempermissiondescriptor-mode\u2461"}, {"id": "ref-for-dom-filesystempermissiondescriptor-mode\u2462"}, {"id": "ref-for-dom-filesystempermissiondescriptor-mode\u2463"}], "title": "2.2. Permissions"}, {"refs": [{"id": "ref-for-dom-filesystempermissiondescriptor-mode\u2464"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-dom-filesystempermissiondescriptor-mode\u2465"}, {"id": "ref-for-dom-filesystempermissiondescriptor-mode\u2466"}], "title": "3.1. Local File System Permissions"}, {"refs": [{"id": "ref-for-dom-filesystempermissiondescriptor-mode\u2467"}], "title": "3.5. The showDirectoryPicker() method"}], "external": false};
window.dfnpanelData['querying-file-system-permission'] = {"dfnID": "querying-file-system-permission", "url": "#querying-file-system-permission", "dfnText": "query file system permission", "refSections": [{"refs": [{"id": "ref-for-querying-file-system-permission"}], "title": "2.3.1. The queryPermission() method"}], "external": false};
window.dfnpanelData['requesting-file-system-permission'] = {"dfnID": "requesting-file-system-permission", "url": "#requesting-file-system-permission", "dfnText": "request file system permission", "refSections": [{"refs": [{"id": "ref-for-requesting-file-system-permission"}], "title": "2.3.2. The requestPermission() method"}], "external": false};
window.dfnpanelData['dictdef-filesystemhandlepermissiondescriptor'] = {"dfnID": "dictdef-filesystemhandlepermissiondescriptor", "url": "#dictdef-filesystemhandlepermissiondescriptor", "dfnText": "FileSystemHandlePermissionDescriptor", "refSections": [{"refs": [{"id": "ref-for-dictdef-filesystemhandlepermissiondescriptor"}, {"id": "ref-for-dictdef-filesystemhandlepermissiondescriptor\u2460"}], "title": "2.3. The FileSystemHandle interface"}], "external": false};
window.dfnpanelData['dom-filesystemhandlepermissiondescriptor-mode'] = {"dfnID": "dom-filesystemhandlepermissiondescriptor-mode", "url": "#dom-filesystemhandlepermissiondescriptor-mode", "dfnText": "mode", "refSections": [{"refs": [{"id": "ref-for-dom-filesystemhandlepermissiondescriptor-mode"}, {"id": "ref-for-dom-filesystemhandlepermissiondescriptor-mode\u2460"}, {"id": "ref-for-dom-filesystemhandlepermissiondescriptor-mode\u2461"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-dom-filesystemhandlepermissiondescriptor-mode\u2462"}, {"id": "ref-for-dom-filesystemhandlepermissiondescriptor-mode\u2463"}, {"id": "ref-for-dom-filesystemhandlepermissiondescriptor-mode\u2464"}], "title": "2.3.2. The requestPermission() method"}], "external": false};
window.dfnpanelData['dom-filesystemhandle-querypermission'] = {"dfnID": "dom-filesystemhandle-querypermission", "url": "#dom-filesystemhandle-querypermission", "dfnText": "queryPermission(descriptor)", "refSections": [{"refs": [{"id": "ref-for-dom-filesystemhandle-querypermission"}], "title": "2.3. The FileSystemHandle interface"}, {"refs": [{"id": "ref-for-dom-filesystemhandle-querypermission\u2460"}, {"id": "ref-for-dom-filesystemhandle-querypermission\u2461"}, {"id": "ref-for-dom-filesystemhandle-querypermission\u2462"}, {"id": "ref-for-dom-filesystemhandle-querypermission\u2463"}], "title": "2.3.1. The queryPermission() method"}], "external": false};
window.dfnpanelData['dom-filesystemhandle-requestpermission'] = {"dfnID": "dom-filesystemhandle-requestpermission", "url": "#dom-filesystemhandle-requestpermission", "dfnText": "requestPermission(descriptor)", "refSections": [{"refs": [{"id": "ref-for-dom-filesystemhandle-requestpermission"}], "title": "2.3. The FileSystemHandle interface"}, {"refs": [{"id": "ref-for-dom-filesystemhandle-requestpermission\u2460"}, {"id": "ref-for-dom-filesystemhandle-requestpermission\u2461"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-dom-filesystemhandle-requestpermission\u2462"}, {"id": "ref-for-dom-filesystemhandle-requestpermission\u2463"}, {"id": "ref-for-dom-filesystemhandle-requestpermission\u2464"}, {"id": "ref-for-dom-filesystemhandle-requestpermission\u2465"}], "title": "2.3.2. The requestPermission() method"}, {"refs": [{"id": "ref-for-dom-filesystemhandle-requestpermission\u2466"}], "title": "5.3. First-party vs third-party contexts."}], "external": false};
window.dfnpanelData['typedefdef-startindirectory'] = {"dfnID": "typedefdef-startindirectory", "url": "#typedefdef-startindirectory", "dfnText": "StartInDirectory", "refSections": [{"refs": [{"id": "ref-for-typedefdef-startindirectory"}, {"id": "ref-for-typedefdef-startindirectory\u2460"}], "title": "3. Accessing Local File System"}, {"refs": [{"id": "ref-for-typedefdef-startindirectory\u2461"}], "title": "3.2.2. Starting Directory"}], "external": false};
window.dfnpanelData['dictdef-filepickeraccepttype'] = {"dfnID": "dictdef-filepickeraccepttype", "url": "#dictdef-filepickeraccepttype", "dfnText": "FilePickerAcceptType", "refSections": [{"refs": [{"id": "ref-for-dictdef-filepickeraccepttype"}], "title": "3. Accessing Local File System"}], "external": false};
window.dfnpanelData['dom-filepickeraccepttype-description'] = {"dfnID": "dom-filepickeraccepttype-description", "url": "#dom-filepickeraccepttype-description", "dfnText": "description", "refSections": [{"refs": [{"id": "ref-for-dom-filepickeraccepttype-description"}, {"id": "ref-for-dom-filepickeraccepttype-description\u2460"}, {"id": "ref-for-dom-filepickeraccepttype-description\u2461"}, {"id": "ref-for-dom-filepickeraccepttype-description\u2462"}], "title": "3.2.1. Accepted file types"}], "external": false};
window.dfnpanelData['dom-filepickeraccepttype-accept'] = {"dfnID": "dom-filepickeraccepttype-accept", "url": "#dom-filepickeraccepttype-accept", "dfnText": "accept", "refSections": [{"refs": [{"id": "ref-for-dom-filepickeraccepttype-accept"}, {"id": "ref-for-dom-filepickeraccepttype-accept\u2460"}, {"id": "ref-for-dom-filepickeraccepttype-accept\u2461"}, {"id": "ref-for-dom-filepickeraccepttype-accept\u2462"}, {"id": "ref-for-dom-filepickeraccepttype-accept\u2463"}], "title": "3.2.1. Accepted file types"}], "external": false};
window.dfnpanelData['dictdef-filepickeroptions'] = {"dfnID": "dictdef-filepickeroptions", "url": "#dictdef-filepickeroptions", "dfnText": "FilePickerOptions", "refSections": [{"refs": [{"id": "ref-for-dictdef-filepickeroptions"}, {"id": "ref-for-dictdef-filepickeroptions\u2460"}], "title": "3. Accessing Local File System"}, {"refs": [{"id": "ref-for-dictdef-filepickeroptions\u2461"}, {"id": "ref-for-dictdef-filepickeroptions\u2462"}], "title": "3.2.1. Accepted file types"}], "external": false};
window.dfnpanelData['dom-filepickeroptions-types'] = {"dfnID": "dom-filepickeroptions-types", "url": "#dom-filepickeroptions-types", "dfnText": "types", "refSections": [{"refs": [{"id": "ref-for-dom-filepickeroptions-types"}, {"id": "ref-for-dom-filepickeroptions-types\u2460"}, {"id": "ref-for-dom-filepickeroptions-types\u2461"}, {"id": "ref-for-dom-filepickeroptions-types\u2462"}], "title": "3.2.1. Accepted file types"}], "external": false};
window.dfnpanelData['dom-filepickeroptions-excludeacceptalloption'] = {"dfnID": "dom-filepickeroptions-excludeacceptalloption", "url": "#dom-filepickeroptions-excludeacceptalloption", "dfnText": "excludeAcceptAllOption", "refSections": [{"refs": [{"id": "ref-for-dom-filepickeroptions-excludeacceptalloption"}, {"id": "ref-for-dom-filepickeroptions-excludeacceptalloption\u2460"}, {"id": "ref-for-dom-filepickeroptions-excludeacceptalloption\u2461"}], "title": "3.2.1. Accepted file types"}], "external": false};
window.dfnpanelData['dom-filepickeroptions-id'] = {"dfnID": "dom-filepickeroptions-id", "url": "#dom-filepickeroptions-id", "dfnText": "id", "refSections": [{"refs": [{"id": "ref-for-dom-filepickeroptions-id"}, {"id": "ref-for-dom-filepickeroptions-id\u2460"}, {"id": "ref-for-dom-filepickeroptions-id\u2461"}, {"id": "ref-for-dom-filepickeroptions-id\u2462"}, {"id": "ref-for-dom-filepickeroptions-id\u2463"}, {"id": "ref-for-dom-filepickeroptions-id\u2464"}, {"id": "ref-for-dom-filepickeroptions-id\u2465"}, {"id": "ref-for-dom-filepickeroptions-id\u2466"}, {"id": "ref-for-dom-filepickeroptions-id\u2467"}, {"id": "ref-for-dom-filepickeroptions-id\u2468"}, {"id": "ref-for-dom-filepickeroptions-id\u2460\u24ea"}, {"id": "ref-for-dom-filepickeroptions-id\u2460\u2460"}], "title": "3.2.2. Starting Directory"}, {"refs": [{"id": "ref-for-dom-filepickeroptions-id\u2460\u2461"}, {"id": "ref-for-dom-filepickeroptions-id\u2460\u2462"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-dom-filepickeroptions-id\u2460\u2463"}, {"id": "ref-for-dom-filepickeroptions-id\u2460\u2464"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-dom-filepickeroptions-id\u2460\u2465"}], "title": "3.5. The showDirectoryPicker() method"}], "external": false};
window.dfnpanelData['dom-filepickeroptions-startin'] = {"dfnID": "dom-filepickeroptions-startin", "url": "#dom-filepickeroptions-startin", "dfnText": "startIn", "refSections": [{"refs": [{"id": "ref-for-dom-filepickeroptions-startin"}, {"id": "ref-for-dom-filepickeroptions-startin\u2460"}, {"id": "ref-for-dom-filepickeroptions-startin\u2461"}, {"id": "ref-for-dom-filepickeroptions-startin\u2462"}, {"id": "ref-for-dom-filepickeroptions-startin\u2463"}, {"id": "ref-for-dom-filepickeroptions-startin\u2464"}, {"id": "ref-for-dom-filepickeroptions-startin\u2465"}, {"id": "ref-for-dom-filepickeroptions-startin\u2466"}, {"id": "ref-for-dom-filepickeroptions-startin\u2467"}], "title": "3.2.2. Starting Directory"}, {"refs": [{"id": "ref-for-dom-filepickeroptions-startin\u2468"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-dom-filepickeroptions-startin\u2460\u24ea"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-dom-filepickeroptions-startin\u2460\u2460"}], "title": "3.5. The showDirectoryPicker() method"}], "external": false};
window.dfnpanelData['dictdef-openfilepickeroptions'] = {"dfnID": "dictdef-openfilepickeroptions", "url": "#dictdef-openfilepickeroptions", "dfnText": "OpenFilePickerOptions", "refSections": [{"refs": [{"id": "ref-for-dictdef-openfilepickeroptions"}], "title": "3. Accessing Local File System"}], "external": false};
window.dfnpanelData['dom-openfilepickeroptions-multiple'] = {"dfnID": "dom-openfilepickeroptions-multiple", "url": "#dom-openfilepickeroptions-multiple", "dfnText": "multiple", "refSections": [{"refs": [{"id": "ref-for-dom-openfilepickeroptions-multiple"}, {"id": "ref-for-dom-openfilepickeroptions-multiple\u2460"}, {"id": "ref-for-dom-openfilepickeroptions-multiple\u2461"}], "title": "3.3. The showOpenFilePicker() method"}], "external": false};
window.dfnpanelData['dictdef-savefilepickeroptions'] = {"dfnID": "dictdef-savefilepickeroptions", "url": "#dictdef-savefilepickeroptions", "dfnText": "SaveFilePickerOptions", "refSections": [{"refs": [{"id": "ref-for-dictdef-savefilepickeroptions"}], "title": "3. Accessing Local File System"}], "external": false};
window.dfnpanelData['dom-savefilepickeroptions-suggestedname'] = {"dfnID": "dom-savefilepickeroptions-suggestedname", "url": "#dom-savefilepickeroptions-suggestedname", "dfnText": "suggestedName", "refSections": [{"refs": [{"id": "ref-for-dom-savefilepickeroptions-suggestedname"}, {"id": "ref-for-dom-savefilepickeroptions-suggestedname\u2460"}, {"id": "ref-for-dom-savefilepickeroptions-suggestedname\u2461"}, {"id": "ref-for-dom-savefilepickeroptions-suggestedname\u2462"}, {"id": "ref-for-dom-savefilepickeroptions-suggestedname\u2463"}, {"id": "ref-for-dom-savefilepickeroptions-suggestedname\u2464"}, {"id": "ref-for-dom-savefilepickeroptions-suggestedname\u2465"}], "title": "3.4. The showSaveFilePicker() method"}], "external": false};
window.dfnpanelData['dictdef-directorypickeroptions'] = {"dfnID": "dictdef-directorypickeroptions", "url": "#dictdef-directorypickeroptions", "dfnText": "DirectoryPickerOptions", "refSections": [{"refs": [{"id": "ref-for-dictdef-directorypickeroptions"}], "title": "3. Accessing Local File System"}], "external": false};
window.dfnpanelData['dom-directorypickeroptions-id'] = {"dfnID": "dom-directorypickeroptions-id", "url": "#dom-directorypickeroptions-id", "dfnText": "id", "refSections": [{"refs": [{"id": "ref-for-dom-directorypickeroptions-id"}, {"id": "ref-for-dom-directorypickeroptions-id\u2460"}, {"id": "ref-for-dom-directorypickeroptions-id\u2461"}], "title": "3.5. The showDirectoryPicker() method"}], "external": false};
window.dfnpanelData['dom-directorypickeroptions-startin'] = {"dfnID": "dom-directorypickeroptions-startin", "url": "#dom-directorypickeroptions-startin", "dfnText": "startIn", "refSections": [{"refs": [{"id": "ref-for-dom-directorypickeroptions-startin"}, {"id": "ref-for-dom-directorypickeroptions-startin\u2460"}], "title": "3.5. The showDirectoryPicker() method"}], "external": false};
window.dfnpanelData['dom-directorypickeroptions-mode'] = {"dfnID": "dom-directorypickeroptions-mode", "url": "#dom-directorypickeroptions-mode", "dfnText": "mode", "refSections": [{"refs": [{"id": "ref-for-dom-directorypickeroptions-mode"}, {"id": "ref-for-dom-directorypickeroptions-mode\u2460"}, {"id": "ref-for-dom-directorypickeroptions-mode\u2461"}], "title": "3.5. The showDirectoryPicker() method"}], "external": false};
window.dfnpanelData['local-file-system-handle-factories'] = {"dfnID": "local-file-system-handle-factories", "url": "#local-file-system-handle-factories", "dfnText": "local file system handle factories", "refSections": [{"refs": [{"id": "ref-for-local-file-system-handle-factories"}], "title": "2.3.1. The queryPermission() method"}, {"refs": [{"id": "ref-for-local-file-system-handle-factories\u2460"}, {"id": "ref-for-local-file-system-handle-factories\u2461"}], "title": "3.1. Local File System Permissions"}, {"refs": [{"id": "ref-for-local-file-system-handle-factories\u2462"}], "title": "3.6. Drag and Drop"}, {"refs": [{"id": "ref-for-local-file-system-handle-factories\u2463"}], "title": "5.3. First-party vs third-party contexts."}], "external": false};
window.dfnpanelData['is-allowed-to-show-a-file-picker'] = {"dfnID": "is-allowed-to-show-a-file-picker", "url": "#is-allowed-to-show-a-file-picker", "dfnText": "is allowed to show a file picker", "refSections": [{"refs": [{"id": "ref-for-is-allowed-to-show-a-file-picker"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-is-allowed-to-show-a-file-picker\u2460"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-is-allowed-to-show-a-file-picker\u2461"}], "title": "3.5. The showDirectoryPicker() method"}], "external": false};
window.dfnpanelData['process-accept-types'] = {"dfnID": "process-accept-types", "url": "#process-accept-types", "dfnText": "process accept types", "refSections": [{"refs": [{"id": "ref-for-process-accept-types"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-process-accept-types\u2460"}], "title": "3.4. The showSaveFilePicker() method"}], "external": false};
window.dfnpanelData['validate-a-suffix'] = {"dfnID": "validate-a-suffix", "url": "#validate-a-suffix", "dfnText": "validate a suffix", "refSections": [{"refs": [{"id": "ref-for-validate-a-suffix"}, {"id": "ref-for-validate-a-suffix\u2460"}], "title": "3.2.1. Accepted file types"}], "external": false};
window.dfnpanelData['recently-picked-directory-map'] = {"dfnID": "recently-picked-directory-map", "url": "#recently-picked-directory-map", "dfnText": "recently picked directory map", "refSections": [{"refs": [{"id": "ref-for-recently-picked-directory-map"}, {"id": "ref-for-recently-picked-directory-map\u2460"}, {"id": "ref-for-recently-picked-directory-map\u2461"}, {"id": "ref-for-recently-picked-directory-map\u2462"}, {"id": "ref-for-recently-picked-directory-map\u2463"}, {"id": "ref-for-recently-picked-directory-map\u2464"}, {"id": "ref-for-recently-picked-directory-map\u2465"}], "title": "3.2.2. Starting Directory"}], "external": false};
window.dfnpanelData['path-id-map'] = {"dfnID": "path-id-map", "url": "#path-id-map", "dfnText": "path id map", "refSections": [{"refs": [{"id": "ref-for-path-id-map"}, {"id": "ref-for-path-id-map\u2460"}, {"id": "ref-for-path-id-map\u2461"}, {"id": "ref-for-path-id-map\u2462"}], "title": "3.2.2. Starting Directory"}], "external": false};
window.dfnpanelData['valid-path-id'] = {"dfnID": "valid-path-id", "url": "#valid-path-id", "dfnText": "valid path id", "refSections": [{"refs": [{"id": "ref-for-valid-path-id"}, {"id": "ref-for-valid-path-id\u2460"}], "title": "3.2.2. Starting Directory"}], "external": false};
window.dfnpanelData['enumdef-wellknowndirectory'] = {"dfnID": "enumdef-wellknowndirectory", "url": "#enumdef-wellknowndirectory", "dfnText": "WellKnownDirectory", "refSections": [{"refs": [{"id": "ref-for-enumdef-wellknowndirectory"}, {"id": "ref-for-enumdef-wellknowndirectory\u2460"}], "title": "3. Accessing Local File System"}, {"refs": [{"id": "ref-for-enumdef-wellknowndirectory\u2461"}, {"id": "ref-for-enumdef-wellknowndirectory\u2462"}, {"id": "ref-for-enumdef-wellknowndirectory\u2463"}, {"id": "ref-for-enumdef-wellknowndirectory\u2464"}, {"id": "ref-for-enumdef-wellknowndirectory\u2465"}], "title": "3.2.2. Starting Directory"}], "external": false};
window.dfnpanelData['dom-wellknowndirectory-desktop'] = {"dfnID": "dom-wellknowndirectory-desktop", "url": "#dom-wellknowndirectory-desktop", "dfnText": "\"desktop\"", "refSections": [{"refs": [{"id": "ref-for-dom-wellknowndirectory-desktop"}], "title": "3. Accessing Local File System"}], "external": false};
window.dfnpanelData['dom-wellknowndirectory-documents'] = {"dfnID": "dom-wellknowndirectory-documents", "url": "#dom-wellknowndirectory-documents", "dfnText": "\"documents\"", "refSections": [{"refs": [{"id": "ref-for-dom-wellknowndirectory-documents"}], "title": "3. Accessing Local File System"}], "external": false};
window.dfnpanelData['dom-wellknowndirectory-downloads'] = {"dfnID": "dom-wellknowndirectory-downloads", "url": "#dom-wellknowndirectory-downloads", "dfnText": "\"downloads\"", "refSections": [{"refs": [{"id": "ref-for-dom-wellknowndirectory-downloads"}], "title": "3. Accessing Local File System"}, {"refs": [{"id": "ref-for-dom-wellknowndirectory-downloads\u2460"}, {"id": "ref-for-dom-wellknowndirectory-downloads\u2461"}], "title": "3.2.2. Starting Directory"}], "external": false};
window.dfnpanelData['dom-wellknowndirectory-music'] = {"dfnID": "dom-wellknowndirectory-music", "url": "#dom-wellknowndirectory-music", "dfnText": "\"music\"", "refSections": [{"refs": [{"id": "ref-for-dom-wellknowndirectory-music"}], "title": "3. Accessing Local File System"}], "external": false};
window.dfnpanelData['dom-wellknowndirectory-pictures'] = {"dfnID": "dom-wellknowndirectory-pictures", "url": "#dom-wellknowndirectory-pictures", "dfnText": "\"pictures\"", "refSections": [{"refs": [{"id": "ref-for-dom-wellknowndirectory-pictures"}], "title": "3. Accessing Local File System"}], "external": false};
window.dfnpanelData['dom-wellknowndirectory-videos'] = {"dfnID": "dom-wellknowndirectory-videos", "url": "#dom-wellknowndirectory-videos", "dfnText": "\"videos\"", "refSections": [{"refs": [{"id": "ref-for-dom-wellknowndirectory-videos"}], "title": "3. Accessing Local File System"}], "external": false};
window.dfnpanelData['wellknowndirectory-determine-the-directory-the-picker-will-start-in'] = {"dfnID": "wellknowndirectory-determine-the-directory-the-picker-will-start-in", "url": "#wellknowndirectory-determine-the-directory-the-picker-will-start-in", "dfnText": "determine the directory the picker will start in", "refSections": [{"refs": [{"id": "ref-for-wellknowndirectory-determine-the-directory-the-picker-will-start-in"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-wellknowndirectory-determine-the-directory-the-picker-will-start-in\u2460"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-wellknowndirectory-determine-the-directory-the-picker-will-start-in\u2461"}], "title": "3.5. The showDirectoryPicker() method"}], "external": false};
window.dfnpanelData['wellknowndirectory-remember-a-picked-directory'] = {"dfnID": "wellknowndirectory-remember-a-picked-directory", "url": "#wellknowndirectory-remember-a-picked-directory", "dfnText": "remember a picked directory", "refSections": [{"refs": [{"id": "ref-for-wellknowndirectory-remember-a-picked-directory"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-wellknowndirectory-remember-a-picked-directory\u2460"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-wellknowndirectory-remember-a-picked-directory\u2461"}], "title": "3.5. The showDirectoryPicker() method"}], "external": false};
window.dfnpanelData['dom-window-showopenfilepicker'] = {"dfnID": "dom-window-showopenfilepicker", "url": "#dom-window-showopenfilepicker", "dfnText": "showOpenFilePicker(options)", "refSections": [{"refs": [{"id": "ref-for-dom-window-showopenfilepicker"}, {"id": "ref-for-dom-window-showopenfilepicker\u2460"}], "title": "3. Accessing Local File System"}, {"refs": [{"id": "ref-for-dom-window-showopenfilepicker\u2461"}], "title": "3.2.1. Accepted file types"}, {"refs": [{"id": "ref-for-dom-window-showopenfilepicker\u2462"}, {"id": "ref-for-dom-window-showopenfilepicker\u2463"}, {"id": "ref-for-dom-window-showopenfilepicker\u2464"}, {"id": "ref-for-dom-window-showopenfilepicker\u2465"}, {"id": "ref-for-dom-window-showopenfilepicker\u2466"}], "title": "3.3. The showOpenFilePicker() method"}], "external": false};
window.dfnpanelData['dom-window-showsavefilepicker'] = {"dfnID": "dom-window-showsavefilepicker", "url": "#dom-window-showsavefilepicker", "dfnText": "showSaveFilePicker(options)", "refSections": [{"refs": [{"id": "ref-for-dom-window-showsavefilepicker"}, {"id": "ref-for-dom-window-showsavefilepicker\u2460"}], "title": "3. Accessing Local File System"}, {"refs": [{"id": "ref-for-dom-window-showsavefilepicker\u2461"}], "title": "3.1. Local File System Permissions"}, {"refs": [{"id": "ref-for-dom-window-showsavefilepicker\u2462"}], "title": "3.2.1. Accepted file types"}, {"refs": [{"id": "ref-for-dom-window-showsavefilepicker\u2463"}, {"id": "ref-for-dom-window-showsavefilepicker\u2464"}, {"id": "ref-for-dom-window-showsavefilepicker\u2465"}, {"id": "ref-for-dom-window-showsavefilepicker\u2466"}], "title": "3.4. The showSaveFilePicker() method"}], "external": false};
window.dfnpanelData['dom-window-showdirectorypicker'] = {"dfnID": "dom-window-showdirectorypicker", "url": "#dom-window-showdirectorypicker", "dfnText": "showDirectoryPicker(options)", "refSections": [{"refs": [{"id": "ref-for-dom-window-showdirectorypicker"}, {"id": "ref-for-dom-window-showdirectorypicker\u2460"}], "title": "3. Accessing Local File System"}, {"refs": [{"id": "ref-for-dom-window-showdirectorypicker\u2461"}, {"id": "ref-for-dom-window-showdirectorypicker\u2462"}, {"id": "ref-for-dom-window-showdirectorypicker\u2463"}, {"id": "ref-for-dom-window-showdirectorypicker\u2464"}], "title": "3.5. The showDirectoryPicker() method"}], "external": false};
window.dfnpanelData['dom-datatransferitem-getasfilesystemhandle'] = {"dfnID": "dom-datatransferitem-getasfilesystemhandle", "url": "#dom-datatransferitem-getasfilesystemhandle", "dfnText": "getAsFileSystemHandle()", "refSections": [{"refs": [{"id": "ref-for-dom-datatransferitem-getasfilesystemhandle"}, {"id": "ref-for-dom-datatransferitem-getasfilesystemhandle\u2460"}], "title": "3.6. Drag and Drop"}], "external": false};
window.dfnpanelData['wellknowndirectory-too-sensitive-or-dangerous'] = {"dfnID": "wellknowndirectory-too-sensitive-or-dangerous", "url": "#wellknowndirectory-too-sensitive-or-dangerous", "dfnText": "too sensitive or dangerous", "refSections": [{"refs": [{"id": "ref-for-wellknowndirectory-too-sensitive-or-dangerous"}], "title": "3.3. The showOpenFilePicker() method"}, {"refs": [{"id": "ref-for-wellknowndirectory-too-sensitive-or-dangerous\u2460"}], "title": "3.4. The showSaveFilePicker() method"}, {"refs": [{"id": "ref-for-wellknowndirectory-too-sensitive-or-dangerous\u2461"}], "title": "3.5. The showDirectoryPicker() method"}, {"refs": [{"id": "ref-for-wellknowndirectory-too-sensitive-or-dangerous\u2462"}], "title": "3.6. Drag and Drop"}], "external": false};
</script>
<script>/* Boilerplate: script-dom-helper */
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}
</script>
<script>/* Boilerplate: script-position-annos */
"use strict";
{

function repositionAnnoPanels(){
    const panels = [...document.querySelectorAll("[data-anno-for]")];
    const main = document.querySelector("main");
    let mainRect;
    if(main) mainRect = main.getBoundingClientRect();
    for(const panel of panels) {
        const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
        if(!dfn) {
            console.log("Can't find the annotation panel target:", panel);
            continue;
        }
        const rect = dfn.getBoundingClientRect();
        const top = window.scrollY + rect.top
        panel.style.top = top + "px";
        panel.top = top;
        panel.height = rect.height;
        panel.classList.remove("unpositioned");
        const panelRect = panel.getBoundingClientRect()
        if(main) {
            panel.classList.toggle("overlapping-main", panelRect.left < mainRect.right)
        }
    }
    let vSoFar = 0;
    for(const panel of panels.sort(cmpTops)) {
        if(panel.top < vSoFar) {
            panel.top = vSoFar;
            panel.style.top = vSoFar + "px";
        }
        vSoFar = panel.top + panel.height + 15;
    }
}

function cmpTops(a,b) {
    return a.top - b.top;
}

window.addEventListener("load", repositionAnnoPanels);
window.addEventListener("resize", repositionAnnoPanels);
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
/*
Color-choosing design:

Colors are ordered by goodness.
Each color has a usage count (initially zero).
Each variable has a last-used color.

* If the var has a last-used color, and that color's usage is 0,
    return that color.
* Otherwise, return the lowest-indexed color with the lowest usage.
    Increment the color's usage and set it as the last-used color
    for that var.
* On unclicking, decrement usage of the color.
*/
"use strict";
{
    document.addEventListener("click", e=>{
        if(e.target.nodeName == "VAR") {
            highlightSameAlgoVars(e.target);
        }
    });
    const indexCounts = new Map();
    const indexNames = new Map();
    function highlightSameAlgoVars(v) {
        // Find the algorithm container.
        let algoContainer = null;
        let searchEl = v;
        while(algoContainer == null && searchEl != document.body) {
            searchEl = searchEl.parentNode;
            if(searchEl.hasAttribute("data-algorithm")) {
                algoContainer = searchEl;
            }
        }

        // Not highlighting document-global vars,
        // too likely to be unrelated.
        if(algoContainer == null) return;

        const algoName = algoContainer.getAttribute("data-algorithm");
        const varName = getVarName(v);
        const addClass = !v.classList.contains("selected");
        let highlightClass = null;
        if(addClass) {
            const index = chooseHighlightIndex(algoName, varName);
            indexCounts.get(algoName)[index] += 1;
            indexNames.set(algoName+"///"+varName, index);
            highlightClass = nameFromIndex(index);
        } else {
            const index = previousHighlightIndex(algoName, varName);
            indexCounts.get(algoName)[index] -= 1;
            highlightClass = nameFromIndex(index);
        }

        // Find all same-name vars, and toggle their class appropriately.
        for(const el of algoContainer.querySelectorAll("var")) {
            if(getVarName(el) == varName) {
                el.classList.toggle("selected", addClass);
                el.classList.toggle(highlightClass, addClass);
            }
        }
    }
    function getVarName(el) {
        return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
    }
    function chooseHighlightIndex(algoName, varName) {
        let indexes = null;
        if(indexCounts.has(algoName)) {
            indexes = indexCounts.get(algoName);
        } else {
            // 7 classes right now
            indexes = [0,0,0,0,0,0,0];
            indexCounts.set(algoName, indexes);
        }

        // If the element was recently unclicked,
        // *and* that color is still unclaimed,
        // give it back the same color.
        const lastIndex = previousHighlightIndex(algoName, varName);
        if(indexes[lastIndex] === 0) return lastIndex;

        // Find the earliest index with the lowest count.
        const minCount = Math.min.apply(null, indexes);
        let index = null;
        for(var i = 0; i < indexes.length; i++) {
            if(indexes[i] == minCount) {
                return i;
            }
        }
    }
    function previousHighlightIndex(algoName, varName) {
        return indexNames.get(algoName+"///"+varName);
    }
    function nameFromIndex(index) {
        return "selected" + index;
    }
}
</script>